{
    "schema_version": 2,
    "oldId": "-MYVhEYuywBsyHhumq6k",
    "name": "Mule",
    "avatar": "https://s3.amazonaws.com/files.d20.io/images/216342571/CBOiNmzCYomt318feM3ykw/med.jpg?1618677725",
    "bio": "%3Cp%3EUsed%20to%20easily%20hold%20and%20port%20macros%20between%20games%3C/p%3E",
    "gmnotes": "",
    "defaulttoken": "",
    "tags": "[\"Macro\",\"Utility\"]",
    "controlledby": "all,-MNRhS9M_b8eDL9Zs0pm",
    "inplayerjournals": "-MNRhS9M_b8eDL9Zs0pm,-MVqEDdmkgsCbCR6uxQS",
    "attribs": [
        {
            "name": "l1mancer_status",
            "current": "completed",
            "max": "",
            "id": "-MYVhEbKuL_EaudHL5XS"
        },
        {
            "name": "rtype",
            "current": "@{advantagetoggle}",
            "max": "",
            "id": "-MYVhEbRpu5x-AiD5lHY"
        },
        {
            "name": "dtype",
            "current": "full",
            "max": "",
            "id": "-MYVhEbVHs9-PYY-IdSK"
        },
        {
            "name": "init_tiebreaker",
            "current": "@{dexterity}/100",
            "max": "",
            "id": "-MYVhEbZTBPpFJqNIEq7"
        },
        {
            "name": "global_save_mod_flag",
            "current": "1",
            "max": "",
            "id": "-MYVhEbbgA6AgvODmc47"
        },
        {
            "name": "global_attack_mod_flag",
            "current": "1",
            "max": "",
            "id": "-MYVhEbeSEuPIaqGkBqr"
        },
        {
            "name": "ammotracking",
            "current": "on",
            "max": "",
            "id": "-MYVhEbhdwBtB9PrCaLT"
        },
        {
            "name": "cd_bar2_v",
            "current": "npc_ac",
            "max": "",
            "id": "-MYVhEbkkNSTb9WvJLlk"
        },
        {
            "name": "cd_bar2_m",
            "current": "npc_ac",
            "max": "",
            "id": "-MYVhEbnOh94sDptsll0"
        },
        {
            "name": "sanity_toggle",
            "current": "0",
            "max": "",
            "id": "-MYVhEbpnpOBuTULuRmZ"
        },
        {
            "name": "strength_save_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{strength-save-u}}} {{mod=@{strength_save_bonus}}} {{r1=[[@{d20}+@{strength_save_bonus}@{pbd_safe}]]}} @{advantagetoggle}+@{strength_save_bonus}@{pbd_safe}]]}} {{global=@{global_save_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEdejX-ea5kd_Nuj"
        },
        {
            "name": "dexterity_save_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{dexterity-save-u}}} {{mod=@{dexterity_save_bonus}}} {{r1=[[@{d20}+@{dexterity_save_bonus}@{pbd_safe}]]}} @{advantagetoggle}+@{dexterity_save_bonus}@{pbd_safe}]]}} {{global=@{global_save_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEdj8gbbLWs_tX9V"
        },
        {
            "name": "constitution_save_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{constitution-save-u}}} {{mod=@{constitution_save_bonus}}} {{r1=[[@{d20}+@{constitution_save_bonus}@{pbd_safe}]]}} @{advantagetoggle}+@{constitution_save_bonus}@{pbd_safe}]]}} {{global=@{global_save_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEdmuLzezXjLgiWj"
        },
        {
            "name": "intelligence_save_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{intelligence-save-u}}} {{mod=@{intelligence_save_bonus}}} {{r1=[[@{d20}+@{intelligence_save_bonus}@{pbd_safe}]]}} @{advantagetoggle}+@{intelligence_save_bonus}@{pbd_safe}]]}} {{global=@{global_save_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEdqzGNrWTt1gZI2"
        },
        {
            "name": "wisdom_save_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{wisdom-save-u}}} {{mod=@{wisdom_save_bonus}}} {{r1=[[@{d20}+@{wisdom_save_bonus}@{pbd_safe}]]}} @{advantagetoggle}+@{wisdom_save_bonus}@{pbd_safe}]]}} {{global=@{global_save_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEdtdwWVG0DZKLxR"
        },
        {
            "name": "charisma_save_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{charisma-save-u}}} {{mod=@{charisma_save_bonus}}} {{r1=[[@{d20}+@{charisma_save_bonus}@{pbd_safe}]]}} @{advantagetoggle}+@{charisma_save_bonus}@{pbd_safe}]]}} {{global=@{global_save_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEdwUN671qeppmy4"
        },
        {
            "name": "honor_save_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{honor-save-u}}} {{mod=@{honor_save_bonus}}} {{r1=[[@{d20}+@{honor_save_bonus}@{pbd_safe}]]}} @{advantagetoggle}+@{honor_save_bonus}@{pbd_safe}]]}} {{global=@{global_save_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEe-SG8cvpTu2CV2"
        },
        {
            "name": "sanity_save_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{sanity-save-u}}} {{mod=@{sanity_save_bonus}}} {{r1=[[@{d20}+@{sanity_save_bonus}@{pbd_safe}]]}} @{advantagetoggle}+@{sanity_save_bonus}@{pbd_safe}]]}} {{global=@{global_save_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEe3myI19dQLdEJV"
        },
        {
            "name": "athletics_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{athletics-u}}} {{mod=@{athletics_bonus}}} {{r1=[[@{d20}+@{athletics_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{athletics_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEe9rHFY3S6UAJ8S"
        },
        {
            "name": "acrobatics_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{acrobatics-u}}} {{mod=@{acrobatics_bonus}}} {{r1=[[@{d20}+@{acrobatics_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{acrobatics_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEeD9GCGgLlUgCpm"
        },
        {
            "name": "sleight_of_hand_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{sleight_of_hand-u}}} {{mod=@{sleight_of_hand_bonus}}} {{r1=[[@{d20}+@{sleight_of_hand_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{sleight_of_hand_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEeHP2UDe6l5D4Pc"
        },
        {
            "name": "stealth_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{stealth-u}}} {{mod=@{stealth_bonus}}} {{r1=[[@{d20}+@{stealth_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{stealth_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEeM8nNMs6il4VEw"
        },
        {
            "name": "arcana_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{arcana-u}}} {{mod=@{arcana_bonus}}} {{r1=[[@{d20}+@{arcana_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{arcana_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEeQA6gYX4oUY7Pm"
        },
        {
            "name": "history_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{history-u}}} {{mod=@{history_bonus}}} {{r1=[[@{d20}+@{history_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{history_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEeZnYxaS1RQlzpj"
        },
        {
            "name": "investigation_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{investigation-u}}} {{mod=@{investigation_bonus}}} {{r1=[[@{d20}+@{investigation_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{investigation_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEecDhmA7ATyrS7I"
        },
        {
            "name": "nature_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{nature-u}}} {{mod=@{nature_bonus}}} {{r1=[[@{d20}+@{nature_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{nature_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEehnvnMYEYiIKnq"
        },
        {
            "name": "religion_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{religion-u}}} {{mod=@{religion_bonus}}} {{r1=[[@{d20}+@{religion_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{religion_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEekIgwR8IFwFAdX"
        },
        {
            "name": "animal_handling_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{animal_handling-u}}} {{mod=@{animal_handling_bonus}}} {{r1=[[@{d20}+@{animal_handling_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{animal_handling_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEeoURjAWj-j-K0f"
        },
        {
            "name": "insight_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{insight-u}}} {{mod=@{insight_bonus}}} {{r1=[[@{d20}+@{insight_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{insight_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEes7cauSNcrjMHh"
        },
        {
            "name": "medicine_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{medicine-u}}} {{mod=@{medicine_bonus}}} {{r1=[[@{d20}+@{medicine_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{medicine_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEev74NmCd3HDKQF"
        },
        {
            "name": "perception_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{perception-u}}} {{mod=@{perception_bonus}}} {{r1=[[@{d20}+@{perception_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{perception_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEeyfPYd3ZKVlzXQ"
        },
        {
            "name": "survival_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{survival-u}}} {{mod=@{survival_bonus}}} {{r1=[[@{d20}+@{survival_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{survival_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEf1FV72PJue3ozQ"
        },
        {
            "name": "deception_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{deception-u}}} {{mod=@{deception_bonus}}} {{r1=[[@{d20}+@{deception_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{deception_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEf4qwYYSAxpVeem"
        },
        {
            "name": "intimidation_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{intimidation-u}}} {{mod=@{intimidation_bonus}}} {{r1=[[@{d20}+@{intimidation_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{intimidation_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEf85z3C6jQ7qOAT"
        },
        {
            "name": "performance_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{performance-u}}} {{mod=@{performance_bonus}}} {{r1=[[@{d20}+@{performance_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{performance_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEfAJRxLUTFa3iEt"
        },
        {
            "name": "persuasion_roll",
            "current": "@{wtype}&{template:simple} {{rname=^{persuasion-u}}} {{mod=@{persuasion_bonus}}} {{r1=[[@{d20}+@{persuasion_bonus}[Mods]@{pbd_safe}]]}} @{advantagetoggle}+@{persuasion_bonus}[Mods]@{pbd_safe}]]}} {{global=@{global_skill_mod}}} @{charname_output}",
            "max": "",
            "id": "-MYVhEfEHk66CiU7EENy"
        },
        {
            "name": "initiative_bonus",
            "current": 0.1,
            "max": "",
            "id": "-MYVhEfXuc_qMfFyUHP9"
        },
        {
            "name": "repeating_savemod_-MYVhFF165iNLlpjDSZz_global_save_roll",
            "current": "1d4",
            "max": "",
            "id": "-MYVhFFX7ejzUODBqRt9"
        },
        {
            "name": "repeating_savemod_-MYVhFF165iNLlpjDSZz_global_save_name",
            "current": "BLESS",
            "max": "",
            "id": "-MYVhFFfCj4sOANYmH64"
        },
        {
            "name": "repeating_savemod_-MYVhFF165iNLlpjDSZz_global_save_active_flag",
            "current": "1",
            "max": "",
            "id": "-MYVhFFll32msDT8Q5Cm"
        },
        {
            "name": "repeating_tohitmod_-MYVhFF165iNLlpjDSZ-_global_attack_roll",
            "current": "1d4",
            "max": "",
            "id": "-MYVhFFq12WN7b8ljVdn"
        },
        {
            "name": "repeating_tohitmod_-MYVhFF165iNLlpjDSZ-_global_attack_name",
            "current": "BLESS",
            "max": "",
            "id": "-MYVhFFwslz_M0LLxprk"
        },
        {
            "name": "repeating_tohitmod_-MYVhFF165iNLlpjDSZ-_global_attack_active_flag",
            "current": "1",
            "max": "",
            "id": "-MYVhFG1jF11dcttgmnM"
        },
        {
            "name": "global_save_mod",
            "current": "[[1d4[BLESS]]]",
            "max": "",
            "id": "-MYVhFHrPB7y8kGhr0-g"
        },
        {
            "name": "global_attack_mod",
            "current": "[[1d4[BLESS]]]",
            "max": "",
            "id": "-MYVhFHvIyXh_TW5tsKP"
        },
        {
            "name": "hitdieroll",
            "current": "4",
            "max": "",
            "id": "-MYVhVuAZ0feq7TXm5o7"
        },
        {
            "name": "showleveler",
            "current": 0,
            "max": "",
            "id": "-MYVhVuI_FNi8R-Ahwhy"
        },
        {
            "name": "invalidXP",
            "current": 0,
            "max": "",
            "id": "-MYVhVuQVf3WEYg2YJQN"
        },
        {
            "name": "version",
            "current": 4.21,
            "max": "",
            "id": "-MYVhVx_pb1Kfz1ckYy6"
        },
        {
            "name": "appliedUpdates",
            "current": "upgrade_to_4_2_1,fix_spell_attacks,fix_pc_skill_and_saving_rolls,fix_pc_saving_rolls,fix_pc_skill_and_saving_rolls_with_expertise,fix_pc_skill_and_saving_rolls_with_reliable_talent,enable_powerful_build_on_existing_characters,fix_pc_global_critical_damage_rolls,fix_pc_global_critical_stacked_damage_rolls,fix_pc_skill_rolls_tooltips,fix_pc_global_statical_critical_damage,fix_spell_school_ouput,fix_pc_global_multiple_statical_critical_damage,fix_spell_savedc_output,fix_spellpoints,fix_advantage_query",
            "max": "",
            "id": "-MYVhVy0HCS6-L0y0GHt"
        },
        {
            "name": "global_damage_mod_roll",
            "current": "",
            "max": "",
            "id": "-MYVhW0MPy1yosncR-A5"
        },
        {
            "name": "global_damage_mod_crit",
            "current": "",
            "max": "",
            "id": "-MYVhW0R-plS7VC9iy8V"
        },
        {
            "name": "global_damage_mod_type",
            "current": "",
            "max": "",
            "id": "-MYVhW0WdklyGo88LRbP"
        },
        {
            "name": "queryadvantage",
            "current": "{{query=1}} ?{Advantage?|Normal Roll,&#123&#123normal=1&#125&#125 &#123&#123r2=[[0d20|Advantage,&#123&#123advantage=1&#125&#125 &#123&#123r2=[[@{d20}|Disadvantage,&#123&#123disadvantage=1&#125&#125 &#123&#123r2=[[@{d20}}",
            "max": "",
            "id": "-MYVhW4JfTy8pcM9Z1Vf"
        },
        {
            "name": "mancer_confirm_flag",
            "current": "",
            "max": "",
            "id": "-MYVhW5OnDODUPts0VhZ"
        },
        {
            "name": "mancer_cancel",
            "current": "on",
            "max": "",
            "id": "-MYWb30NUwVRTiP-spoW"
        },
        {
            "name": "cmp_characters",
            "current": "6",
            "max": "",
            "id": "-MZ3qkhwTud-pfNMHJD8"
        },
        {
            "name": "cmp_character_name1",
            "current": "Kharg",
            "max": "Kharg",
            "id": "-MZ3qq7Z-SbWH8yypokg"
        },
        {
            "name": "cmp_character_name2",
            "current": "Shaper",
            "max": "Shaper",
            "id": "-MZ3qyUAWnwcX1Nid2Px"
        },
        {
            "name": "cmp_character_name3",
            "current": "Eliza Redburrow",
            "max": "Eliza",
            "id": "-MZ3rB2sX3PBxfbtfcdF"
        },
        {
            "name": "cmp_character_name4",
            "current": "Jokaryn",
            "max": "Jokaryn",
            "id": "-MZ3rJ0ep2SYhD0ERFce"
        },
        {
            "name": "cmp_character_name5",
            "current": "Xaral Mind-drinker",
            "max": "Xaral",
            "id": "-MZ3rSYxISZSaGUMWDuY"
        },
        {
            "name": "cmp_character_name6",
            "current": "Picardo",
            "max": "Picardo",
            "id": "-MZ3roYrQZncAFcj2Ggm"
        },
        {
            "name": "cmp_character_id1",
            "current": "-MNvJHCq3ftZglXJKRQk",
            "max": "",
            "id": "-MZ4C8AIJP6EGDM_G66S"
        },
        {
            "name": "cmp_character_id2",
            "current": "-MPKwr99wT9sWlOlwMRM",
            "max": "",
            "id": "-MZ4CEIqCXFvMJRqNiCs"
        },
        {
            "name": "cmp_character_id3",
            "current": "-MUdcY7R5dKdJzzhlQTH",
            "max": "",
            "id": "-MZ4CIN-lnt0YA1r6qS_"
        },
        {
            "name": "cmp_character_id4",
            "current": "-MNpyES-Cd9Fk8TZg6h6",
            "max": "",
            "id": "-MZ4CLr_nq8sJE6tW0GD"
        },
        {
            "name": "cmp_character_id5",
            "current": "-MNvIO7FFGVxHfZ69z2G",
            "max": "",
            "id": "-MZ4COJOdKyrnXWV_xJQ"
        },
        {
            "name": "cmp_character_id6",
            "current": "-MVE0YY-co0VmnNlVBIU",
            "max": "",
            "id": "-MZ4CRDEspNQYsycInIy"
        }
    ],
    "abilities": [
        {
            "name": "Kill",
            "description": "",
            "istokenaction": false,
            "action": "!script {{  \n  --#title|Kill Selected Item and remove from order\n  --#hideCard|1\n  --#whisper|self\n  --#emoteState|1\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#debug|0\n  --~|turnorder;removetoken;@{selected|token_id}\n  --@token-mod|_ids @{selected|token_id} _set statusmarkers|dead bar1_value|0\n\n}}",
            "order": -1
        },
        {
            "name": "Menu-TurnOrder-Macros",
            "description": "",
            "istokenaction": false,
            "action": "!script {{  \n  --#title|Turn Order Macros\n  --#titleCardBackground|#932729\n  --#whisper|self\n  --#emoteState|1\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#buttonbackground|#FFFFFF\n  --#buttontextcolor|#FFFFFF\n  --#buttonbordercolor|#FFFFFF\n  --#bodyFontSize|11px\n  --#debug|0\n\n  --+[c][#C43112]🎬 Initiative 🎬[/#][/c]|\n  --+|[button]➕::!&#13;#GroupInit[/button] Add selected tokens(multi)\n  --+|[button]❌::!&#13;#Kill[/button]/[button]➖::!&#13;#TurnOrder-Remove[/button] Kill/Remove Token\n\n  --+|[button]🔂::!&#13;#TurnOrder-RoundCounter[/button] Add round tracker \n  --+|[button]⏳::!&#13;#TurnOrder-AddCountdownItem[/button] / [button]🔠::!&#13;#TurnOrder-AddCustItem[/button] Add Countdown/Custom\n  \n  --+|[br]\n  --+|[button]⏬::!&#13;#GrpInit-Sort[/button]/[button]🗑️::!&#13;#GrpInit-Clear[/button] Sort / Clear Turnorder\n  --+|[button]❓::!&#13;#GrpInit-Help[/button] Show the help page\n}}",
            "order": -1
        },
        {
            "name": "GroupInit",
            "description": "",
            "istokenaction": false,
            "action": "!group-init",
            "order": -1
        },
        {
            "name": "TurnOrder-RoundCounter",
            "description": "",
            "istokenaction": false,
            "action": "!script {!script {{  \n  --#title|Round Counter\n  --#titleCardBackground|#932729\n  --#hideCard|1\n  --#whisper|self\n  --#emoteState|1\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#debug|1\n \n  --@act| +1 1 _>>>Round<<<\n  }}",
            "order": -1
        },
        {
            "name": "TurnOrder-AddCountdownItem",
            "description": "",
            "istokenaction": false,
            "action": "!script {!script {{  \n  --#title|Add Token to Token Order\n  --#titleCardBackground|#932729\n  --#hideCard|1\n  --#whisper|self\n  --#emoteState|1\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#debug|0\n \n  --@act| ?{Direction|Count Down,-1|Count Up,+1} ?{Starting Position|} _?{Name|} \n\n  }}",
            "order": -1
        },
        {
            "name": "TurnOrder-AddCustItem",
            "description": "",
            "istokenaction": false,
            "action": "!script {{  \n  --#title|Add Token to Token Order\n  --#titleCardBackground|#932729\n  --#hideCard|1\n  --#whisper|self\n  --#emoteState|1\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#debug|0\n  --~|turnorder;addcustom;?{Turnorder Item?|};?{Turnorder Value?|}\n  }}",
            "order": -1
        },
        {
            "name": "GrpInit-Sort",
            "description": "",
            "istokenaction": false,
            "action": "!group-init --sort",
            "order": -1
        },
        {
            "name": "GrpInit-Help",
            "description": "",
            "istokenaction": false,
            "action": "!group-init --help",
            "order": -1
        },
        {
            "name": "GrpInit-Clear",
            "description": "",
            "istokenaction": false,
            "action": "!group-init --clear",
            "order": -1
        },
        {
            "name": "TurnOrder-Remove",
            "description": "",
            "istokenaction": false,
            "action": "#TokenOrder-Remove\n!script {{  \n  --#title|Remove Token from Token Order\n  --#titleCardBackground|#932729\n  --#sourcetoken|@{selected|token_id}\n  --#hideCard|1\n  --#whisper|self\n  --#emoteState|1\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#debug|0\n  --~|turnorder;removetoken;@{selected|token_id}\n}}",
            "order": -1
        },
        {
            "name": "Menu-Char-Token-Info",
            "description": "",
            "istokenaction": false,
            "action": "!script {{  \n  --#title|Character & Token Info\n  --#titleCardBackground|#932729\n  --#whisper|self\n  --#emoteState|1\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#buttonbackground|#FFFFFF\n  --#buttontextcolor|#000000\n  --#buttonbordercolor|#FFFFFF\n  --#debug|0\n\n  --+[c][#C43112]Characters[/#][/c]|\n  \n  --+|[button]🔍📜::~Mule|GMSheet[/button] See Character [b]Cheat-Sheet[/b]\n  --+|[button]🔍📜::~Mule|CharDetails[/button] See Character [b]Details[/b]\n  --+|[button]✨::~Mule|Spells[/button] See Character [b]Spells[/b]\n\n  --+|[button]🔍📜::~Mule|Char-GM-Note[/button] See Character [b]GM Note[/b]\n  --+|[button]🔍📜::~Mule|Char-Bio[/button] See Character [b]BIO[/b]\n  --+|[button]🔍😁::~Mule|Char-Avatar[/button] See Character [b]Avatar[/b]\n  --+|[button]🔍📷::~Mule|Char-Image[/button] See Character [b]Image[/b]\n\n  --+|[button]➕📝::~Mule|Add-GM-CharNote[/button] Add GM Note\n  --+|[button]🧰::~Mule|gmnote-config[/button] GM Note Config Options\n\n  --+[c][#C43112] Tokens [/#][/c]|\n  --+|[button]⚙️::~Mule|Token-SetDefault[/button] Set Default Token  \n  --+|[button]🔍📜::~Mule|Token-GM-Note[/button] See Token GM Note\n  --+|[button]➕📝::~Mule|Add-GM-TokenNote[/button] Add Token GM Note\n  --+|[button]🧰::~Mule|PCM-InitToken[/button] Initialize Token for PCM\n}}\n",
            "order": -1
        },
        {
            "name": "GMSheet",
            "description": "",
            "istokenaction": false,
            "action": "!gmsheet -p",
            "order": -1
        },
        {
            "name": "CharDetails",
            "description": "",
            "istokenaction": false,
            "action": "!power {{\n --name|@{selected|character_name}\n --whisper|GM\n --format|badguys\n --emote|@{selected|character_name}\n --tokenid|@{selected|token_id}\n --npc_attribute_summary|@{selected|character_id}\n --npc_qualities_summary|@{selected|character_id}\n --npc_skills_summary|@{selected|character_id}\n --!Actions|**Available Actions**\n --npc_action_list|@{selected|character_id}\n --!Reactions|**Available Reactions**\n --npc_reaction_list|@{selected|character_id}\n --!LA|**Legendary Actions**\n --npc_legendaryaction_list|@{selected|character_id}\n --!TR|**@{selected|character_name} Traits** \n --npc_trait_list|@{selected|character_id}\n\n --leftsub|Spell Atk Bonus: @{selected|spell_attack_bonus}\n --rightsub|Save DC: @{selected|spell_save_dc}\n --spell_slots|@{selected|character_id}\n --spell_list|@{selected|character_id} \n \n }}\n",
            "order": -1
        },
        {
            "name": "Spells",
            "description": "",
            "istokenaction": false,
            "action": "!ia --menu --row#spellreport --^^spellreport#getrow{{!!t#Cantrips !!c#ffffff !!s#getrepeating{{!!c#@{selected|character_name} !!d# |  !!s#spell-cantrip !!sfxn#spellname !!op#bC !!emptyok !!sfxa#spellname !!sfxlist#spellschool School:|spellcastingtime Casting Time:|spellrange Range:|spelltarget Target:|spellcomp_materials Components:|spellduration Duration:|spelldescription Description: (fw) !!frmt#o+}}}} --^^spellreport#getrow{{!!t#Level 1 !!f#.9  !!s#getrepeating{{!!c#@{selected|character_name}  !!d# |  !!s#spell-1 !!sfxn#spellname !!op#bC !!emptyok !!sfxa#spellname !!sfxlist#spellschool School:|spellcastingtime Casting Time:|spellrange Range:|spelltarget Target:|spellcomp_materials Components:|spellduration Duration:|spelldescription Description: (fw) !!frmt#o+}}}} --^^spellreport#getrow{{!!t#Level 2 !!c#ffffff !!s#getrepeating{{!!c#@{selected|character_name}  !!d# |  !!s#spell-2 !!sfxn#spellname !!op#bC !!emptyok !!sfxa#spellname !!sfxlist#spellschool School:|spellcastingtime Casting Time:|spellrange Range:|spelltarget Target:|spellcomp_materials Components:|spellduration Duration:|spelldescription Description: (fw) !!frmt#o+}}}} --^^spellreport#getrow{{!!t#Level 3 !!f#.9   !!s#getrepeating{{!!c#@{selected|character_name}  !!d# |  !!s#spell-3 !!sfxn#spellname !!op#bC !!emptyok !!sfxa#spellname !!sfxlist#spellschool School:|spellcastingtime Casting Time:|spellrange Range:|spelltarget Target:|spellcomp_materials Components:|spellduration Duration:|spelldescription Description: (fw) !!frmt#o+}}}} --^^spellreport#getrow{{!!t#Level 4 !!c#ffffff !!s#getrepeating{{!!c#@{selected|character_name}  !!d# |  !!s#spell-4 !!sfxn#spellname !!op#bC !!emptyok !!sfxa#spellname !!sfxlist#spellschool School:|spellcastingtime Casting Time:|spellrange Range:|spelltarget Target:|spellcomp_materials Components:|spellduration Duration:|spelldescription Description: (fw) !!frmt#o+}}}} --^^spellreport#getrow{{!!t#Level 5 !!f#.9    !!s#getrepeating{{!!c#@{selected|character_name} !!d# |   !!s#spell-5 !!sfxn#spellname !!op#bC !!emptyok !!sfxa#spellname !!sfxlist#spellschool School:|spellcastingtime Casting Time:|spellrange Range:|spelltarget Target:|spellcomp_materials Components:|spellduration Duration:|spelldescription Description: (fw) !!frmt#o+}}}} --^^spellreport#getrow{{!!t#Level 6 !!c#ffffff !!s#getrepeating{{!!c#@{selected|character_name}  !!d# |  !!s#spell-6 !!sfxn#spellname !!op#bC !!emptyok !!sfxa#spellname !!sfxlist#spellschool School:|spellcastingtime Casting Time:|spellrange Range:|spelltarget Target:|spellcomp_materials Components:|spellduration Duration:|spelldescription Description: (fw) !!frmt#o+}}}} --^^spellreport#getrow{{!!t#Level 7 !!f#.9   !!s#getrepeating{{!!c#@{selected|character_name}  !!d# |  !!s#spell-7 !!sfxn#spellname !!op#bC !!emptyok !!sfxa#spellname !!sfxlist#spellschool School:|spellcastingtime Casting Time:|spellrange Range:|spelltarget Target:|spellcomp_materials Components:|spellduration Duration:|spelldescription Description: (fw) !!frmt#o+}}}} --^^spellreport#getrow{{!!t#Level 8 !!c#ffffff !!s#getrepeating{{!!c#@{selected|character_name}  !!d# |  !!s#spell-8 !!sfxn#spellname !!op#bC !!emptyok !!sfxa#spellname !!sfxlist#spellschool School:|spellcastingtime Casting Time:|spellrange Range:|spelltarget Target:|spellcomp_materials Components:|spellduration Duration:|spelldescription Description: (fw) !!frmt#o+}}}} --spellreport#getrow{{!!t#Level 9 !!f#.9    !!s#getrepeating{{!!c#@{selected|character_name}  !!d# |  !!s#spell-9 !!sfxn#spellname !!op#bC !!emptyok !!sfxa#spellname !!sfxlist#spellschool School:|spellcastingtime Casting Time:|spellrange Range:|spelltarget Target:|spellcomp_materials Components:|spellduration Duration:|spelldescription Description: (fw) !!frmt#o+}}}} --title#@{selected|character_name}",
            "order": -1
        },
        {
            "name": "Char-GM-Note",
            "description": "",
            "istokenaction": false,
            "action": "!gmnote --charnote",
            "order": -1
        },
        {
            "name": "Char-Bio",
            "description": "",
            "istokenaction": false,
            "action": "!gmnote --bio",
            "order": -1
        },
        {
            "name": "Char-Avatar",
            "description": "",
            "istokenaction": false,
            "action": "!gmnote --avatar  ?{Show Title|Yes, |No, --notitle}",
            "order": -1
        },
        {
            "name": "Char-Image",
            "description": "",
            "istokenaction": false,
            "action": "!gmnote --image ?{Show Title|Yes, |No, --notitle}",
            "order": -1
        },
        {
            "name": "Add-GM-CharNote",
            "description": "",
            "istokenaction": false,
            "action": "!add-cgmnote ?{Note}",
            "order": -1
        },
        {
            "name": "gmnote-config",
            "description": "",
            "istokenaction": false,
            "action": "!gmnote --config",
            "order": -1
        },
        {
            "name": "Token-SetDefault",
            "description": "",
            "istokenaction": false,
            "action": "!token-mod --set defaulttoken",
            "order": -1
        },
        {
            "name": "Token-GM-Note",
            "description": "",
            "istokenaction": false,
            "action": "!gmnote --token",
            "order": -1
        },
        {
            "name": "Add-GM-TokenNote",
            "description": "",
            "istokenaction": false,
            "action": "!add-gmnote ?{Note}",
            "order": -1
        },
        {
            "name": "PCM-InitToken",
            "description": "",
            "istokenaction": false,
            "action": "!pcm",
            "order": -1
        },
        {
            "name": "Menu-Utility-Macros",
            "description": "",
            "istokenaction": false,
            "action": "!script {{\n  --#title|Utility/Information Macros\n  --#titleCardBackground|#932729\n  --#whisper|self\n  --#emoteState|1\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#buttonbackground|#FFFFFF\n  --#buttontextcolor|#FFFFFF\n  --#buttonbordercolor|#FFFFFF\n  --#bodyFontSize|11px\n  --#debug|0\n\n  --+[c][#C43112] Macro Setup [/#][/c]|\n  --+|[button]🌈::~Mule|Aura[/button] Health Aura\n  --+|[button]💓::~Mule|API-HB-On[/button][button]☠️::~Mule|API-HB-Off[/button][button]🚀::~Mule|API-HB-Dev[/button] API Heartbeat On/Off/Dev\n  --+|[button]🎰::~Mule|TNN-ADD-NUMBERED[/button][button]🧰::~Mule|TNN-HELP[/button] TokenNameNbr Add/Help\n\n  --+[c][#C43112]❤️ Health Status ❤️[/#][/c]|\n  --+|[button]😴::~Mule|Rest-Short[/button]-[button]🏕️::~Mule|Rest-Long[/button] Rest Short/Long\n  --+|[button]🧪::~Mule|Healing-Potion[/button] Healing potion\n  --+|[button]❌::~Mule|Kill[/button] Kill token\n  --+|[button]🤪::~Mule|Madness[/button] Let's get crazy(Madness)\n  --+|[button]➕🤪::~Mule|Madness-Increase[/button][button]➖🤪::~Mule|Madness-Decrease[/button] Inc/Dec Madndess Lvl\n\n  --+[c][#C43112] Light-Saves-Wild Magic [/#][/c]|\n  --+|[button]🔥::~Mule|Set-Light[/button] Token Light Settings\n  --+|[button]💡::~Mule|Drop-Light-Crumb[/button][button]📜::~Mule|Report-Light-Crumbs[/button] Light Crumb Drop / Report\n  --+|[button]✔️::~Mule|GroupCheck[/button][button]🛡️::~Mule|GroupSave[/button] Group [b]Check[/b]/[b]Save[/b]\n  --+|[button]✨::~Mule|Wild-Magic-Surge[/button] Wild magic surge\n\n  --+[c][#C43112] Underdark Tables [/#][/c]|\n  --+|[button]🍄::~Mule|OOTA-Fungi-of-the-Underdark[/button][button]🗺️::~Mule|OOTA-Underdark-Travel[/button][button]🏃‍♂::~Mule|OOTA-Drow-Pursuit[/button] Fungi/Travel/Pursuit\n  --+|[button]📜::~Mule|Z-SM-Supplemental-Tables[/button] Miscellaneous\n\n}}",
            "order": -1
        },
        {
            "name": "PartyHealth",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard  {{ \n  --:___Formatting___|\n  --#title|Health Check\n  --#titleCardBackground|#932729\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#bodyFontSize|12px\n   --#whisper|gm\n\n \t--+|[t style=\"width:100%\"]\n\t\t\t[tr][td][b]Name[/b][/td][td][b]AC[/b][/td][td][b]PP[/b][/td][td][b]HP/Max[/b][/td][td][b]MadLvl[/b][/td][/tr]\n  \t\t[tr][td]Kharg[/td][td]@{Kharg|ac}[/td][td]@{Kharg|passive_wisdom}[/td][td]@{Kharg|hp} / @{Kharg|hp|max}[/td][td]@{Kharg|madness_level}[/td][/tr]\n  \t\t[tr][td]Eliza[/td][td]@{Eliza Redburrow|ac}[/td][td]@{Eliza Redburrow|passive_wisdom}[/td][td]@{Eliza Redburrow|hp} / @{Eliza Redburrow|hp|max}[/td][td]@{Eliza Redburrow|madness_level}[/td][/tr]\n  \t\t[tr][td]Jokaryn[/td][td]@{Jokaryn|ac}[/td][td]@{Jokaryn|passive_wisdom}[/td][td]@{Jokaryn|hp} / @{Jokaryn|hp|max}[/td][td]@{Jokaryn|madness_level}[/td][/tr]\n  \t\t[tr][td]Xaral[/td][td]@{Xaral Mind-drinker|ac}[/td][td]@{Xaral Mind-drinker|passive_wisdom}[/td][td]@{Xaral Mind-drinker|hp} / @{Xaral Mind-drinker|hp|max}[/td][td]@{Xaral Mind-drinker|madness_level}[/td][/tr]\n  \t\t[tr][td]Shaper[/td][td]@{Shaper|ac}[/td][td]@{Shaper|passive_wisdom}[/td][td]@{Shaper|hp} / @{Shaper|hp|max}[/td][td]@{Shaper|madness_level}[/td][/tr]\n\n\t\t\t[tr][td]======[/td][td]==[/td][td]==[/td][td]=====[/td][td]===[/td][/tr]\n  \t\t[tr][td]Prince[/td][td]@{The Prince Derendil|npc_ac}[/td][td]@{The Prince Derendil|passive_wisdom}[/td][td]@{The Prince Derendil|hp} / @{The Prince Derendil|hp|max}[/td][td]@{The Prince Derendil|madness_level}[/td][/tr]\n  \t\t[tr][td]Jimjar[/td][td]@{Jimjar|npc_ac}[/td][td]@{Jimjar|passive_wisdom}[/td][td]@{Jimjar|hp} / @{Jimjar|hp|max}[/td][td]@{Jimjar|madness_level}[/td][/tr]\n  \t\t[tr][td]Stool[/td][td]@{Stool|npc_ac}[/td][td]@{Stool|passive_wisdom}[/td][td]@{Stool|hp} / @{Stool|hp|max}[/td][td]@{Stool|madness_level}[/td][/tr]\n  \t\t[tr][td]Buppido[/td][td]@{Buppido|npc_ac}[/td][td]@{Buppido|passive_wisdom}[/td][td]@{Buppido|hp} / @{Buppido|hp|max}[/td][td]@{Buppido|madness_level}[/td][/tr]\n    \t[tr][td]Hemeth[/td][td]@{Hemeth|npc_ac}[/td][td]@{Hemeth|passive_wisdom}[/td][td]@{Hemeth|hp} / @{Hemeth|hp|max}[/td][td]@{Hemeth|madness_level}[/td][/tr]\n\t\t[/t]\n}}\n",
            "order": -1
        },
        {
            "name": "Aura",
            "description": "",
            "istokenaction": false,
            "action": "!AURA",
            "order": -1
        },
        {
            "name": "Rest-Short",
            "description": "",
            "istokenaction": false,
            "action": "!short-rest",
            "order": -1
        },
        {
            "name": "Rest-Long",
            "description": "",
            "istokenaction": false,
            "action": "!long-rest",
            "order": -1
        },
        {
            "name": "Healing-Potion",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard  {{ \n  --:___Formatting___|\n  --#title|Healing Potion\n  --#leftsub|Can be used as a bonus action\n  --#titleCardBackground|#932729\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n\n  --=PotionType|?{Healing Potion Type?|Healing,1|Greater Healing,2|Superior Healing,3|Supreme Healing,4}\n\n  --:___Conditionals___|\n  --?[$PotionType] -eq 1| >Healing\n  --?[$PotionType] -eq 2| >Greater\n  --?[$PotionType] -eq 3| >Superior\n  --?[$PotionType] -eq 4| >Supreme\n\n  --:___Apply Healing to Selected Token|\n  --:modbattr|_charid @{selected|character_id} _HP|[$Heal]\n  --@modbattr|_sel _HP|[$Heal]\n\n  --X|___Exit Macro___\n\n  --:___Functions___|\n  --:Healing|\n      --=Heal|2d4 + 2\n      --+[c]**~~Healing Potion~~|**[/c]\n      --+|You down a [b]Potion of Healing[/b] and are healed for [$Heal] hit points. \n      --<|\n\n  --:Greater| \n      --=Heal|4d4 + 4 \n      --+[c]**~~Greater Healing Potion~~|**[/c] \n      --+|You down a [b]Greater Potion of Healing[/b] and are healed for [$Heal] hit points.  \n      --<|\n\n  --:Superior|  \n      --=Heal|8d4 + 8  \n      --+[c]**~~Superior Healing Potion~~|**[/c]  \n      --+|You down a [b]Superior Potion of Healing[/b] and are healed for [$Heal] hit points.   \n      --<|\n\n  --:Supreme|  \n      --=Heal|10d4 + 20\n      --+[c]**~~Supreme Healing Potion~~|**[/c]  \n      --+|You down a [b]Supreme Potion of Healing[/b] and are healed for [$Heal] hit points.   \n      --<|\n}}",
            "order": -1
        },
        {
            "name": "Madness",
            "description": "",
            "istokenaction": false,
            "action": "!script {{  \n  --#title|Madness\n  --#titleCardBackground|#932729\n  --#whisper|self\n  --#emoteState|1\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#buttonbackground|#FFFFFF\n  --#buttontextcolor|#FFFFFF\n  --#buttonbordercolor|#FFFFFF\n  --#debug|0\n\n  --+[c][#C43112]General[/#][/c]|\n  \n  --+|[button]🤪⌛::~Mule|MadST[/button] Short Term (minutes)\n  --+|[button]🤪⌛⌛::~Mule|MadLT[/button] Long Term (hours)\n  --+|[button]🤪⌛⌛⌛::~Mule|MadInd[/button] Indefinite (until cured)\n\n  --+[c][#C43112]👿 Demon Lord 👿[/#][/c]|\n  \n  --+|[button]👿::~Mule|MadDL_Bap[/button] Baphomet\n  --+|[button]👿::~Mule|MadDL_Dem[/button] Demogorgon\n  --+|[button]👿::~Mule|MadDL_Fra[/button] Fraz-Urbluu\n  --+|[button]👿::~Mule|MadDL_Gra[/button] Grazzt\n  --+|[button]👿::~Mule|MadDL_Jui[/button] Juiblex\n  --+|[button]👿::~Mule|MadDL_Orc[/button] Orcas\n  --+|[button]👿::~Mule|MadDL_Yee[/button] Yeenoghu\n  --+|[button]👿::~Mule|MadDL_Zug[/button] Zuggtmoy\n\n}}\n",
            "order": -1
        },
        {
            "name": "MadST",
            "description": "",
            "istokenaction": false,
            "action": "MadST\n!scriptcard {{  \n  --#title|Short Term Madness\n  --#titleCardBackground|#932729\n  --=MadTime|1d10\n  --#leftsub|Lasts [$MadTime] minutes\n  --#whisper|gm, self\n  --#emoteState|1\n\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n  --#debug|0\n\n  --=rMadRoll|1d100\n  --?[$rMadRoll.Total] -le 20|MAD1 \n  --?[$rMadRoll.Total] -le 30|MAD2 \n  --?[$rMadRoll.Total] -le 40|MAD3 \n  --?[$rMadRoll.Total] -le 50|MAD4 \n  --?[$rMadRoll.Total] -le 60|MAD5 \n  --?[$rMadRoll.Total] -le 70|MAD6 \n  --?[$rMadRoll.Total] -le 75|MAD7 \n  --?[$rMadRoll.Total] -le 80|MAD8 \n  --?[$rMadRoll.Total] -le 90|MAD9|MAD10\n  \n  --:MAD1| --&sMadness|[b][#1212C4]@{selected|token_name}[/#][/b] retreats into his or her mind and becomes [b][#C43112]paralyzed[/#][/b]. The effect ends if [b][#1212C4]@{selected|token_name}[/#][/b] takes any damage. --^SHOWMADNESS|\n  --:MAD2| --&sMadness|[b][#1212C4]@{selected|token_name}[/#][/b] becomes incapacitated and spends the duration screaming, laughing, or weeping. --^SHOWMADNESS|\n  --:MAD3| --&sMadness|[b][#1212C4]@{selected|token_name}[/#][/b] becomes [b][#C43112]frightened[/#][/b] and must use his or her action and movement each round to flee from the source of the fear. --^SHOWMADNESS|\n  --:MAD4| --&sMadness|[b][#1212C4]@{selected|token_name}[/#][/b] begins babbling and is incapable of normal speech or spellcasting. --^SHOWMADNESS|\n  --:MAD5| --&sMadness|[b][#1212C4]@{selected|token_name}[/#][/b] must use his or her action each round to attack the nearest creature. --^SHOWMADNESS|\n  --:MAD6| --&sMadness|[b][#1212C4]@{selected|token_name}[/#][/b] experiences vivid hallucinations and has [b][#C43112]disadvantage[/#][/b] on ability checks. --^SHOWMADNESS|\n  --:MAD7| --&sMadness|[b][#1212C4]@{selected|token_name}[/#][/b] does whatever anyone tells him or her to do that isn’t obviously self-destructive. --^SHOWMADNESS|\n  --:MAD8| --&sMadness|[b][#1212C4]@{selected|token_name}[/#][/b] experiences an overpowering urge to eat something strange such as dirt, slime, or offal. --^SHOWMADNESS|\n  --:MAD9| --&sMadness|[b][#1212C4]@{selected|token_name}[/#][/b] is [b][#C43112]stunned[/#][/b]. --^SHOWMADNESS|\n  --:MAD10| --&sMadness|[b][#1212C4]@{selected|token_name}[/#][/b] falls [b][#C43112]unconscious[/#][/b]. --^SHOWMADNESS|\n\n  --:SHOWMADNESS|\n\n  --+|[&sMadness]\n\n  --@forselected+|add-cgmnote Short Term Madness([$rMadTime] minutes): [&sMadness]\n  --@token-mod| _set statusmarkers|37_cursed::328637:1\n\n}}",
            "order": -1
        },
        {
            "name": "MadLT",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{  \n\n  --#title|Long Term Madness\n  --#titleCardBackground|#932729\n  --=rMadTime|1d10 * 10\n  --#leftsub|Duration: [$rMadTime] hours\n\n  --#whisper|gm, self\n  --#emoteState|1\n\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n  --#debug|0\n\n  --=rMadRoll|1d100\n  --?[$rMadRoll.Total] -le 10|MAD1\n  --?[$rMadRoll.Total] -le 20|MAD2\n  --?[$rMadRoll.Total] -le 30|MAD3\n  --?[$rMadRoll.Total] -le 40|MAD4\n  --?[$rMadRoll.Total] -le 45|MAD5\n  --?[$rMadRoll.Total] -le 55|MAD6\n  --?[$rMadRoll.Total] -le 65|MAD7\n  --?[$rMadRoll.Total] -le 75|MAD8\n  --?[$rMadRoll.Total] -le 85|MAD9\n  --?[$rMadRoll.Total] -le 90|MAD10\n  --?[$rMadRoll.Total] -le 95|MAD11|MAD12\n\n  --:MAD1| --&rMadness|[b][#1212C4]@{selected|token_name}[/#][/b] feels compelled to repeat a specific activity over and over, such as washing hands, touching things, praying, or counting coins. --^SHOWMADNESS|\n  --:MAD2| --&rMadness|[b][#1212C4]@{selected|token_name}[/#][/b] experiences vivid hallucinations and has disadvantage on ability checks. --^SHOWMADNESS|\n  --:MAD3| --&rMadness|[b][#1212C4]@{selected|token_name}[/#][/b] suffers extreme paranoia. [b][#1212C4]@{selected|token_name}[/#][/b] has disadvantage on Wisdom and Charisma checks. --^SHOWMADNESS|\n  --:MAD4| --&rMadness|[b][#1212C4]@{selected|token_name}[/#][/b] regards something (usually the source of madness) with intense revulsion, as if affected by the antipathy effect of the antipathy/sympathy spell. --^SHOWMADNESS|\n  --:MAD5| --&rMadness|[b][#1212C4]@{selected|token_name}[/#][/b] experiences a powerful delusion. Choose a potion. [b][#1212C4]@{selected|token_name}[/#][/b] imagines that he or she is under its effects. --^SHOWMADNESS|\n  --:MAD6| --&rMadness|[b][#1212C4]@{selected|token_name}[/#][/b] becomes attached to a “lucky charm,” such as a person or an object, and has disadvantage on attack rolls, ability checks, and saving throws while more than 30 feet from it. --^SHOWMADNESS|\n  --:MAD7| --&rMadness|[b][#1212C4]@{selected|token_name}[/#][/b] is blinded (25%) or deafened (75%). --^SHOWMADNESS|\n  --:MAD8| --&rMadness|[b][#1212C4]@{selected|token_name}[/#][/b] experiences uncontrollable tremors or tics, which impose disadvantage on attack rolls, ability checks, and saving throws that involve Strength or Dexterity. --^SHOWMADNESS|\n  --:MAD9| --&rMadness|[b][#1212C4]@{selected|token_name}[/#][/b] suffers from partial amnesia. [b][#1212C4]@{selected|token_name}[/#][/b] knows who he or she is and retains racial traits and class features, but doesn’t recognize other people or remember anything that happened before the madness took effect. --^SHOWMADNESS|\n  --:MAD10| --&rMadness|Whenever [b][#1212C4]@{selected|token_name}[/#][/b] takes damage, he or she must succeed on a DC 15 Wisdom saving throw or be affected as though he or she failed a saving throw against the confusion spell. The confusion effect lasts for 1 minute.. --^SHOWMADNESS|\n  --:MAD11| --&rMadness|[b][#1212C4]@{selected|token_name}[/#][/b] loses the ability to speak. --^SHOWMADNESS|\n  --:MAD12| --&rMadness|[b][#1212C4]@{selected|token_name}[/#][/b] falls [b]unconscious[/b]. No amount of jostling or damage can wake [b][#1212C4]@{selected|token_name}[/#][/b]. --^SHOWMADNESS|\n\n  --:SHOWMADNESS|\n\n  --+|[&rMadness]\n\n  --@forselected+|add-cgmnote Long Term Madness([$MadTime] hours): [&rMadness]\n  --@mark| @{selected|token_id} mad\n}}",
            "order": -1
        },
        {
            "name": "MadInd",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{  \n  --#title|Indefinite Madness\n  --#titleCardBackground|#932729\n  --#leftsub|Duration: Until cured\n  --#whisper|gm, self\n  --#emoteState|1\n\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n  --#debug|0\n  --=rMadRoll|1d100\n\n  --?[$rMadRoll.Total] -le 15|MAD1\n  --?[$rMadRoll.Total] -le 25|MAD2\n  --?[$rMadRoll.Total] -le 30|MAD3\n  --?[$rMadRoll.Total] -le 35|MAD4\n  --?[$rMadRoll.Total] -le 45|MAD5\n  --?[$rMadRoll.Total] -le 50|MAD6\n  --?[$rMadRoll.Total] -le 55|MAD7\n  --?[$rMadRoll.Total] -le 70|MAD8\n  --?[$rMadRoll.Total] -le 80|MAD9\n  --?[$rMadRoll.Total] -le 85|MAD10\n  --?[$rMadRoll.Total] -le 95|MAD11|MAD12\n\n  --:MAD1| --&rMadness|“Being drunk keeps me sane.” --^SHOWMADNESS|\n  --:MAD2| --&rMadness|“I keep whatever I find.” --^SHOWMADNESS|\n  --:MAD3| --&rMadness|“I try to become more like someone else I know — adopting his or her style of dress, mannerisms, and name.” --^SHOWMADNESS|\n  --:MAD4| --&rMadness|“I must bend the truth, exaggerate, or outright lie to be interesting to other people.” --^SHOWMADNESS|\n  --:MAD5| --&rMadness|“Achieving my goal is the only thing of interest to me, and I’ll ignore everything else to pursue it.” --^SHOWMADNESS|\n  --:MAD6| --&rMadness|“I find it hard to care about anything that goes on around me.” --^SHOWMADNESS|\n  --:MAD7| --&rMadness|“I don’t like the way people judge me all the time.” --^SHOWMADNESS|\n  --:MAD8| --&rMadness|“I am the smartest, wisest, strongest, fastest, and most beautiful person I know.” --^SHOWMADNESS|\n  --:MAD9| --&rMadness|“I am convinced that powerful enemies are hunting me, and their agents are everywhere I go. I am sure they’re watching me all the time.” --^SHOWMADNESS|\n  --:MAD10| --&rMadness|“There’s only one person I can trust. And only I can see this special friend.” --^SHOWMADNESS|\n  --:MAD11| --&rMadness|“I can’t take anything seriously. The more serious the situation, the funnier I find it.” --^SHOWMADNESS|\n  --:MAD12| --&rMadness|“I’ve discovered that I really like killing people.” --^SHOWMADNESS|\n\n  --:SHOWMADNESS|\n  --+|[b][#1212C4]@{selected|token_name}[/#][/b] - [&rMadness]\n  --@forselected+|add-cgmnote Indefinite Madness: [&rMadness]\n  --@mark| @{selected|token_id} mad\n}}",
            "order": -1
        },
        {
            "name": "MadDL_Bap",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{  \n  --&DL|Baphomet\n  --#title|[&DL] Induced Madness\n  --#titleCardBackground|#932729\n  --#leftsub|Duration: Until cured\n  --#whisper|gm, self\n  --#emoteState|1\n\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n  --#debug|1\n\n  --=rMadRoll|1d100\n  --?[$rMadRoll.Total] -le 20|MAD1\n  --?[$rMadRoll.Total] -le 40|MAD2\n  --?[$rMadRoll.Total] -le 60|MAD3\n  --?[$rMadRoll.Total] -le 80|MAD4|MAD5\n\n  --+[c][#C43112]Something went wrong!!![/#][/c]|\n  --X|\n\n  --:MAD1| --&rMadness|“My anger consumes me. I can’t be reasoned with when my rage has been stoked.” --^SHOWMADNESS|\n  --:MAD2| --&rMadness|“I degenerate into beastly behavior, seeming more like a wild animal than a thinking being.” --^SHOWMADNESS|\n  --:MAD3| --&rMadness|“The world is my hunting ground. Others are my prey.” --^SHOWMADNESS|\n  --:MAD4| --&rMadness|“Hate comes easily to me and explodes into rage.” --^SHOWMADNESS|\n  --:MAD5| --&rMadness|“I see those who oppose me not as people, but as beasts meant to be preyed upon.” --^SHOWMADNESS|\n\n  --:SHOWMADNESS|\n  --+|[b][#1212C4]@{selected|token_name}[/#][/b] - [&rMadness]\n  --@forselected+|add-cgmnote [&DL] the Demon Lord Madness(Indefinite): [&rMadness]\n  --@mark| @{selected|token_id} mad\n}}",
            "order": -1
        },
        {
            "name": "MadDL_Dem",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{  \n\n  --&DL|Demogorgon\n  --#title|[&DL] Induced Madness\n  --#titleCardBackground|#932729\n  --#leftsub|Duration: Until cured\n  --#whisper|gm, self\n  --#emoteState|1\n\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n  --#debug|1\n\n  --=rMadRoll|1d100\n  --?[$rMadRoll.Total] -le 20|MAD1\n  --?[$rMadRoll.Total] -le 40|MAD2\n  --?[$rMadRoll.Total] -le 60|MAD3\n  --?[$rMadRoll.Total] -le 80|MAD4|MAD5\n\n  --+[c][#C43112]Something went wrong!!![/#][/c]|\n  --X|\n\n  --:MAD1| --&rMadness|“Someone is plotting to kill me. I need to strike first to stop them!” --^SHOWMADNESS|\n  --:MAD2| --&rMadness|“There is only one solution to my problems: kill them all!” --^SHOWMADNESS|\n  --:MAD3| --&rMadness|“There is more than one mind inside my head.” --^SHOWMADNESS|\n  --:MAD4| --&rMadness|“If you don’t agree with me, I’ll beat you into submission to get my way.” --^SHOWMADNESS|\n  --:MAD5| --&rMadness|“I can’t allow anyone to touch anything that belongs to me. They might try to take it away from me!” --^SHOWMADNESS|\n\n  --:SHOWMADNESS|\n  --+|[b][#1212C4]@{selected|token_name}[/#][/b] - [&rMadness]\n  --@forselected+|add-cgmnote [&DL] the Demon Lord Madness(Indefinite): [&rMadness]\n  --@mark| @{selected|token_id} mad\n}}\n",
            "order": -1
        },
        {
            "name": "MadDL_Fra",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{  \n\n  --&DL|Fraz-Urbluu\n  --#title|[&DL] Induced Madness\n  --#titleCardBackground|#932729\n  --#leftsub|Duration: Until cured\n\n  --#whisper|gm, self\n  --#emoteState|1\n\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n  --#debug|0\n\n  --=rMadRoll|1d100\n  --#title|Fraz-Urbluu Madness\n  --?[$rMadRoll.Total] -le 20|MAD1\n  --?[$rMadRoll.Total] -le 40|MAD2\n  --?[$rMadRoll.Total] -le 60|MAD3\n  --?[$rMadRoll.Total] -le 80|MAD4|MAD5\n\n  --:MAD1| --&rMadness|“I never let anyone know the truth about my actions or intentions, even if doing so would be beneficial to me.” --^SHOWMADNESS|\n  --:MAD2| --&rMadness|“I have intermittent hallucinations and fits of catatonia.” --^SHOWMADNESS|\n  --:MAD3| --&rMadness|“My mind wanders as I have elaborate fantasies that have no bearing on reality. When I return my focus to the world, I have a hard time remembering that it was just a daydream.” --^SHOWMADNESS|\n  --:MAD4| --&rMadness|“I convince myself that things are true, even in the face of overwhelming evidence to the contrary.” --^SHOWMADNESS|\n  --:MAD5| --&rMadness|“My perception of reality doesn’t match anyone else’s. It makes me prone to violent delusions that make no sense to anyone else.” --^SHOWMADNESS|\n\n  --:SHOWMADNESS|\n  --+|[b][#1212C4]@{selected|token_name}[/#][/b] - [&rMadness]\n  --@forselected+|add-cgmnote [&DL] the Demon Lord Madness(Indefinite): [&rMadness]\n  --@mark| @{selected|token_id} mad\n}}\n",
            "order": -1
        },
        {
            "name": "MadDL_Gra",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{  \n\n  --&DL|Grazzt\n  --#title|[&DL] Induced Madness\n  --#titleCardBackground|#932729\n  --#leftsub|Duration: Until cured\n\n  --#whisper|gm, self\n  --#emoteState|1\n\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n  --#debug|0\n\n  --=rMadRoll|1d100\n  --?[$rMadRoll.Total] -le 20|MAD1\n  --?[$rMadRoll.Total] -le 40|MAD2\n  --?[$rMadRoll.Total] -le 60|MAD3\n  --?[$rMadRoll.Total] -le 80|MAD4\n  --?[$rMadRoll.Total] -le 90|MAD5|MAD6\n\n  --:MAD1| --&rMadness|“There is nothing in the world more important than me and my desires.” --^SHOWMADNESS|\n  --:MAD2| --&rMadness|“Anyone who doesn’t do exactly what I say doesn’t deserve to live.” --^SHOWMADNESS|\n  --:MAD3| --&rMadness|“Mine is the path of redemption. Anyone who says otherwise is intentionally misleading you.” --^SHOWMADNESS|\n  --:MAD4| --&rMadness|“I will not rest until I have made someone else mine, and doing so is more important to me than my own life—or the lives of others.” --^SHOWMADNESS|\n  --:MAD5| --&rMadness|“My own pleasure is of paramount importance. Everything else, including social graces, is a triviality.” --^SHOWMADNESS|\n  --:MAD6| --&rMadness|“Anything that can bring me happiness should be enjoyed immediately. There is no point to saving anything pleasurable for later.” --^SHOWMADNESS|\n\n  --:SHOWMADNESS|\n  --+|[b][#1212C4]@{selected|token_name}[/#][/b] - [&rMadness]\n  --@forselected+|add-cgmnote [&DL] the Demon Lord Madness(Indefinite): [&rMadness]\n  --@mark| @{selected|token_id} mad\n}}",
            "order": -1
        },
        {
            "name": "MadDL_Jui",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{  \n\n  --&DL|Juiblex\n  --#title|[&DL] Induced Madness\n  --#titleCardBackground|#932729\n  --#leftsub|Duration: Until cured\n  --#whisper|gm, self\n  --#emoteState|1\n\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n  --#debug|0\n\n  --=rMadRoll|1d100\n\n  --?[$rMadRoll.Total] -le 20|MAD1\n  --?[$rMadRoll.Total] -le 40|MAD2\n  --?[$rMadRoll.Total] -le 60|MAD3\n  --?[$rMadRoll.Total] -le 80|MAD4|MAD5\n\n  --:MAD1| --&rMadness|“I must consume everything I can!” --^SHOWMADNESS|\n  --:MAD2| --&rMadness|“I refuse to part with any of my possessions.” --^SHOWMADNESS|\n  --:MAD3| --&rMadness|“I’ll do everything I can to get others to eat and drink beyond their normal limits.” --^SHOWMADNESS|\n  --:MAD4| --&rMadness|“I must possess as many material goods as I can.” --^SHOWMADNESS|\n  --:MAD5| --&rMadness|“My personality is irrelevant. I am defined by what I consume.” --^SHOWMADNESS|\n\n  --:SHOWMADNESS|\n  --+|[b][#1212C4]@{selected|token_name}[/#][/b] - [&rMadness]\n  --@forselected+|add-cgmnote [&DL] the Demon Lord Madness(Indefinite): [&rMadness]\n  --@mark| @{selected|token_id} mad\n}}",
            "order": -1
        },
        {
            "name": "MadDL_Orc",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{  \n\n  --&DL|Orcas\n  --#title|[&DL] Induced Madness\n  --#titleCardBackground|#932729\n  --#leftsub|Duration: Until cured\n  --#whisper|gm, self\n  --#emoteState|1\n\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n  --#debug|0\n\n  --=rMadRoll|1d100\n  --?[$rMadRoll.Total] -le 20|MAD1\n  --?[$rMadRoll.Total] -le 40|MAD2\n  --?[$rMadRoll.Total] -le 60|MAD3\n  --?[$rMadRoll.Total] -le 80|MAD4|MAD5\n\n  --:MAD1| --&rMadness|“I often become withdrawn and moody, dwelling on the insufferable state of life.” --^SHOWMADNESS|\n  --:MAD2| --&rMadness|“I am compelled to make the weak suffer.” --^SHOWMADNESS|\n  --:MAD3| --&rMadness|“I have no compunction against tampering with the dead in my search to better understand death.” --^SHOWMADNESS|\n  --:MAD4| --&rMadness|“I want to achieve the everlasting existence of undeath.” --^SHOWMADNESS|\n  --:MAD5| --&rMadness|“I am awash in the awareness of life’s futility.” --^SHOWMADNESS|\n\n  --:SHOWMADNESS|\n  --+|[b][#1212C4]@{selected|token_name}[/#][/b] - [&rMadness]\n  --@forselected+|add-cgmnote [&DL] the Demon Lord Madness(Indefinite): [&rMadness]\n  --@mark| @{selected|token_id} mad  \n}}",
            "order": -1
        },
        {
            "name": "MadDL_Yee",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{  \n\n  --&DL|Yeenoghu\n  --#title|[&DL] Induced Madness\n  --#titleCardBackground|#932729\n  --#leftsub|Duration: Until cured\n  --#whisper|gm, self\n  --#emoteState|1\n\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n  --#debug|0\n\n  --=rMadRoll|1d100\n  --?[$rMadRoll.Total] -le 20|MAD1\n  --?[$rMadRoll.Total] -le 40|MAD2\n  --?[$rMadRoll.Total] -le 60|MAD3\n  --?[$rMadRoll.Total] -le 80|MAD4|DLBYMad5\n\n  --:MAD1| --&rMadness|“I get caught up in the flow of anger, and try to stoke others around me into forming an angry mob.” --^SHOWMADNESS|\n  --:MAD2| --&rMadness|“The flesh of other intelligent creatures is delicious!” --^SHOWMADNESS|\n  --:MAD3| --&rMadness|“I rail against the laws and customs of civilization, attempting to return to a more primitive time.” --^SHOWMADNESS|\n  --:MAD4| --&rMadness|“I hunger for the deaths of others, and am constantly starting fights in the hope of seeing bloodshed.” --^SHOWMADNESS|\n  --:MAD5| --&rMadness|“I keep trophies from the bodies I have slain, turning them into adornments.” --^SHOWMADNESS|\n\n  --:SHOWMADNESS|\n  --+|[b][#1212C4]@{selected|token_name}[/#][/b] - [&rMadness]\n  --@forselected+|add-cgmnote [&DL] the Demon Lord Madness(Indefinite): [&rMadness]\n  --@mark| @{selected|token_id} mad\n}}\n",
            "order": -1
        },
        {
            "name": "MadDL_Zug",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{\n\n  --&DL|Zuggtmoy\n  --#title|[&DL] Induced Madness\n  --#titleCardBackground|#932729\n  --#leftsub|Duration: Until cured\n  --#whisper|gm, self\n  --#emoteState|1\n\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n  --#debug|0\n  --=rMadRoll|1d100\n\n  --?[$rMadRoll.Total] -le 20|MAD1\n  --?[$rMadRoll.Total] -le 40|MAD2\n  --?[$rMadRoll.Total] -le 60|MAD3\n  --?[$rMadRoll.Total] -le 80|MAD4|MAD1\n\n  --:MAD1| --&rMadness|“I see visions in the world around me that others do not.” --^SHOWMADNESS|\n  --:MAD2|| --&rMadness|“I periodically slip into a catatonic state, staring off into the distance for long stretches at a time.” --^SHOWMADNESS|\n  --:MAD3|| --&rMadness|“I see an altered version of reality, with my mind convincing itself that things are true even in the face of overwhelming evidence to the contrary.” --^SHOWMADNESS|\n  --:MAD4| --&rMadness|“My mind is slipping away, and my intelligence seems to wax and wane.” --^SHOWMADNESS|\n  --:MAD5| --&rMadness|“I am constantly scratching at unseen fungal infections.” --^SHOWMADNESS|\n\n  --:SHOWMADNESS|\n  --+|[b][#1212C4]@{selected|token_name}[/#][/b] - [&rMadness]\n  --@forselected+|add-cgmnote [&DL] the Demon Lord Madness(Indefinite): [&rMadness]\n  --@mark| @{selected|token_id} mad\n}}",
            "order": -1
        },
        {
            "name": "Madness-Increase",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{ \n  --:___Formatting___|\n  --#title|Madness Check\n  --#titleCardBackground|#932729\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n  --#bodyFontSize|12px\n  --#sourceToken|@{selected|token_id}\n  --#debug|1\n  --#hideCard|1\n  --#whisper|gm\n\n  --~|array;define;aMadLvl;0;1.1;1.2;1.3;2.1;2.2;2.3;3.1;3.2;3.3;4.1;4.2;4.3;5.1;5.2;5.3;6.1;6.2;6.3\n  --~tmp|array;stringify;aMadLvl\n  --+Debug|MadLvl Array: [&tmp]\n\n  --/|Get current Madness_Level\n  --&MadLvl|[*S:Madness_Level]\n  --+Debug|Cur MadLvl: [&MadLvl]\n\n  --/|Find position in ML array\n  --~z|array;getfirst;aMadLvl\n\n  --:LOOP|\n  --+Debug|Looping: [&z] \n  --?[&z] -eq [&MadLvl]|FOUND\n  --~z|array;getnext;aMadLvl\n  --?[&z] -ne ArrayError|LOOP\n\n  --:NOTFOUND|\n  --@setattr| _charid [*S:character_id] _madness_level|0\n  --X| Early Exit\n\n  --:FOUND|\n  --~z|array;getnext;aMadLvl\n  --?[&z] -eq ArrayError|NOTFOUND\n\n  --/|Write Madness Level back\n  --@setattr| _charid [*S:character_id] _madness_level|[&z]\n\n  --/|Output Note of change to GM\n  }}\n\n",
            "order": -1
        },
        {
            "name": "Madness-Decrease",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{ \n  --:___Formatting___|\n  --#title|Madness Check\n  --#titleCardBackground|#932729\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n  --#bodyFontSize|12px\n  --#sourceToken|@{selected|token_id}\n  --#debug|1\n  --#hideCard|1\n  --#whisper|gm\n\n  --~|array;define;aMadLvl;0;1.1;1.2;1.3;2.1;2.2;2.3;3.1;3.2;3.3;4.1;4.2;4.3;5.1;5.2;5.3;6.1;6.2;6.3\n  --~tmp|array;stringify;aMadLvl\n  --+Debug|MadLvl Array: [&tmp]\n\n  --/|Get current Madness_Level\n  --&MadLvl|[*S:Madness_Level]\n  --+Debug|Cur MadLvl: [&MadLvl]\n\n  --/|Find position in ML array\n  --~z|array;getfirst;aMadLvl\n\n  --:LOOP|\n  --+Debug|Looping: [&z] \n  --?[&z] -eq [&MadLvl]|FOUND\n  --~z|array;getnext;aMadLvl\n  --?[&z] -ne ArrayError|LOOP\n\n  --:NOTFOUND|\n  --@setattr| _charid [*S:character_id] _madness_level|0\n  --X| Early Exit\n\n  --:FOUND|\n  --~z|array;getprevious;aMadLvl\n  --?[&z] -eq ArrayError|NOTFOUND\n\n  --/|Write Madness Level back\n  --@setattr| _charid [*S:character_id] _madness_level|[&z]\n\n  --/|Output Note of change to GM\n  }}",
            "order": -1
        },
        {
            "name": "Set-Light",
            "description": "",
            "istokenaction": false,
            "action": "!token-mod ?{Vision|Reset , --off has_bright_light_vision  has_night_vision emits_bright_light emits_low_light has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --set night_vision_distance#0 bright_light_distance#0 low_light_distance#0 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nNormal, --off has_night_vision emits_bright_light emits_low_light has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on has_bright_light_vision   --set night_vision_distance#0 bright_light_distance#0 low_light_distance#0 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nDark Vision (60'), --off emits_bright_light emits_low_light has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on has_bright_light_vision  has_night_vision  --set night_vision_distance#60 bright_light_distance#0 low_light_distance#0 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nDark Vision (90'), --off emits_bright_light emits_low_light has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on has_bright_light_vision  has_night_vision  --set night_vision_distance#90 bright_light_distance#0 low_light_distance#0 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nDark Vision (120'), --off emits_bright_light emits_low_light has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on has_bright_light_vision  has_night_vision  --set night_vision_distance#120 bright_light_distance#0 low_light_distance#0 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nCandle (Carried), --off has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on has_bright_light_vision  emits_bright_light emits_low_light  --set night_vision_distance#0 bright_light_distance#5 low_light_distance#10 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nCandle (Stationary), --off has_bright_light_vision  has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on emits_bright_light emits_low_light  --set night_vision_distance#0 bright_light_distance#5 low_light_distance#10 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nTorch/Light (Carried), --off has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on has_bright_light_vision  emits_bright_light emits_low_light  --set night_vision_distance#0 bright_light_distance#20 low_light_distance#20 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nTorch/Light (Stationary), --off has_bright_light_vision  has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on emits_bright_light emits_low_light  --set night_vision_distance#0 bright_light_distance#20 low_light_distance#20 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nHooded Lantern (Carried), --off has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on has_bright_light_vision  emits_bright_light emits_low_light  --set night_vision_distance#0 bright_light_distance#30 low_light_distance#30 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nHooded Lantern (Covered), --off has_bright_light_vision  has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on emits_bright_light emits_low_light  --set night_vision_distance#0 bright_light_distance#0 low_light_distance#5 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nHooded Lantern (Stationary), --off has_bright_light_vision  has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on emits_bright_light emits_low_light  --set night_vision_distance#0 bright_light_distance#30 low_light_distance#30 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nBullseye Lantern, --off has_night_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on has_bright_light_vision  emits_bright_light emits_low_light has_limit_field_of_vision  --set night_vision_distance#0 bright_light_distance#60 low_light_distance#60 limit_field_of_vision_center#60 limit_field_of_vision_total#60 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nFlashlight, --off has_night_vision has_limit_field_of_night_vision has_directional_dim_light  --on has_bright_light_vision  emits_bright_light emits_low_light has_limit_field_of_vision has_directional_bright_light  --set night_vision_distance#0 bright_light_distance#100 low_light_distance#100 limit_field_of_vision_center#60 limit_field_of_vision_total#20 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nCamp Fire, --off has_bright_light_vision  has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on emits_bright_light emits_low_light  --set night_vision_distance#0 bright_light_distance#70 low_light_distance#70 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nBon Fire, --off has_bright_light_vision  has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on emits_bright_light emits_low_light  --set night_vision_distance#0 bright_light_distance#100 low_light_distance#100 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nFez (Soft Light), --off has_bright_light_vision  has_night_vision emits_bright_light has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on emits_low_light  --set night_vision_distance#0 bright_light_distance#0 low_light_distance#20 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nStreet Light, --off has_bright_light_vision  has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  --on emits_bright_light emits_low_light  --set night_vision_distance#0 bright_light_distance#50 low_light_distance#25 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 |\nSpot Light, --off has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision  --on has_bright_light_vision  emits_bright_light emits_low_light has_directional_bright_light has_directional_dim_light  --set night_vision_distance#0 bright_light_distance#30 low_light_distance#30 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#90 directional_bright_light_total#20 directional_dim_light_center#90 directional_dim_light_total#30 |\n}",
            "order": -1
        },
        {
            "name": "Report-Light-Crumbs",
            "description": "",
            "istokenaction": false,
            "action": "!report+t|bar3_max|LC  --t|bar3_value|Loc t|bright_light_distance|BL_Dist t|low_light_distance|LL_Dist  ---vision",
            "order": -1
        },
        {
            "name": "GroupCheck",
            "description": "",
            "istokenaction": false,
            "action": "!group-check {{\n--show\n--?{Ability Check|Strength,Strength Check|Dexterity,Dexterity Check|Constitution,Constitution Check|Intelligence,Intelligence Check|Wisdom,Wisdom Check|Charisma,Charisma Check|Acrobatics (Dex),Acrobatics|Animal Handling (Wis),Animal Handling|Arcana (Int),Arcana|Athletics (Str),Athletics|Deception (Cha),Deception|History (Int),History|Insight (Wis),Insight|Intimidation (Cha),Intimidation|Investigation (Int),Investigation|Medicine (Wis),Medicine|Nature (Int),Nature|Perception (Wis),Perception|Performance (Cha),Performance|Persuasion (Cha),Persuasion|Religion (Int),Religion|Sleight of Hand (Dex),Sleight of Hand|Stealth (Dex),Stealth|Survival (Wis),Survival}\n\n--ro ?{Roll Type|Normal,roll1|Advantage,adv|Disadvantage,dis}\n--?{Whisper|Yes,whisper|No,public}\n --process\n --showformula\n --showaverage\n}}\n",
            "order": -1
        },
        {
            "name": "GroupSave",
            "description": "",
            "istokenaction": false,
            "action": "!group-check {{\n--show\n--?{Ability Save|Strength,Strength Save|Dexterity,Dexterity Save|Constitution,Constitution Save|Intelligence,Intelligence Save|Wisdom,Wisdom Save|Charisma,Charisma Save}\n--ro ?{Roll Type|Normal,roll1|Advantage,adv|Disadvantage,dis}\n--?{Whisper|Yes,whisper|No,public}\n --showformula\n --hidepicture\n --process\n --showaverage\n}}\n",
            "order": -1
        },
        {
            "name": "Wild-Magic-Surge",
            "description": "",
            "istokenaction": false,
            "action": "/em &{template:npcaction} {{rname= Wild Magic Surge }} {{name= Supplemental Materials }} {{description= [[1t[SM-Wild-Magic-Surge-Table]]] For more information, see ***[W⁠ild Magic Surge](http://journal.roll20.net/handout/-LsaW-zom2nRdlxoKXY0)***. }}",
            "order": -1
        },
        {
            "name": "OOTA-Fungi-of-the-Underdark",
            "description": "",
            "istokenaction": false,
            "action": "/w gm &{template:npcaction} {{rname= Fungi of the Underdark }} {{name= Chapter 2: Into Darkness }} {{description= ?{Choose|Barrelstalk,A barrelstalk is a large, cask-shaped fungus that can be tapped and drained of the fresh water stored within it. This barrelstalk contains [[1d4+4]] gallons of water and yields [[1d6+4]] pounds of food.|Bluecap,A bluecap is inedible, but its spores can be ground to make a nutritious, bland flour. One loaf is equivalent to [[1]] pound of food.|Fire Lichen,Fire lichen can be ground and fermented into a hot, spicy paste, which is spread on sporebread or added to soups or stews to flavor them. Duergar also ferment fire lichen into a fiercely hot liquor.|Ripplebark,Ripplebark is a shelf-like fungus that resembles a mass of rotting flesh but is edible. Though it can be eaten raw, it tastes better roasted. This sheet of ripplebark yields [[1d4+6]] pounds of food.|Trillimac,A trillimac is a mushroom that grows to a height of four to five feet, and has a broad gray-green cap and a light gray stalk. The stalk can be cleaned, soaked in water for an hour, then dried to make a palatable food akin to bread. This trillimac stalk provides [[1d6+4]] pounds of food.|Waterorb,A waterorb is a bulbous fungus that grows in shallow water. A mature waterorb can be squeezed like a sponge, yielding [[1]] gallon of drinkable water and [[1]] pound of edible (if chewy and somewhat tasteless) food.|Zurkhwood,Zurkhwood is a massive mushroom that can reach a height of thirty to forty feet. This one's large grain-like spores are edible and nutritionally equivalent to [[1d4+4]] pounds of food. Zurkhwood is also used to make furniture, containers, bridges, and rafts, among other things.|Nightlight,A nightlight is a tall and tube-shaped bioluminescent mushroom that grows to a height of [[1d6+4]] feet and emits bright light in a 15-foot radius and dim light for an additional 15 feet. A nightlight that is uprooted or destroyed goes dark after [[1]] round. If a living nightlight is touched, either by a creature or an object, its light goes out until it is touched again.|Nilhogg's Nose,A Nilhogg’s nose is a small mushroom that grants any creature that eats it advantage on Wisdom (Perception) checks based on smell for [[1d4]] hours. However, the creature suffers disadvantage on saving throws against effects based on smell for the same amount of time.|Ormu,A bioluminescent green moss that grows in warm and damp areas, ormu is particularly common near steam tunnels and vents. It sheds dim light in a 5-foot radius, and can be harvested, dried, and made into a phosphorescent powder or pigment.|Timmask,A timmask is a two-foot-tall toadstool with orange and red stripes across its beige cap. Uprooting or destroying a timmask causes it to expel a 15-foot-radius cloud of poisonous spores. Creatures in the area must succeed at a DC 14 Constitution saving throw or be [poisoned](https://roll20.net/compendium/dnd5e/Conditions#h-Poisoned). While poisoned in this way, the creature is under the effect of a *[confusion](https://roll20.net/compendium/dnd5e/Confusion#h-Confusion)* spell with a duration of [[1]] minute. When the spell effect ends, the poisoned condition also ends.|Tongue of Madness,A creature that eats a tongue of madness must succeed on a DC 12 Constitution saving throw or compulsively speak aloud its every thought for the next hour. The effect can be ended with a *[lesser restoration](https://roll20.net/compendium/dnd5e/lesser%20restoration#content)* spell or similar magic.|Torchstalk,A one- to two-foot-tall mushroom with a combustible cap, a single torchstalk burns for 24 hours once lit. There is a 1-in-6 chance ([[1d6]]) that a torchstalk explodes when lit, bursting into a cloud of fiery spores. Creatures within 10 feet of an exploding torchstalk take [[1d6]] fire damage.} For more information, see ***[F⁠ungi of the Underdark](http://journal.roll20.net/handout/-LxmLbtRJkPR4SHLv78g)***. }}",
            "order": -1
        },
        {
            "name": "OOTA-Underdark-Travel",
            "description": "",
            "istokenaction": false,
            "action": "/w gm &{template:npcaction} {{rname= Underdark Travel }} {{name= Chapter 2: Into Darkness }} {{description= ?{Choose|Forced Marches,At the end of this [forced march](http://journal.roll20.net/handout/-M1IgfnctuhXOIkpwpWK), each character must make a DC [[10+[[[[?{Hours Traveled|8}-8]]/8]]]] Constitution saving throw if they have traveled more than 8 hours. One a failed save, that character suffers one level of [e⁠xhaustion](http://journal.roll20.net/handout/-M1IgNY_4hwweXIAtGVb).|Marching Order,[[1t[Ch02-Encounter-Setup-Space-Marching-Order]]]|Illumination,[[1t[Ch02-Encounter-Setup-Illumination]]]|Navigation Checks,This navigation check is a DC [[10+?{Pace|Slow,-5|Normal,0|Fast,5}]] Wisdom (Survival) check. A failed check result means the characters become lost, wandering in a random direction for [[1d6]] hours before the navigator can make a new check to find the right path.|Teleporting Around Faerzress,Any creature attempting to *[teleport](https://roll20.net/compendium/dnd5e/Spells:Teleport)* into, within, or out of a *[f⁠aerzress](http://journal.roll20.net/handout/-Lxlk3oEDBcgm_dRcbAv)*-suffused area must succeed on a DC 15 Constitution saving throw. On a failed save, the creature takes [[1d10]] force damage and the teleportation attempt fails. Even if the save succeeds, the teleportation attempt can suffer a mishap as if the destination was known only by description, regardless of how familiar the destination actually is.} For more information, see ***[U⁠nderdark Travel](http://journal.roll20.net/handout/-LxmLgVjPyPE8r5qfkP-)***. }}",
            "order": -1
        },
        {
            "name": "OOTA-Drow-Pursuit",
            "description": "",
            "istokenaction": false,
            "action": "/w gm &{template:npcaction} {{rname= Drow Pursuit Calculator }} {{name= Chapter 2: Into Darkness }} {{description= Current Pursuit Level: [[?{Previous Pursuit Level|4}+?{Pace|Fast,-1|Med,0|Slow,1}+?{Covered Trail|Yes,-1|No,0}+?{Random Encounters Fought|0}+?{Terrain Modifiers|0}-?{Helpful or Obscuring Features|0}]] For more information, see ***[D⁠row Pursuit](http://journal.roll20.net/handout/-LxmL_li3pSl5N1c3Mrb)***. }}",
            "order": -1
        },
        {
            "name": "Z-SM-Supplemental-Tables",
            "description": "",
            "istokenaction": false,
            "action": "/w gm &{template:npcaction} {{rname= Supplemental Tables }} {{name= Supplementary Materials }} {{description= ?{Choose Table|Trinkets Table,Trinket: [[1t[SM-Trinkets-Table]]] For more information, see ***[T⁠rinkets Table](http://journal.roll20.net/handout/-M1IjswpnTJ-4NEWG8M7)***.|Wild Magic Surge Table,Wild Magic Surge Effect: [[1t[SM-Wild-Magic-Surge]]] For more information, see ***[W⁠ild Magic Surge Table](http://journal.roll20.net/handout/-M1IjzbVz5W89bxpaM8r)***.|Short-Term Madness,Effect: [[1t[SM-Madness-Short-Term]]] This lasts for [[1d10]] minutes. For more information, see ***[M⁠adness](http://journal.roll20.net/handout/-M1IhI9XDRn-BgPywsYz)***.|Long-Term Madness,Effect: [[1t[SM-Madness-Long-Term]]] This lasts for [[1d10*10]] hours. For more information, see ***[M⁠adness](http://journal.roll20.net/handout/-M1IhI9XDRn-BgPywsYz)***.|Indefinite Madness,Effect: [[1t[SM-Madness-Indefinite]]] This is a flaw that lasts until cured. For more information, see ***[M⁠adness](http://journal.roll20.net/handout/-M1IhI9XDRn-BgPywsYz)***.|250 gp Art Objects,Art Object: [[1t[SM-250-GP-Art-Objects]]] worth 250 gp. For more information, see ***[2⁠50 gp Art Objects Table](http://journal.roll20.net/handout/-M1Ij_bZcmkGnXsqT9Vo)***.|Magic Item Table A,Item: [[1t[SM-Magic-Item-Table-A]]] For more information, see ***[M⁠agic Item Table A](http://journal.roll20.net/handout/-M1Ijf-F8FLyFaMEIewj)***.|Magic Item Table B,Item: [[1t[SM-Magic-Item-Table-B]]] For more information, see ***[M⁠agic Item Table B](http://journal.roll20.net/handout/-M1IjiFDNCnUbPdVaM9o)***.|Magic Item Table C,Item: [[1t[SM-Magic-Item-Table-C]]] For more information, see ***[M⁠agic Item Table C](http://journal.roll20.net/handout/-M1IjkT91ZWxTFqFK9AL)***.|Magic Item Table G,Item: [[1t[SM-Magic-Item-Table-G]]] For more information, see ***[M⁠agic Item Table G](http://journal.roll20.net/handout/-M1IjnlGxcRa1JM0J7Ag)***.} }}",
            "order": -1
        },
        {
            "name": "API-HB-On",
            "description": "",
            "istokenaction": false,
            "action": "!api-heartbeat",
            "order": -1
        },
        {
            "name": "API-HB-Off",
            "description": "",
            "istokenaction": false,
            "action": "!api-heartbeat --off",
            "order": -1
        },
        {
            "name": "API-HB-Dev",
            "description": "",
            "istokenaction": false,
            "action": "!api-heartbeat --dev",
            "order": -1
        },
        {
            "name": "TNN-ADD-NUMBERED",
            "description": "",
            "istokenaction": false,
            "action": "!script {{\n  --#title|Add %%NUMBERED%% to token name\n  --#whisper|gm\n  --#debug|0\n  --#hidecard|1\n  --#sourceToken|@{selected|token_id}\n  --?\"[*S:t-name]\" -inc NUMBERED|EXIT\n\n  --/|Token doesn't have %%NUMBERED%%, so lets add it\n  --&TN|[*S:t-name] %%NUMBERED%%\n  --+Token Name Changed|\n  --+From|[r][*S:t-name][/r]\n  --+To|[r][&TN][/r]\n  --@token-mod|_set name|\"[&TN]\"\"\n\n  --X| Exit\n\n  --:EXIT|\n  --+Token Name Already has required syntax|\n  --X| Exit\n}}",
            "order": -1
        },
        {
            "name": "TNN-HELP",
            "description": "",
            "istokenaction": false,
            "action": "!tnn --help",
            "order": -1
        },
        {
            "name": "Drop-Light-Crumb",
            "description": "",
            "istokenaction": false,
            "action": "#Spawn Light Crumb\n!script {{\n  --#whisper|gm\n  --#title|Drop Light Crumb\n  --=LC|?{Size?|60 ft,1|120 ft,2|240 ft,3}\n  --C[$LC]|1:>ONE|2:>TWO|3:>THREE|\n\n  --X| Exit\n\n  --:ONE| 60 foot light\n\t\t--#leftsub|60' light\n    --@forselected+|Spawn _name|Light Crumb 60ft _offset|1,1 _size|1,1 _order|ToBack\n  --<|\n\n  --:TWO| 120 foot light\n\t\t--#leftsub|120' light\n    --@forselected+|Spawn _name|Light Crumb 120ft _offset|1,1 _size|1,1 _order|ToBack\n  --<|\n\n  --:THREE| 240 foot light\n\t\t--#leftsub|240' light\n    --@forselected+|Spawn _name|Light Crumb 240ft _offset|1,1 _size|1,1 _order|ToBack\n  --<|\n}}",
            "order": -1
        },
        {
            "name": "Reports",
            "description": "",
            "istokenaction": false,
            "action": "!script {{\n  --#title|Reports\n  --#titleCardBackground|#932729\n  --#whisper|self\n  --#emoteState|1\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#buttonbackground|#FFFFFF\n  --#buttontextcolor|#FFFFFF\n  --#buttonbordercolor|#FFFFFF\n  --#debug|0\n\n  --+|[button]🧑‍🤝‍🧑❤️::~Mule|PartyHealth[/button] Party Health\n  --+|[button]🧑‍🤝‍🧑🍗::~Mule|Party-Resources[/button] Party Resources\n  --+|[button]➕🍗::~Mule|Increase-Resource[/button] Increase Resource Level\n  --+|[button]➖🍗::~Mule|Decrease-Resource[/button] Decrease Resource Level \n\n  --+|[button]🔦::~Mule|Report-Light-Crumbs[/button] Light Crumbs\n  --+|[button]💡::~Mule|Report-UDL[/button] Party UDL Settings\n\n  --+|[button]🤪::~Mule|Madness[/button] Let's get crazy(Madness)\n  --+|[button]➕🤪::~Mule|Madness-Increase[/button] Increase Madness Level\n  --+|[button]➖🤪::~Mule|Madness-Decrease[/button] Decrease Madness Level \n}}",
            "order": -1
        },
        {
            "name": "Report-UDL",
            "description": "",
            "istokenaction": false,
            "action": "!report+c|npc|0 --t|has_bright_light_vision-|Normal_Vision t|has_night_vision,|Night_Vision t|night_vision_distance-|Dist t|emits_bright_light,|Emits_Bright_Light t|bright_light_distance#|Dist t|emits_low_light,|Emits_Low_Light t|low_light_distance-|Dist t|has_limit_field_of_vision,|Narrow_View t|limit_field_of_vision_center,|Center t|limit_field_of_vision_total-|Total t|has_limit_field_of_night_vision,|Narrow_NV t|limit_field_of_night_vision_center,|Center t|limit_field_of_night_vision_total-|Total t|has_directional_bright_light,|Dir t|directional_bright_light_center,|Center t|directional_bright_light_total|Total ---- source|false",
            "order": -1
        },
        {
            "name": "Markers-Set-Condition",
            "description": "",
            "istokenaction": false,
            "action": "!mark @{selected|token_id} ?{Condition|Blinded|Charmed|Deafened|Exhaustion 1, exh1|Exhaustion 2, exh2|Exhaustion 3, exh3|Exhaustion 4, exh4|Exhaustion 5, exh5|Exhaustion 6, exh6|Frightened|Grappled|Incapacitated|Invisible|Paralyzed|Petrified|Poisoned|Prone|Restrained|Unconscious}",
            "order": -1
        },
        {
            "name": "Markers-Set-Status",
            "description": "",
            "istokenaction": false,
            "action": "!mark @{selected|token_id} ?{Status|Aid|Bane|Bardic Inspiration,inspired|Blessed|Charmed|Concentrating|Cursed|Death|Disarmed|Drunk|Enlarged|Flying|Hasted|Heroism|Hexed|Hidden|Hunters Mark,targeted|Mirror Image,mirrored|Rage|Shield|Shrunk|Sleeping|Slowed|Strong|Wet|Wild Shape,beast}",
            "order": -1
        },
        {
            "name": "Markers-Unmark",
            "description": "",
            "istokenaction": false,
            "action": "!unmark @{selected|token_id} ?{Status|Blinded|Charmed|Deafened|Exhaustion 1, exh1|Exhaustion 2, exh2|Exhaustion 3, exh3|Exhaustion 4, exh4|Exhaustion 5, exh5|Exhaustion 6, exh6|Frightened|Grappled|Incapacitated|Invisible|Paralyzed|Petrified|Poisoned|Restrained|Unconscious|Aid|Bane|Bardic Inspiration|Blessed|Charmed|Concentrating!Cursed|Death|Disarmed|Drunk|Enlarged|Flying|Hasted|Hexed|Hidden|Hunters Mark,targeted|Mirror Image,mirrored|Rage|Shield|Shrunk|Sleeping|Slowed|Wet|Wild Shape,beast} 0",
            "order": -1
        },
        {
            "name": "Markers-Clear",
            "description": "",
            "istokenaction": false,
            "action": "!clearmark @{selected|token_id} ",
            "order": -1
        },
        {
            "name": "Markers-VerboseMode",
            "description": "",
            "istokenaction": false,
            "action": "!ssm_verbose ?{Verbose Mode|Quiet,0|Everyone,1|GM Only,2}",
            "order": -1
        },
        {
            "name": "1-Spell-Asset-and-AoE-5e",
            "description": "",
            "istokenaction": false,
            "action": "!script {{\n  --#whisper|gm,self\n  --#title|Spawn Spell Token\n  --=spell|?{Spell?|Burning Hands,1|Call Lightning,2|Darkness,3|Dragon's Breath,4|Faerie Fire,5|Fear,6|Fireball,7|Flame Sphere,8|Grasping Vine,9|Healing Spirit,10|Hunger of Hadar,11|Lightning Bolt,12|Mage Hand,13|Shatter,14|Silence,15|Sleep,16|Slow,17|Spiritual Weapon Axe,20|Spiritual Weapon Hammer,21|Spiritual Weapon Mace,22|Spiritual Weapon Sword,23|Summon Demon Circle,18|Web,19}\n\n  --C[$spell]|1:>BH|2:>CL|3:>DRK|4:>DBF|5:>FF|6:>FR|7:>FB|8:>FS|9:>GV|10:>HS|11:>HOH|12:>LB|13:>MH|14:>SHTR|15:>SIL|16:>SLP|17:>SLW|18:>SDC|19:>WEB|20:>SWA|21:>SWH|22:>SWM|23:>SWS|\n\n\n  --X| Exit\n\n  --:BH| 15 foot cone\n\t\t--#leftsub|Burning Hands (15' Cone)\n    --@forselected+|Spawn _name|Spell-Object _offset|2,0 _side|[$spell] _expand|40,20 _size|4,4 _rotation|270 _order|ToBack\n  --<|\n\n  --:CL| 120 foot radius sphere (120' Radius Sphere)\n\t\t--#leftsub|Call Lightning\n    --@forselected+|Spawn _name|Spell-Object _offset|2,0 _side|[$spell] _expand|40,20 _size|24,24 _order|ToBack\n\n  --<|\n\n  --:DRK| Darkness\n\t\t--#leftsub|Darkness (15' Sphere)\n    --@forselected+|Spawn _name|Spell-Object _offset|3.5,-0.5 _side|[$spell] _expand|40,20 _size|8,8 _order|ToBack\n\n  --<|\n\n  --:DBF| Dragon's Breath - Fire\n\t\t--#leftsub|Dragon's Breath-Fire (60' Cone)\n    --@forselected+|Spawn _name|Spell-Object _offset|6,0 _side|[$spell] _expand|20,20 _size|16,16 _rotation|270 _order|ToBack\n  --<|\n\n  --:FF| Fairie Fire\n\t\t--#leftsub|Fairie Fire (20' Cube)\n    --@forselected+|Spawn _name|Spell-Object _offset|3,-1.5 _side|[$spell] _expand|40,20 _size|4,4 _order|ToBack\n  --<|\n\n  --:FR| Fear \n\t\t--#leftsub|Fear (30' Cone)\n    --@forselected+|Spawn _name|Spell-Object _offset|3.5,0 _side|[$spell] _expand|40,20 _size|7,7 _rotation|270 _order|ToBack\n  --<|\n\n  --:FB| Fireball\n\t\t--#leftsub|Fireball (20' Sphere)\n    --@forselected+|Spawn _name|Spell-Object _offset|5.5,-0.5 _side|[$spell] _expand|40,20 _size|9.5,9.5 _order|ToBack\n  --<| \n\n  --:HOH| Hunger of Hadar \n\t\t--#leftsub|Hunger of Hadar (20' Sphere)\n    --@forselected+|Spawn _name|Spell-Object _offset|5.5,-0.5 _side|[$spell] _expand|40,20 _size|10,10 _order|ToBack\n\n  --<|\n\n  --:LB| Lightning Bolt \n\t\t--#leftsub|Lightning Bolt (100' Line)\n    --@forselected+|Spawn _name|Spell-Object _offset|10.5,0 _side|[$spell] _expand|40,20 _size|1,21 _rotation|90 _order|ToBack\n\n  --<|\n\n  --:SHTR| Shatter\n\t\t--#leftsub|Shatter (10' Sphere)\n    --@forselected+|Spawn _name|Spell-Object _offset|3,-0.5 _side|[$spell] _expand|40,20 _size|6,6 _order|ToBack\n\n  --<|\n\n  --:SIL| Silence\n\t\t--#leftsub|Silence (20' Sphere)\n    --@forselected+|Spawn _name|Spell-Object _offset|5.5,-0.5 _side|[$spell] _expand|40,20 _size|8,8 _order|ToBack\n\n  --<|\n\n  --:SLP| Sleep\n\t\t--#leftsub|Sleep (20' Sphere)\n    --@forselected+|Spawn _name|Spell-Object _offset|5.5,-0.5 _side|[$spell] _expand|40,20 _size|10,10 _order|ToBack\n\n  --<|\n\n  --:SLW| Slow\n\t\t--#leftsub|Slow (40' Sphere)\n    --@forselected+|Spawn _name|Spell-Object _offset|6,-0.5 _side|[$spell] _expand|80,40 _size|10,10 _order|ToBack\n\n  --<|\n\n  --:WEB|\n\t\t--#leftsub|Web (20' Cube)\n    --@forselected+|Spawn _name|Spell-Object _offset|3.5,-.5 _side|[$spell] _expand|40,20 _size|5,5 _order|ToBack\n\n  --<|\n\n--:FS|\n\t--#leftsub|Flame Sphere\n  --@forselected+|Spawn _name|Spell-Object _offset|1,0 _side|[$spell] _expand|40,20 _size|1,1\n--<|\n--:GV|\n\t--#leftsub|Grasping Vine\n  --@forselected+|Spawn _name|Spell-Object _offset|1,0 _side|[$spell] _expand|40,20 _size|1,1 _ rotation|180\n--<|\n--:HS|\n\t--#leftsub|Healing Spirit\n  --@forselected+|Spawn _name|Spell-Object _offset|1,0 _side|[$spell] _expand|40,20 _size|1,1 _rotation|270\n--<|\n--:MH|\n\t--#leftsub|Mage Hand\n  --@forselected+|Spawn _name|Spell-Object _offset|1,0 _side|[$spell] _expand|40,20 _size|1,1\n--<|\n--:SWA|\n\t--#leftsub|Spiritual Weapon - Axe\n  --@forselected+|Spawn _name|Spell-Object _offset|1,0 _side|[$spell] _expand|40,20 _size|1,1\n--<|\n--:SWH|\n\t--#leftsub|Spiritual Weapon - Hammer\n  --@forselected+|Spawn _name|Spell-Object _offset|1,0 _side|[$spell] _expand|40,20 _size|1,1\n--<|\n--:SWM|\n\t--#leftsub|Spiritual Weapon - Mace\n  --@forselected+|Spawn _name|Spell-Object _offset|1,0 _side|[$spell] _expand|40,20 _size|1,1\n--<|\n--:SWS|\n\t--#leftsub|Spiritual Weapon Hammer - Sword\n  --@forselected+|Spawn _name|Spell-Object _offset|1,0 _side|[$spell] _expand|40,20 _size|1,1\n--<|\n--:SDC|\n\t--#leftsub|Summon Demon Spirit\n  --@forselected+|Spawn _name|Spell-Object _offset|2,0 _side|[$spell] _expand|40,20 _size|3,3\n--<|\n\n}}",
            "order": -1
        },
        {
            "name": "1-Spell-AoE-Generic",
            "description": "",
            "istokenaction": false,
            "action": "!script {{\n\n--#whisper|gm\n  --#title|Spawn Spell Template (purple)\n  --=template|?{Template?|Cone,1|Cube,2|Line,3|Sphere,4}\n  --=color|?{Color?|Acid Green,1|Cold Blue,2|Lightning Blue,3|Fire Red,4|Light Yellow,5|Magic Purple,6|Dark Purple,7}\n  --=size|?{Size (Cirle-Radius, Cube/Line/Cone-Length)|10|15|20|30|40|50|60|80|100|120}\n  --=side|[$color] - 1\n  --=side|[$side] * 4\n  --=side|[$side] + [$template]\n\n--+Selection: |Template([$template]) color([$color]) side([$side])\n\n  --C[$template]|1:>CONE;[$template]|2:>CUBE;[$template]|3:>LINE;[$template]|4:>SPHERE;[$template]\n\n  --X| Exit\n\n--:CONE| Cone\n  --=wlen|[$size]/5\n  --=hlen|100 * [$wlen] / 1.3333\n  --=hlen|[$hlen] / 100\n\n  --#leftsub|Cone ([$size] ft.)\n  --#rightsub|WxH: [$wlen]x[$hlen]\n\n  --=horz|[$wlen] / 2 + .5\n  --=vert|[$hlen] / 2 - .5\n\n  --=horz|0\n  --=vert|0\n \n\n  --=rotate|135+22.5\n\n    --@forselected+|Spawn _name|Spawn-Generic-AoE-Template _offset|[$horz],[$vert] _side|[$side] _expand|40,20 _size|[$wlen],[$hlen] _rotation|[$rotate] _order|ToBack\n  --<|\n\n--:CUBE| cube\n  --#leftsub|Cube (Width and Height: [$size] ft.)\n  --=len|[$size]/5\n  --=offset|[$len]/ 2 + 1.5\n  --+len and offset|[$len] : [$offset]\n    --@forselected+|Spawn _name|Spawn-Generic-AoE-Template _offset|[$offset],-0.5 _side|[$side] _expand|40,20 _size|[$len],[$len] _order|ToBack\n\n--<|\n\n--:LINE| Line\n  --#leftsub|Line (Length: [$size] ft. x 5 ft.)\n  --=len|[$size]/5\n  --=offset|[$len] / 2 + .5\n  --+len and offset|[$len] : [$offset]\n\n  --@forselected+|Spawn _name|Spawn-Generic-AoE-Template _offset|[$offset],0 _side|[$side] _expand|40,20 _size|[$len],1 _order|ToBack\n\n--<|\n\n--:SPHERE| Sphere\n  --#leftsub|Sphere (Radius: [$size] ft.)\n  --=len|[$size] / 5 * 2\n  --=offset|[$len] / 2 + 0.5\n  --+len and offset|[$len] : [$offset]\n\n  --@forselected+|Spawn _name|Spawn-Generic-AoE-Template _offset|[$offset],0 _side|[$side] _expand|40,20 _size|[$len],[$len] _order|ToBack\n--<|\n\n}}",
            "order": -1
        },
        {
            "name": "Spawn-Creature",
            "description": "",
            "istokenaction": false,
            "action": "!script {{\n   --#titlecardbackground|#65D52A\n   --#title|Druid Wild Shape Creature\n   --#hideTitleCard|1\n   --#sourceToken|@{selected|token_id}\n\n   --&Animal|?{Wild Shape Animal?|}\n   --&Size|?{Animal Size?|Tiny,.5|Small,1|Medium,1|Large,2|Huge,3|Gargantuan,4}\n   --#emotetext|@{selected|character_name} Wildshapes into a [&Animal]!\n\n   --@forselected+|Spawn _name|[&Animal]| _size|[&Size],[&Size]| _offset|[&Size],.5| _order|toFront| _fx|nova-magic| _expand|30,30\n}}\n",
            "order": -1
        },
        {
            "name": "CharDetails",
            "description": "",
            "istokenaction": false,
            "action": "!power {{\n --name|@{selected|character_name}\n --whisper|GM\n --format|badguys\n --emote|@{selected|character_name}\n --tokenid|@{selected|token_id}\n --npc_attribute_summary|@{selected|character_id}\n --npc_qualities_summary|@{selected|character_id}\n --npc_skills_summary|@{selected|character_id}\n --!Actions|**Available Actions**\n --npc_action_list|@{selected|character_id}\n --!Reactions|**Available Reactions**\n --npc_reaction_list|@{selected|character_id}\n --!LA|**Legendary Actions**\n --npc_legendaryaction_list|@{selected|character_id}\n --!TR|**@{selected|character_name} Traits** \n --npc_trait_list|@{selected|character_id}\n\n --leftsub|Spell Atk Bonus: @{selected|spell_attack_bonus}\n --rightsub|Save DC: @{selected|spell_save_dc}\n --spell_slots|@{selected|character_id}\n --spell_list|@{selected|character_id} \n \n }}\n",
            "order": -1
        },
        {
            "name": "Player-Macros",
            "description": "",
            "istokenaction": false,
            "action": "!script {{  \n  --#title|Player Macros\n  --#reentrant|Player Macros\n  --#titleCardBackground|#932729\n  --#whisper|self\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#buttonbackground|#FFFFFF\n  --#buttontextcolor|#0905f2\n  --#buttonbordercolor|#FFFFFF\n  --#bodyFontSize|11px\n  --#debug|0\n\n  --+|[rbutton]🕵::LIST_PLAYERS[/Rbutton] Find My Friends\n\n  --+|[button]📜::~Mule|GMSheet[/button] See Character [b]Cheat-Sheet[/b]\n  --+|[button]😇::~Mule|Set-Status-Marker[/button] Set Status/Condition\n  --+|[button]➖::~Mule|Markers-Unmark[/button]/[button]🗑️::~Mule|Markers-Clear[/button]  Unmark/Clear Marker\n  --+|[button]⏫::~Mule|Size-Enlarge[/button]/[button]⏬::~Mule|Size-Reduce[/button] Grow/Shrink\n\n  --+|[button]✨::~Mule|Wild-Magic-Surge[/button] Wild magic surge\n  --+|[button]🤪::~Mule|Madness[/button] Let's get crazy(Madness)  \n\n  --+|[button]😴::~Mule|Rest-Short[/button] / [button]🏕️::~Mule|Rest-Long[/button] Rest Short/Long\n  --+|[button]🧪::~Mule|Healing-Potion[/button] Healing potion\n  --+|[button]🔥::~Mule|Set-Light[/button] / [button]🔦::~Mule|Lighting-Report[/button] Light Set/Report\n  --+|[button]💰::~Mule|PartyFunds-Report[/button] Party Funds\n\n  --+[c][#C43112]🎆 Magic Stuff 🎆[/#][/c]|\n  --+|[button]📗::~Mule|SpellBook[/button] Spell Book\n  --+|[button]💥::~Mule|1-Spell-Asset-and-AoE-5e[/button] 5e Spell Asset or Template\n  --+|[button]🔵::~Mule|1-Spell-AoE-Generic[/button] Generic Spell AoE Template\n  --/+|[button]🦊::~Mule|Spawn-Creature[/button] Spawn Magic Creature\n\n--X|\n\n--:LIST_PLAYERS|\n\n  --#title|Find My Friends\n\n  --~tokencnt|array;pagetokens;alltokens;@{selected|token_id}\n  --/|Loop through all of the tokens in \"alltokens\" \n  --~TokenId|array;getfirst;alltokens\n  --&CharId|[*[&TokenId]:t-represents]\n  --?[&TokenId] -eq ArrayError|ENDLOOP\n\n  --&TblStyle1|\"width:100%;text-align:left;padding:1px;border-spacing:1px;border-collapse:collapse;text-shadow: 0px 0px 0px black;border: 0px dashed black;\"\n  --&tbl|[t style=[&TblStyle1]]\n\n  --:LOOPCHECK|\n    --&CharId|[*[&TokenId]:t-represents]\n    --/+Debug|[*[&TokenId]:t-name]\n\n    --/|Skip targets that are not on the token layer or that don't represent creatures\n    --?[*[&TokenId]:t-layer] -ne objects|CONTINUE\n    --/?\"[*[&TokenId]:npc]\" -eq 1|CONTINUE\n    --/?\"[*[&TokenId]:t-represents]\" -inc \"-\"|START\n    --?\"[*[&CharId]:PlayerCharacter]\" -eq \"1\"|START\n    --^CONTINUE|\n   --:START|\n\n    --&tbl|+ \n        [tr][td style=\"width:100%;text-align:left;background-color:#FFFFFF\"][b][rbutton][*[&CharId]:character_name]::FIND_TOKEN;[&TokenId][/rbutton][/b][/td][/tr]\n\n    --:CONTINUE|\n    --~TokenId|array;getnext;alltokens\n    --?[&TokenId] -ne ArrayError|LOOPCHECK\n  --:ENDLOOP|\n\n  --&tbl|+ [/t] \n  --+|[&tbl]\n\n  --X|\n--<|\n\n--:FIND_TOKEN|TokenId\n  --#hidecard|1  \n  --@ping-token|_[&reentryval] _[&SendingPlayerID]\n  --X|\n--<|\n\n}}",
            "order": -1
        },
        {
            "name": "CharSummary",
            "description": "",
            "istokenaction": false,
            "action": "!power {{\n --name|@{selected|character_name}\n --whisper|GM\n --format|badguys\n --emote|\n --tokenid|@{selected|token_id}\n --npc_attribute_summary|@{selected|character_id}\n --npc_qualities_summary|@{selected|character_id}\n --npc_skills_summary|@{selected|character_id}\n --!Actions|**Available Actions**\n --npc_action_list|@{selected|character_id}\n --!Reactions|**Available Reactions**\n --npc_reaction_list|@{selected|character_id}\n --!LA|**Legendary Actions**\n --npc_legendaryaction_list|@{selected|character_id}\n --!TR|**@{selected|character_name} Traits**\n --npc_trait_list|@{selected|character_id}\n }}",
            "order": -1
        },
        {
            "name": "BagOfTreats",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard  {{ \n   --#titlecardbackground|#65D52A\n   --#title|From The Bag Of Tricks    \n   --#sourceToken|@{selected|token_id}\n   --~Animals|string;split;:;Weasel:Giant Rat:Badger:Boar:Panther:Giant Badger:Dire Wolf:Giant Elk\n   --~Offsets|string;split;:;0,2:0,-2:2,0:2,2:2,-2:4,0:4,-2:4,2\n   --~Sizes|string;split;:;1:1:1:1:1:2:2:3\n   --=AnimalCount|?{How many creatures do you want to pull from the bag?|1|2|3}\n   --#emotetext|@{selected|character_name} pulls [$AnimalCount.Total] things out of a bag of tricks!\n   --=Counter|0\n   --:AddAnAnimal|\n   --=RollAnimal|1d8    \n   --=Counter|[$Counter] + 1\n   -->Summon|[$RollAnimal.Total];[$Counter.Total]\n   --?[$Counter.Total] -lt [$AnimalCount.Total]|AddAnAnimal\n   --X|\n\n   --:Summon|Animal number to summon;Counter into Offsets\n   --@forselected+|Spawn _name|[&Animals[%1%]]| _size|[&Sizes[%1%]],[&Sizes[%1%]]| _offset|[&Offsets[%2%]]| _order|toFront| _fx|nova-magic| _expand|30,30\n   --@roll20AM| _audio,play,nomenu|Teleport Spell\n   --+|@{selected|token_name} pulls out a [&Animals[%1%]]!\n   --<|\n}}",
            "order": -1
        },
        {
            "name": "Turn-Undead",
            "description": "",
            "istokenaction": false,
            "action": "!script {{\n  --#title|@{selected|character_name} Turns Undead!\n  --#leftsub|Save DC @{selected|spell_save_dc}\n\n  --:(0) CREATE AN ANIMATED WAVEFRONT WITH RADAR SCRIPT| uses SelectManager to retain selected token\n  --@forselected|radar_range|30ft _pinglife|0 _wavedelay|20 _wavespacing|10 _silent|true\n\n  --:(1) DETERMINE CR OF UNDEAD THAT CAN BE DESTROYED|\n  --=charLevel|@{selected|level}\n  --?[$charLevel] -lt 5|>SetCRdestroy;0\n  --?[$charLevel] -ge 5 -and [$charLevel] -lt 8|>SetCRdestroy;0.5\n  --?[$charLevel] -ge 8 -and [$charLevel] -lt 11|>SetCRdestroy;1\n  --?[$charLevel] -ge 11 -and [$charLevel] -lt 14|>SetCRdestroy;2\n  --?[$charLevel] -ge 14 -and [$charLevel] -lt 17|>SetCRdestroy;3\n  --?[$charLevel] -ge 17|>SetCRdestroy;4\n\n  --:(2) GET ALL TOKENS INTO THE \"allTokens\" ARRAY| will have blank 1st element to be removed later\n  --~|array;pagetokens;allTokens;@{selected|token_id}\n\n  --:(3) CREATE THE \"inRange\" ARRAY TO HOLD TOKENS IN RANGE|\n  --~|array;define;inRange;\n\n  --:(4) PREP ARRAY FOR LOOP| if no array elements then end macro\n  --~tokenid|array;getfirst;allTokens\n  --?[&tokenid] -eq ArrayError|endOutput\n\n  --:(5) FIND ALL TOKENS IN RANGE|\n  --:RangeLoop|\n          --:TOKEN MUST BE ON OBJECTS OR GMLAYER AND TYPE MUST INCLUDE UNDEAD|\n          --?[*[&tokenid]:t-layer] -ne objects -and [*[&tokenid]:t-layer] -ne gmlayer|NextToken\n          --?\"[*[&tokenid]:npc_type]\" -ninc \"undead\"|NextToken\n          \n          --:CHECK DISTANCE IN UNITS. 30ft is 5UNITS|\n          --~dist|euclideandistance;@{selected|token_id};[&tokenid]\n          --?[$dist] -gt 5|NextToken\n          \n          --:ADD TO THE \"inRange\" ARRAY|\n          --~|array;add;inRange;[&tokenid]\n\n          --:NextToken|\n          --~tokenid|array;getnext;allTokens\n          --?[&tokenid] -ne ArrayError|RangeLoop\n\n  --:(6) REMOVE DUMMY FIRST ITEM IN inRange ARRAY|\n  --~|array;removeat;inRange;0\n\n  --:(7) ROLL SAVES FOR EACH TOKEN IN RANGE| if fail, set a token condition marker to denote turned\n  --~tokenid|array;getfirst;inRange\n  --?[&tokenid] -eq ArrayError|End\n  --:SaveLoop|\n          --=SaveRoll|1d20 + [*[&tokenid]:wisdom_save_bonus]          \n          --?[$SaveRoll.Total] -ge @{selected|spell_save_dc}|>MadeSave|>FailedSave\n          --~tokenid|array;getnext;inRange\n          --?[&tokenid] -ne ArrayError|SaveLoop\n\n  --:End|\n  --X|\n\n--:PROCEDURES|\n  --:SetCRdestroy| accepts CR as parameter\n      --=CRdestroy|[%1%]\n  --<|\n\n  --:MadeSave| \n        --+[*[&tokenid]:character_name]:|[#009900][b]Made Save[/b][/#] [$SaveRoll]\n  --<|\n\n  --:FailedSave| add either a dead or fear condition marker to the token, depending on CR\n       --+[*[&tokenid]:character_name]:|[#990000][b]Failed Save[/b][/#] [$SaveRoll]\n      --=CR|[*[&tokenid]:npc_challenge]\n      --?[$CR] -le [$CRdestroy]|>AddConditionMarker;[&tokenid];dead|>AddConditionMarker;[&tokenid];Frightened::243759\n  --<|\n\n  --:AddConditionMarker| accepts tokenID and condition marker as parameter\n      --@token-mod|_ignore-selected _ids [%1%] _set statusmarkers|[%2%]\n  --<|\n}}",
            "order": -1
        },
        {
            "name": "TalkToMyself",
            "description": "",
            "istokenaction": false,
            "action": "/talktomyself",
            "order": -1
        },
        {
            "name": "Fireball",
            "description": "",
            "istokenaction": false,
            "action": "!script {{\n  --/Description|Deals fireball damage to all tokens that represent creations in a 20' radius around target token\n  --/|Set up the card appearance\n  --#title|@{selected|character_name} casts Fireball!\n  --#bodyFontSize|12px\n  --#titlecardbackground|#800000\n  --#leftsub|Save DC @{selected|spell_save_dc}\n\n  --/|Get a spell slot level from the caster.\n  --=SpellLevel|?{Spell Slot Level?|3|4|5|6|7|8|9}\n  --#rightsub|Slot Level: [$SpellLevel]\n\n  --/|Calculate damage based on spell slot. Fireball is 8d6 for 3rd level, so 5+SpellLevel d6 total.\n  --=DamageDice|[$SpellLevel.Total] + 5\n  --=Damage|[$DamageDice.Total]d6\n  --=HalfDamage|[$Damage.Total] \\ 2\n\n  --/|Since we want to be able to hover over a roll and see the dice details, output the rolled damage at the\n  --/|top of the card. If all critters make their save, the half damage roll won't contain the details.\n  --+|[c][b]Damage Roll: [/b][$Damage][/c]\n  --+| \n\n  --/|Get all tokens on the page into the \"alltokens\" array\n  --~|array;pagetokens;alltokens;@{target|token_id}\n\n  --/|Create the \"inRange\" array. It will have a blank item in it to begin with, which we will remove later.\n  --~|array;define;inRange;\n\n  --/|Loop through all of the tokens in \"alltokens\" to check their distance\n  --~tokenid|array;getfirst;alltokens\n  --?[&tokenid] -eq ArrayError|endOutput\n  --:loopCheck|\n\n  --/|Skip targets that are not on the token layer or that don't represent creatures\n  --?[*[&tokenid]:t-layer] -ne objects|continue\n  --?\"[*[&tokenid]:t-represents]\" -ninc \"-\"|continue\n\n  --/|Check the distance between the target token and the current array token. 20 feet is 4 units\n  --~dist|distance;@{target|token_id};[&tokenid]\n  --?[$dist] -gt 4|continue\n\n  --/|If we didn't skip over this part, the token is within 20 feet, so add it to the inRange array\n  --~|array;add;inRange;[&tokenid]\n  --:continue|\n  --~tokenid|array;getnext;alltokens\n  --?[&tokenid] -ne ArrayError|loopCheck\n\n  --/|Remove the dummy first item in the inRange array\n  --~|array;removeat;inRange;0\n\n  --/|Loop through the inRange tokens and roll saves for each one and apply damage\n  --~tokenid|array;getfirst;inRange\n  --?[&tokenid] -eq ArrayError|endOutput\n  --:loopDisplay|\n  --=SaveRoll|1d20 + [*[&tokenid]:dexterity_save_bonus]\n\n  --/|Compare the save roll to the save DC and either apply full or half damage\n  --?[$SaveRoll.Total] -lt @{selected|spell_save_dc}|>ApplyDamageTokenmod;[&tokenid];1;-[$Damage.Total]|>ApplyDamageTokenmod;[&tokenid];1;-[$HalfDamage.Total]\n  --?[$SaveRoll.Total] -ge @{selected|spell_save_dc}|madeSave\n\n  --/|Output a lien for a failed saving throw\n  --+[*[&tokenid]:name]:|Save [$SaveRoll] [r][$Damage] fire damage[/r]\n  -->afterSave|\n\n  --/|Output a line for a successful saving throw\n  --:madeSave|\n  --+[*[&tokenid]:name]:|Save [$SaveRoll] [r][$HalfDamage] fire damage[/r]\n  --:afterSave|\n\n  --/|Put a burn-fire visual effect on impacted tokens\n  --vtoken|[&tokenid] burn-fire\n  --~tokenid|array;getnext;inRange\n  --?[&tokenid] -ne ArrayError|loopDisplay\n\n  --/|Add some extra visual effects - a nova-fire at the target, and a beam-fire from source to target\n  --vtoken|@{target|token_id} nova-fire\n  --vbetweentokens|@{selected|token_id} @{target|token_id} beam-fire\n\n  --:endOutput|\n  --X|\n\n  --/|Subroutine to apply damage with TokenMod. Could be replcaed with alterbars or chatsetattr\n  --:ApplyDamageTokenmod|Parameters are tokenid;bar#;amount\n  --@token-mod|_ignore-selected _ids [%1%] _set bar[%2%]_value|[%3%]\n  --<|\n}}",
            "order": -1
        },
        {
            "name": "Barbarian-Rage-Wild-Magic",
            "description": "",
            "istokenaction": false,
            "action": "!mark @{selected|token_id} Rage 2\n!scriptcard  {{ \n  --:___Formatting___|\n  --#title|Wild Surge\n  --#leftsub|Path of Wild Magic Feature\n  --#titleCardBackground|#932729\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n\n   --:__Comment| #whisper|gm,@{selected|character_name}\n  \n  --:___Primary Rolls___|\n  --=DC|8 + @{selected|pb} + @{selected|constitution_mod}\n  --=SurgeRoll|1d8\n\n  --:___Conditionals___|\n  --?[$SurgeRoll] -eq 1| >Roll_1\n  --?[$SurgeRoll] -eq 2| >Roll_2\n  --?[$SurgeRoll] -eq 3| >Roll_3\n  --?[$SurgeRoll] -eq 4| >Roll_4\n  --?[$SurgeRoll] -eq 5| >Roll_5\n  --?[$SurgeRoll] -eq 6| >Roll_6\n  --?[$SurgeRoll] -eq 7| >Roll_7\n  --?[$SurgeRoll] -eq 8| >Roll_8\n  --X|___Exit Macro___\n\n  --:___Functions___\n  --:Roll_1|\n      --=NecroDam|1d12\n      --=TempHP|1d12\n      --+[c][#030bfc]**~~Shadow Tendrils(1)~~|**[/#][/c]\n      --+|Shadowy tendrils lash around you. \n      --+|[j]Each creature of your choice that you can see within 30 feet of you must succeed on a **[#990000]Constitution saving throw (DC [$DC.Total])[/#]** or take [$NecroDam] necrotic damage.[/j]\n      --+|You also gain [$TempHP] temporary hit points.\n      --<|\n\n  --:Roll_2|\n      --+[c][#030bfc]**~~Teleport(2)~~|**[/#][/c]\n      --+|[j]**You teleport up to 30 feet** to an unoccupied space you can see.[/j]\n      --+Ongoing Effect|[j]Until your rage ends, you can use this effect again on each of your turns as a bonus action.[/j]\n      --<|\n\n  --:Roll_3|\n      --=ForceDam|1d6\n      --+[c][#030bfc]**~~Intangible Spirit(3)~~|**[/#][/c]\n      --+|[j]An intangible spirit, which looks like a **flumph** or a **pixie** (your choice), appears within 5 feet of one creature of your choice that you can see within 30 feet of you.[/j]\n      --+|[j]At the end of the current turn, the spirit explodes, and each creature within 5 feet of it must succeed on a **[#990000]Dexterity saving throw (DC [$DC.Total])[/#]** or take [$ForceDam] (1d6) force damage.[/j] \n      --+Ongoing Effect|[j]Until your rage ends, you can use this effect again, summoning another spirit, on each of your turns as a bonus action.[/j]\n      --<|\n\n  --:Roll_4|\n      --+[c][#030bfc]**~~Force Weapon(4)~~|**[/#][/c]\n      --+|[j]Magic infuses one weapon of your choice that you are holding.[/j]\n      --+|[j]Until your rage ends, the **weapon's damage type changes to force, and it gains the light and thrown properties**, with a normal range of 20 feet and a long range of 60 feet.[/j]\n      --+|[j]If the weapon leaves your hand, the weapon reappears in your hand at the end of the current turn.[/j]\n      --<|\n\n  --:Roll_5|\n      --+[c][#030bfc]**~~Retributive Strike(5)~~|**[/#][/c]\n      --+Ongoing Effect|[j]Whenever a creature hits you with an attack roll before your rage ends, that creature takes **[#990000]1d6 force damage[/#]**, as magic lashes out in retribution.[/j]\n      --<|\n\n  --:Roll_6|\n      --+[c][#030bfc]**~~Protective Aura(6)~~|**[/#][/c]\n      --+Ongoing Effect|[j]Until your rage ends, you are surrounded by multi colored, protective lights. You gain a **[#990000]+1 bonus to AC[/#]**, and while within 10 feet of you, your allies gain the same bonus.[/j]\n      --<|\n\n  --:Roll_7|\n      --+[c][#030bfc]**~~Entangling Aura(7)~~|**[/#][/c]\n      --+|[j]Flowers and vines temporarily grow around you.[/j]\n      --+Ongoing Effect|[j]Until your rage ends, the ground within 15 feet of you is **[#990000]difficult terrain[/#]** for your enemies.[/j]\n      --<|\n\n  --:Roll_8|\n      --=RadiantDam|1d6\n      --+[c][#030bfc]**~~Radiant Bolt(8)~~|**[/#][/c]\n      --+|[j]A bolt of light shoots from your chest.[/j]\n      --+|[j]Another creature of your choice that you can see within 30 feet of you must succeed on a **[#990000]Constitution saving throw (DC [$DC.Total])[/#]** or take [$RadiantDam] radiant damage and be blinded until the start of your next turn.[/j]\n      --+Ongoing Effect|[j]Until your rage ends, you can use this effect again on each of your turns as a bonus action.[/j]\n      --<|\n}}\n",
            "order": -1
        },
        {
            "name": "Death-Save",
            "description": "",
            "istokenaction": false,
            "action": "/w gm %{selected|death_save}",
            "order": -1
        },
        {
            "name": "Party-Resources",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard  {{ \n  --:___Formatting___|\n  --#title|Party Resources\n  --#titleCardBackground|#932729\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#bodyFontSize|12px\n   --#whisper|gm\n\n \t--+|[t style=\"width:100%\"]\n\t\t\t[tr][td style=\"width:20%\"][b]Name[/b][/td][td style=\"width:50%\"][b]Resource[/b][/td][td style=\"width:30%\"][b]Available / Maximum [/b][/td][/tr]\n  \t\t[tr][td]Kharg[/td][td]@{Kharg|class_resource_name}[/td][td]@{Kharg|class_resource} / @{Kharg|class_resource|max}[/td][/tr]\n      [tr][td][/td][td]@{Kharg|other_resource_name}[/td][td]@{Kharg|other_resource} / @{Kharg|other_resource|max}[/td][/tr]\n      [tr style=\"background-color:#f0ede9;color:#000000;\"][td]Eliza[/td][td]@{Eliza Redburrow|class_resource_name}[/td][td]@{Eliza Redburrow|class_resource} / @{Eliza Redburrow|class_resource|max}[/td][/tr]\n      [tr style=\"background-color:#f0ede9;color:#000000;\"][td][/td][td]@{Eliza Redburrow|other_resource_name}[/td][td]@{Eliza Redburrow|other_resource} / @{Eliza Redburrow|other_resource|max}[/td][/tr]\n      [tr][td]Jokaryn[/td][td]@{Jokaryn|class_resource_name}[/td][td]@{Jokaryn|class_resource} / @{Jokaryn|class_resource|max}[/td][/tr]\n      [tr][td][/td][td]@{Jokaryn|other_resource_name}[/td][td]@{Jokaryn|other_resource} / @{Jokaryn|other_resource|max}[/td][/tr]\n      [tr style=\"background-color:#f0ede9;color:#000000;\"][td]Xaral[/td][td]@{Xaral Mind-drinker|class_resource_name}[/td][td]@{Xaral Mind-drinker|class_resource} / @{Xaral Mind-drinker|class_resource|max}[/td][/tr]\n      [tr style=\"background-color:#f0ede9;color:#000000;\"][td][/td][td]@{Xaral Mind-drinker|other_resource_name}[/td][td]@{Xaral Mind-drinker|other_resource} / @{Xaral Mind-drinker|other_resource|max}[/td][/tr]\n      [tr][td]Shaper[/td][td]@{Shaper|class_resource_name}[/td][td]@{Shaper|class_resource} / @{Shaper|class_resource|max}[/td][/tr]\n      [tr][td][/td][td]@{Shaper|other_resource_name}[/td][td]@{Shaper|other_resource} / @{Shaper|other_resource|max}[/td][/tr]\n\t\t[/t]\n}}",
            "order": -1
        },
        {
            "name": "Decrease-Resource",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{ \n  --:___Formatting___|\n  --#title|Decrease Resource\n  --#titleCardBackground|#932729\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n  --#bodyFontSize|12px\n  --#sourceToken|@{selected|token_id}\n  --#debug|0\n  --#hideCard|1\n  --#whisper|gm\n\n  --&ResType|?{Resource Type?|Class,class_resource|Other,other_resource}\n\n  --=CR|[*S:[&ResType]]\n  --=CRMax|[*S:[&ResType]|max]\n\n  --+Debug|Cur [&ResType] Lvl: [$CR] / [$CRMax]\n  --?[$CR] -eq 0|DONE\n  --=CR|[$CR] - 1\n  --@setattr| _charid [*S:character_id] _[&ResType]|[$CR]\n  --+Debug|New [&ResType] Lvl: [$CR] / [$CRMax]\n  --X| \n  --:DONE|\n  --+Debug|[&ResType] Level At ZERO\n  }}",
            "order": -1
        },
        {
            "name": "Increase-Resource",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{ \n  --:___Formatting___|\n  --#title|Increase Resource\n  --#titleCardBackground|#932729\n  --#oddRowBackground|#CEC7B6\n  --#evenRowBackground|#B6AB91\n  --#bodyFontSize|12px\n  --#sourceToken|@{selected|token_id}\n  --#debug|0\n  --#hideCard|1\n  --#whisper|gm\n\n  --&ResType|?{Resource Type?|Class,class_resource|Other,other_resource}\n\n  --=CR|[*S:[&ResType]]\n  --=CRMax|[*S:[&ResType]|max]\n\n  --+Debug|Cur [&ResType] Lvl: [$CR] / [$CRMax]\n  --?[$CR] -eq [$CRMax]|DONE\n  --=CR|[$CR] + 1\n  --@setattr| _charid [*S:character_id] _[&ResType]|[$CR]\n  --+Debug|New [&ResType] Lvl: [$CR] / [$CRMax]\n  --X| \n  --:DONE|\n  --+Debug|[&ResType] Level At Max\n  }}",
            "order": -1
        },
        {
            "name": "SpellBook",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{ \n  --#reentrant|Spellbook\n  --#titlefontsize|1.2em\n  --#subtitlefontsize|1.0em\n  --#titlecardbackground|#800080\n  --#titlefontface|Tahoma\n  --#bodyfontface|Tahoma\n  --#tableborderradius|3px\n  --#buttonfontsize|small\n  --#buttontextcolor|#800080\n  --#buttonbordercolor|#FFFFFF\n  --#buttonbackground|#FFFFFF\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#whisper|self\n  --#sourceToken|@{selected|token_id}\n\n  --#title|Spell Book\n  --#leftsub|@{selected|character_name} (@{selected|caster_level})\n  --#debug|0\n\n  --+Spell Attack Bonus: |[b][*S:spell_attack_bonus][/b]\n  --+Spell Save DC: |[b][*S:spell_save_dc][/b]\n\n  --&SCA|[*S:spellcasting_ability]\n  --~SCA|string;substring;3;3;[&SCA]\n  --+Spell Casting Ability: |[b][&SCA][/b]\n\n  -->REPORTSPELLS|cantrip\n  -->REPORTSPELLS|1\n  -->REPORTSPELLS|2\n  -->REPORTSPELLS|3\n  -->REPORTSPELLS|4\n  -->REPORTSPELLS|5\n  -->REPORTSPELLS|6\n  -->REPORTSPELLS|7\n  -->REPORTSPELLS|8\n  -->REPORTSPELLS|9\n\n\n  --X| DONE\n\n--:REPORTSPELLS|Parameter: Level\n  --&zLvl|[%1%]\n\n  --Rfirst|@{selected|character_id};repeating_spell-[&zLvl]\n\n  --?\"[*R:spellname]\" -eq NoRepeatingAttributeLoaded|Done\n\t\n\t--&STblStyle1|\"width:100%;text-align:center;padding:5px;border-spacing:0px;border-collapse:collapse;text-shadow: 1px 1px 3px purple;border: 1px dashed purple;\"\n\t\n\t--&LvlDesc|Cantrip\n\t--&zLvlSlots|\n\n\t--?[&zLvl] -eq cantrip|SKIPCANTRIP\n\t\t--&LvlDesc|Level [&zLvl]\n\t\t--=SlotsTotal|[*S:lvl[&zLvl]_slots_total]\n\t\t--=SlotsExpended|[*S:lvl[&zLvl]_slots_expended]\n\t\t--&zLvlSlots|Slots [b][$SlotsExpended.Total][/b] of [b][$SlotsTotal.Total][/b] remaining\n\t--:SKIPCANTRIP|\n\n\t--&STbl|[t style=[&STblStyle1]][tr][td][&LvlDesc][/td][td][&zLvlSlots][/td][/tr][/t]\n\t--+|[&STbl]\n\n  --:DisplayLoop|\n    --?\"[*R:spellname]\" -eq NoRepeatingAttributeLoaded|Done\n\n\t\t\t--&zRIT|[r]\n\t\t\t--?\"[*R:spellritual]\" -inc \"Yes\"|ENDRIT\n\t\t\t\t--&zRIT|\n\t\t\t--:ENDRIT|\n\n\t\t\t--&zCON|[c]\n\t\t\t--?\"[*R:spellconcentration]\" -inc \"concentration=1\"|ENDCON\n\t\t\t\t--&zCON|\n\t\t\t--:ENDCON| \n\n    \t--?[&zLvl] -eq cantrip -or [*R:spellprepared] -eq 1|PREPARED\n\n\t\t\t\t--+|⬜️[rbutton]🔎[*R:spellname]::SPELLDETAILS;[*R:spellname]\\repeating_spell-[&zLvl]\\spellname[/rbutton] [i][*R:innate] [&zCON][&zRIT][/i]\n\n\t\t\t--^ENDIF-1|\n\n   \t\t--:PREPARED|\n\t\t\t\t\n\t\t\t\t--+|✅[rbutton]🔎[*R:spellname]::SPELLDETAILS;[*R:spellname]\\repeating_spell-[&zLvl]\\spellname[/rbutton] [i][*R:innate] [&zCON][&zRIT][/i]\n\n\t\t\t--:ENDIF-1|\n\n  \t--Rnext|\n\n  -->DisplayLoop|  \n\n  --:Done|\n--<|\n\n--:SPELLDETAILS|\n\n\t--/+ReEntryVal|[&reentryval]\n\t--~rArgs|string;split;\\;[&reentryval]\n\t--/+Split|[&rArgs]: [&rArgs1], [&rArgs2], [&rArgs3]\n\n\t--Rfind|@{selected|character_id};[&rArgs1];[&rArgs2];[&rArgs3]\n\t--Rdump|\n\n  --#title|[*R:spellname]  [*R:innate]\n  --#leftsub|@{selected|character_name} (@{selected|caster_level})\n  --#rightsub|[*R:spellschool] [*R:spelllevel]\n  --#oddRowBackground|#eeeeee\n  --#evenRowBackground|#ffffff\n\n\t--+Casting Time:|[*R:spellcastingtime]\n\t--+Range:|[*R:spellrange]\n\t--+Target:|[*R:spelltarget]\n\n\t--&zSCV|V\n\t--?\"[*R:spellcomp_v]\" -inc \"v=1\"|ENDSCV\n\t\t--&zSCV|\n\t--:ENDSCV|\n\n\t--&zSCS|S\n\t--?\"[*R:spellcomp_s]\" -inc \"s=1\"|ENDSCS\n\t\t--&zSCS|\n\t--:ENDSCS|\n\n\t--&zSCM|M\n\t--?\"[*R:spellcomp_m]\" -inc \"m=1\"|ENDSCM\n\t\t--&zSCM|\n\t--:ENDSCM|\n\n\t--+Components:|[&zSCV][&zSCS][&zSCM] [i]([*R:spellcomp_materials])[/i]\n\t\n\t--+Duration:|[*R:spellduration]\n\t\n\t--+|[*R:spelldescription]\n\t\n\t--~Len|string;length;[*R:spellathigherlevels]\n\t--?[$Len] -le 5|END_HV_CHECK\n\t\t--+|[b][i]At Higher Levels.[/i][/b][*R:spellathigherlevels]\n\t--:END_HV_CHECK|\n\t\n\t--+|[c][sheetbutton]💫 Cast Spell 🧙::@{selected|character_name}::[&rArgs2]_[*R:xxxActionIDxxxx]_spell[/sheetbutton][/c]\n\t\n\t--+|[c][b]Spell Save DC[/b] @{selected|spell_save_dc}[/c]\n\n\t--X|\n--<|\n\n--:PREPARESPELL|\n  --#title|Prepare Spell Toggle\n\t--+NOT YET SUPPORTED|\n\t--X|\n--<|\n\n}}\n",
            "order": -1
        },
        {
            "name": "Lighting-Report",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcards {{\n  --#title|UDL Lighting Report\n  --#leftsub|\n  --#rightsub|\n  --#oddRowBackground|#eeeeee\n  --#evenRowBackground|#ffffff\n  --#whisper|self\n  \n  --/|Loop through all of the tokens in \"alltokens\" \n  --~tokencnt|array;pagetokens;alltokens;@{selected|token_id}\n  --~TokenId|array;getfirst;alltokens\n\n  --?[&TokenId] -eq ArrayError|UDL_ENDLOOP\n\n  --:UDL_LOOPCHECK|\n\n    --&CharId|[*[&TokenId]:t-represents]\n\n    --/I added a flag in my player character sheets called PlayerCharacter and set it to 1 for all player controlled objects (themselves and their npc companions)\n    --?\"[*[&TokenId]:playercharacter]\" -eq 1|UDL_PC\n\n    --/|Otherwise - Skip targets that are not on the token layer or that don't represent characters\n    --?[*[&TokenId]:t-layer] -ne objects|UDL_CONTINUE\n    --?\"[*[&TokenId]:t-represents]\" -ninc \"-\"|UDL_CONTINUE\n    --?\"[*[&TokenId]:npc]\" -eq 1|UDL_CONTINUE\n\n    --:UDL_PC|\n\n    --&CharId|[*[&TokenId]:t-represents]\n\n    --/|Default icons to red X\n    --&Vis|❌\n    --&NightVis|❌\n    --&BrightLight|❌\n    --&LowLight|❌\n\n    --/|Update Emoji icons based on UDL settings\n    --?\"[*[&TokenId]:t-has_bright_light_vision]\" -ne \"true\"|NO_BLV --&Vis|👓 --:NO_BLV|\n    --?\"[*[&TokenId]:t-has_night_vision]\" -ne \"true\"|NO_NV --&NightVis|🌙 --:NO_NV|\n    --?\"[*[&TokenId]:t-emits_bright_light]\" -ne \"true\"|NO_BL --&BrightLight|💡 --:NO_BL|\n    --?\"[*[&TokenId]:t-emits_low_light]\" -ne \"true\"|NO_LL --&LowLight|🕯 --:NO_LL|\n\n    --+|[c][b] [*[&CharId]:character_name][/b] [/c]\n\n\t--+|[t style=\"width:100%\"][tr][td style=\"width:50%;text-align:left\"]Vision[/td]\n\t  \t  [td style=\"width:30%;text-align:center\"][&Vis][/td][td style=\"width:10%;text-align:center\"][/td][/tr]\n\t  \t[tr][td style=\"width:50%;text-align:left\"]Night Vision[/td]\n\t  \t  [td style=\"width:30%;text-align:center\"][&NightVis][/td]\n\t  \t  [td style=\"width:20%;text-align:right\"][*[&TokenId]:t-night_vision_distance] ft.[/td][/tr]\n\t  \t[tr][td style=\"width:50%\"][l]Emits Light[/l] [r][i]Bright[/i][/r][/td]\n\t  \t  [td style=\"width:30%;text-align:center\"][&BrightLight][/td]\n\t  \t  [td style=\"width:20%;text-align:right\"][*[&TokenId]:t-bright_light_distance] ft.[/td][/tr]  \n\t  \t[tr][td style=\"width:50%;text-align:right\"][i]Low[/i][/td]\n\t  \t  [td style=\"width:30%;text-align:center\"][&LowLight][/td]\n\t  \t  [td style=\"width:20%;text-align:right\"][*[&TokenId]:t-low_light_distance] ft.[/td][/tr][/t]\n\n    --:UDL_CONTINUE|\n    --~TokenId|array;getnext;alltokens\n    --?[&TokenId] -ne ArrayError|UDL_LOOPCHECK\n  --:UDL_ENDLOOP|\n  --X|\n}}",
            "order": -1
        },
        {
            "name": "PartyFunds-Report",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{ \n  --:___Formatting___|\n  --#title|Party Funds Report\n  --#titleCardBackground|#03038a\n  --#oddRowBackground|#d8d8e6\n  --#evenRowBackground|#FFFFFF\n  --#buttonbackground|#FFFFFF\n  --#buttontextcolor|#000000\n  --#buttonbordercolor|#000000\n  --#bodyFontSize|11px\n  --#whisper|self\n  --#debug|1\n\n--/|==================  Party Funds Report =======================\n\n  --~tokencnt|array;pagetokens;alltokens;@{selected|token_id}\n\n  --/|Loop through all of the tokens in \"alltokens\" \n  --~TokenId|array;getfirst;alltokens\n\n  --&CharId|[*[&TokenId]:t-represents]\n\n  --=GTtlGP|0 --=TtlCP|0 --=TtlSP|0 --=TtlEP|0 --=TtlGP|0 --=TtlPP|0 \n\n  --?[&TokenId] -eq ArrayError|PF_ENDLOOP\n\n  --&tbl|[t cellpadding=\"15\" border=\"1\" style=\"width:100%\"][tr][td style=\"width:12%;text-align:left\"][b]Name[/b][/td][td style=\"width:14%;text-align:center\"][b]cp[/b][/td][td style=\"width:14%;text-align:center\"][b]sp[/b][/td][td style=\"width:14%;text-align:center\"][b]ep[/b][/td][td style=\"width:14%;text-align:center\"][b]gp[/b][/td][td style=\"width:13%;text-align:center\"][b]pp[/b][/td][td style=\"width:19%;text-align:center\"][b]gp-eqiv[/b][/td][/tr]\n\n  --:PF_LOOPCHECK|\n    --&CharId|[*[&TokenId]:t-represents]\n\n    --/|Skip targets that are not on the token layer or that don't represent creatures\n    --?\"[*[&TokenId]:playercharacter]\" -ne 1|PF_CONTINUE\n\n    --&CharId|[*[&TokenId]:t-represents]\n    -->SHORT_NAME|[*[&CharId]:character_name]\n\n  --=STtlGP|[*[&CharId]:cp] / 100 \n  --=STtlGP|[*[&CharId]:sp] / 10 + [$STtlGP] \n  --=STtlGP|[*[&CharId]:ep] / 2 + [$STtlGP]\n  --=STtlGP|[*[&CharId]:gp] + [$STtlGP]\n  --=STtlGP|[*[&CharId]:pp]*10 + [$STtlGP]\n  --~STtlGP|math;round;[$STtlGP]\n  --=GTtlGP|[$GTtlGP] + [$STtlGP]\n\n  --=TtlCP|[*[&CharId]:cp] + [$TtlCP]\n  --=TtlSP|[*[&CharId]:sp] + [$TtlSP]\n  --=TtlEP|[*[&CharId]:ep] + [$TtlEP]\n  --=TtlGP|[*[&CharId]:gp] + [$TtlGP]\n  --=TtlPP|[*[&CharId]:pp] + [$TtlPP]\n\n  --&tbl|+ [tr][td style=\"width:12%;text-align:left\"][&gSN][/td][td style=\"width:14%;text-align:right\"][*[&CharId]:cp][/td][td style=\"width:14%;text-align:right\"][*[&CharId]:sp][/td][td style=\"width:14%;text-align:right\"][*[&CharId]:ep][/td][td style=\"width:14%;text-align:right\"][*[&CharId]:gp][/td][td style=\"width:14%;text-align:right\"][*[&CharId]:pp][/td][td style=\"width:18%;text-align:right\"][b][$STtlGP.Total][/b][/td][/tr]\n\n    --:PF_CONTINUE|\n    --~TokenId|array;getnext;alltokens\n    --?[&TokenId] -ne ArrayError|PF_LOOPCHECK\n  --:PF_ENDLOOP|\n\n  --&tbl|+ [tr][td style=\"width:12%;text-align:right\"][b]Total:[/b][/td][td style=\"width:14%;text-align:right\"][b][$TtlCP.Total][/b][/td][td style=\"width:14%;text-align:right\"][b][$TtlSP.Total][/b][/td][td style=\"width:14%;text-align:right\"][b][$TtlEP.Total][/b][/td][td style=\"width:14%;text-align:right\"][b][$TtlGP.Total][/b][/td][td style=\"width:14%;text-align:right\"][b][$TtlPP.Total][/b][/td][td style=\"width:18%;text-align:right\"][b][$GTtlGP.Total][/b][/td][/tr]\n\n  --&tbl|[&tbl] [/t]\n  --+|[&tbl]\n\n  --X|\n\n--/|==================  Utility Functions =======================\n--:SHORT_NAME|Shortens player name for reporting purposes (6 characters); Parameter:Character_Name\n  --~gSN|string;left;6;[%1%]\n--<| Return\n\n}}",
            "order": -1
        },
        {
            "name": "DM-Tools",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{ \n  --:|___DM TOOLS_2.0________\n  --:TOP|\n  --#reentrant|DMTools\n  --#title|DM Tools\n  --#titleCardBackground|#03038a\n  --/#oddRowBackground|#d8d8e6\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#buttonbackground|#FFFFFF\n  --#buttontextcolor|#0905f2\n  --#buttonbordercolor|#FFFFFF\n  --#bodyFontSize|11px\n  --#sourceToken|@{selected|token_id}\n  --#hidecard|0    \n\n  --#bodyFontSize|11px\n  --#whisper|gm\n  --#debug|1\n\n  --/|>SECTION_HEADER|[&SendingPlayerID]\n  \n  --/| This is my collection of utility macros grouped together by functionality\n  --/|  Comment out this section if you don't plan to utilze, or replace it with \n  --/|  your own macro utilities\n  -->SECTION_HEADER|Macros\n  --+|[c][button]&#x1F4CD;::~Mule|Page-Assets[/button]\n         [button]&#x1F4CB;::~Mule|Menu-Char-Token-Info[/button]\n         [button]&#x1F527;::~Mule|Menu-Utility-Macros[/button]\n         [button]&#x1F6A6;::~Mule|Menu-TurnOrder-Macros[/button]\n         [button]&#x1F3AD;::~Mule|Player-Macros[/button]\n         [button]&#x1F310;::~Mule|DM-Links[/button]\n         [button]&#x1F39A;::~Mule|NPC-Layers[/button]\n         [button]&#x1F9DB;::~Mule|NPC-Tools[/button]\n     [/c]\n\n  --/| This is a collection of reports that aggregate party information\n  -->SECTION_HEADER|Party Reports\n  --+|[c][rbutton]&#x1F497;::PARTY_HEALTH_REPORT[/rbutton]\n        [rbutton]&#x1F520;::PARTY_RESOURCES_REPORT[/rbutton]\n        [rbutton]&#x1F4B0;::PARTY_FUNDS_REPORT[/rbutton]\n        [rbutton]&#x1F453;::PARTY_UDL_REPORT[/rbutton]\n        [/c]\n\n  -->SECTION_HEADER|Character Reports\n  --~tokencnt|array;pagetokens;alltokens;@{selected|token_id}\n  --/|Loop through all of the tokens in \"alltokens\" \n  --~TokenId|array;getfirst;alltokens\n  --&CharId|[*[&TokenId]:t-represents]\n  --?[&TokenId] -eq ArrayError|ENDLOOP\n\n  --&TblStyle1|\"width:100%;text-align:left;padding:1px;border-spacing:1px;border-collapse:collapse;text-shadow: 0px 0px 0px black;border: 0px dashed black;\"\n  --&tbl|[t style=[&TblStyle1]]\n\n  --:LOOPCHECK|\n    --&CharId|[*[&TokenId]:t-represents]\n    --/+Debug|[*[&TokenId]:t-name]\n\n    --/|Characters with PlayerCharacter flag set are either characters or companions/party NPCs\n    --/|  If this script is used by others, just add a PlayerCharacter attribute, set to 1 to force any\n    --/|  character sheet to be flagged as a character.  The next couple tests assume this flag wasn't \n    --/|  set and continue to filter out other token types.  Not adding the attribute only means that \n    --/|  your party companions/npcs may not be included in the DM-Tools reporting.  \n    --?\"[*[&CharId]:PlayerCharacter]\" -eq \"1\"|START\n\n    --/|Skip tokens that are not on the token layer - this is a good indicator that the token is not associated with the party\n    --?[*[&TokenId]:t-layer] -ne objects|CONTINUE\n\n    --/|tokens that are represented by a character sheet and are not NPCs are probably characters\n    --?\"[*[&TokenId]:t-represents]\" -inc \"-\" -and \"[*[&TokenId]:NPC]\" -ne \"1\"|START\n\n    --/|If you made it this far, the token isn't in the party and we jump to the end of the loop and \n    --/|  advance to the next token\n    --^CONTINUE|\n   --:START|\n    --&CharId|[*[&TokenId]:t-represents]\n    -->SHORT_NAME|[*[&CharId]:character_name]\n--/+Debug|[&gSN]\n\n    --/| Create a row for each identified character.  Remove the [rbutton] syntax if you don't plan to use the PingToken API functionality\n    --&tbl|+ \n        [tr][td style=\"width:30%;text-align:left;background-color:#FFFFFF\"][b][rbutton][&gSN]::FIND_TOKEN;[&TokenId][/rbutton][/b][/td]\n          [td style=\"width:70%;text-align:right;background-color:#FFFFFF\"]\n            [rbutton]&#x1F4C3;::CHAR_DETAILS_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n            [rbutton]&#x1F3F9;::ATTACKS_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n            [rbutton]&#x1F393;::FEATURES_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n            [rbutton]&#x1F4AB;::SPELLBOOK_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n            [rbutton]&#x1F392;::INV_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n            [rbutton]&#x1F520;::RESOURCES_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n        [/td][/tr]\n\n    --:CONTINUE|\n    --~TokenId|array;getnext;alltokens\n    --?[&TokenId] -ne ArrayError|LOOPCHECK\n  --:ENDLOOP|\n\n  --&tbl|+ [/t] \n  --+|[&tbl]\n--X|\n\n--/|==================  Party Lighting Report =======================\n--:PARTY_UDL_REPORT| (UDL_)\n  --#title|UDL Lighting Report\n  --#leftsub|\n  --#rightsub|\n  --#oddRowBackground|#ffffff\n  --#buttonbackground|#ffffff\n  --#evenRowBackground|#d8d8e6\n  --#sourcetoken|@{selected|token_id}\n  --#activepage|[*S:t-pageid]\n  --#hidecard|0\n\n  --&UDLEnabled|&#x274C;\n  --&DLModeEnabled|&#x274C;\n  --&ExpModeEnabled|&#x274C;\n  --&LUonDrop|&#x274C;\n  --&ForceLOS|&#x274C;\n  --&RestrictMvmt|&#x274C;\n  --&GlobalLight|&#x274C;\n  --&ForceLightRefresh|&#x274C;\n  --&LLFoW|&#x274C;\n  --&LLLigting|&#x274C;\n\n  --?\"[*P:dynamic_lighting_enabled]\" -ne \"true\"|UDL1_END --&UDLEnabled|&#x1F4A1; --:UDL1_END|\n  --?\"[*P:daylight_mode_enabled]\" -ne \"true\"|UDL2_END --&DLModeEnabled|&#x1F4A1; --:UDL2_END|\n  --?\"[*P:explorer_mode]\" -ne \"basic\"|UDL3_END --&ExpModeEnabled|&#x1F4A1; --:UDL3_END|\n  --?\"[*P:lightupdatedrop]\" -ne \"true\"|UDL4_END --&LUonDrop|&#x1F4A1; --:UDL4_END|\n  --?\"[*P:lightenforcelos]\" -ne \"true\"|UDL5_END --&ForceLOS|&#x1F4A1; --:UDL5_END|\n  --?\"[*P:lightrestrictmove]\" -ne \"true\"|UDL6_END --&RestrictMvmt|&#x1F4A1; --:UDL6_END|\n  --?\"[*P:lightglobalillum]\" -ne \"true\"|UDL7_END --&GlobalLight|&#x1F4A1; --:UDL7_END|\n  --?\"[*P:force_lighting_refresh]\" -ne \"true\"|UDL8_END --&ForceLightRefresh|&#x1F4A1; --:UDL8_END|\n  --?\"[*P:showdarkness]\" -ne \"true\"|UDL9_END --&LLFoW|&#x1F4A1; --:UDL9_END|\n  --?\"[*P:showlighting]\" -ne \"true\"|UDLA_END --&LLLigting|&#x1F4A1; --:UDLA_END|\n\n  --&Tbl|[t style=\"width:100%;\"]\n  --&Tbl|+ [tr][td style=\"text-align:center\"][b][*P:name][/b][/td][/tr]\n  --&Tbl|+ [tr][td style=\"text-align:center\"][i](W:[*P:width] x H:[*P:height] Scale Units:[*P:scale_units] Scale Nbr:[*P:scale_number])[/i][/td][/tr][/t]\n  --+|[&Tbl]\n\n  --&Tbl|[t style=\"width:100%\"]\n  --&Tbl|+ [tr][td]UDL[/td][td][&UDLEnabled][/td][td]Daylight Mode[/td][td][&DLModeEnabled][/td][/tr]\n  --&Tbl|+ [tr][td]Explore[/td][td][&ExpModeEnabled][/td][td]Drop Mode[/td][td][&LUonDrop][/td][/tr]\n  --&Tbl|+ [tr][td]Restrict Mvmt[/td][td][&RestrictMvmt][/td][td]GM Opacity[/td][td][*P:fog_opacity][/td][/tr]\n  --&Tbl|+ [tr][td]Force LOS[/td][td][&ForceLOS][/td][td]Force Refresh[/td][td][&ForceLightRefresh][/td][/tr]\n  --&Tbl|+ [tr][td]Global Illum[/td][td][&GlobalLight][/td][td][/td][td][/td][/tr]\n  --&Tbl|+ [tr][td]FoW (LL)[/td][td][&LLFoW][/td][td]Legacy Lighting[/td][td][&LLLigting][/td][/tr]\n  --&Tbl|+ [/t]\n  --+|[&Tbl]\n\n  --/+/UDL Enabled?| [*P:dynamic_lighting_enabled]\n  --/+/Daylight Mode?| [*P:daylight_mode_enabled]\n  --/+/Explorer Mode?| [*P:explorer_mode]\n  --/+/Update on Drop?|[*P:lightupdatedrop]\n  --/+/Force LOS?|[*P:lightenforcelos]\n  --/+/Restrict Movement?|[*P:lightrestrictmove]\n  --/+/Fog(LL)/GM Darkness(UDL) Opacity|[*P:fog_opacity] \n  --/+/Global Light?|[*P:lightglobalillum]\n  --/+/Force Light Refresh?|[*P:force_lighting_refresh]\n  \n  --/|Loop through all of the tokens in \"alltokens\" \n  --~tokencnt|array;pagetokens;alltokens;@{selected|token_id}\n  --~TokenId|array;getfirst;alltokens\n\n  --?[&TokenId] -eq ArrayError|UDL_ENDLOOP\n\n  --:UDL_LOOPCHECK|\n\n  --&CharId|[*[&TokenId]:t-represents]\n\n  --/|I added a flag in my player character sheets called PlayerCharacter and set it to 1 for all player controlled objects (themselves and their npc companions)\n  --?\"[*[&TokenId]:playercharacter]\" -eq 1|UDL_PC\n\n  --/|Otherwise - Skip targets that are not on the token layer or that don't represent characters\n  --?[*[&TokenId]:t-layer] -ne objects|UDL_CONTINUE\n  --?\"[*[&TokenId]:t-represents]\" -ninc \"-\"|UDL_CONTINUE\n  --?\"[*[&TokenId]:npc]\" -eq 1|UDL_CONTINUE\n\n  --:UDL_PC|\n\n  --&CharId|[*[&TokenId]:t-represents]\n\n  --/|Default icons to red X\n  --&Vis|&#x274C;\n  --&NightVis|&#x274C;\n  --&BrightLight|&#x274C;\n  --&LowLight|&#x274C;\n\n  --/|Update Emoji icons based on UDL settings\n  --?\"[*[&TokenId]:t-has_bright_light_vision]\" -ne \"true\"|NO_BLV --&Vis|&#x1F453; --:NO_BLV|\n  --?\"[*[&TokenId]:t-has_night_vision]\" -ne \"true\"|NO_NV --&NightVis|&#x1F319; --:NO_NV|\n  --?\"[*[&TokenId]:t-emits_bright_light]\" -ne \"true\"|NO_BL --&BrightLight|&#x1F4A1; --:NO_BL|\n  --?\"[*[&TokenId]:t-emits_low_light]\" -ne \"true\"|NO_LL --&LowLight|&#x1F56F; --:NO_LL|\n\n  --+|[c][b][rbutton][*[&CharId]:character_name]::SET_UDL;[&CharId]\\[&TokenId][/rbutton][/b][/c]\n\n  --+|[t style=\"width:100%\"][tr][td style=\"width:50%;text-align:left\"]Vision[/td]\n        [td style=\"width:30%;text-align:center\"][&Vis][/td][td style=\"width:10%;text-align:center\"][/td][/tr]\n      [tr][td style=\"width:50%;text-align:left\"]Night Vision[/td]\n        [td style=\"width:30%;text-align:center\"][&NightVis][/td]\n        [td style=\"width:20%;text-align:right\"][*[&TokenId]:t-night_vision_distance] ft.[/td][/tr]\n      [tr][td style=\"width:50%\"][l]Emits Light[/l] [r][i]Bright[/i][/r][/td]\n        [td style=\"width:30%;text-align:center\"][&BrightLight][/td]\n        [td style=\"width:20%;text-align:right\"][*[&TokenId]:t-bright_light_distance] ft.[/td][/tr]  \n      [tr][td style=\"width:50%;text-align:right\"][i]Low[/i][/td]\n        [td style=\"width:30%;text-align:center\"][&LowLight][/td]\n        [td style=\"width:20%;text-align:right\"][*[&TokenId]:t-low_light_distance] ft.[/td][/tr][/t]\n\n\n  --/|Can't get to the Player object yet - Controlled by returns PlayerIds, not Names\n  --/&CB|[*[&CharId]:controlledby]\n  --/~CBAry|array;split;,;&CB\n  --/+|[i]Controlled By:[&CBAry1] [*[&CBAry1]:name] / [*[&CBAry1]:displayname] / [*[&CBAry1]:_displayname][/i]\n\n  --:UDL_CONTINUE|\n  --~TokenId|array;getnext;alltokens\n  --?[&TokenId] -ne ArrayError|UDL_LOOPCHECK\n\n--:UDL_ENDLOOP|\n-->FOOTER_BUTTONS_PARTY|\n--X|\n\n--:UDL_PAGE_SETTINGS| Future addition\n--<|\n\n--:UDL_PLAYER_CONTROLLEDBY_NAMES| Future addition\n\n--<|\n\n--/|================== SET_UDL function =======================\n--:SET_UDL|CharId; TokenID; \n  --#hidecard|0\n  --~Arg|string;split;\\;[&reentryval]\n  --&CharId|[&Arg1]\n  --&TokenId|[&Arg2]\n  --#sourceToken|[&TokenId]\n  --#title|Set Updated Dynamic Lighting\n  --#leftsub|[*[&TokenId]:t-name]\n\n  --#oddRowBackground|#ffffff\n  --#evenRowBackground|#ffffff\n\n\n  --&tStyle|style=\"width:100%;padding:1px;border-spacing:0px;border-collapse:collapse;text-shadow: 0px 0px 0px black;border:0px dashed black;\"\n  --&trStyle1|style=\"border:0px dashed black;\"\n  --&tdStyle1|style=\"width:30%;text-align:left;background-color:#FFFFFF;font-size:80%\"\n  --&tdStyle2|style=\"width:70%;text-align:left;background-color:#FFFFFF;font-size:80%\"\n\n  --+|[t [&tStyle]]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Reset::SET_TOKEN_UDL;[&TokenId]\\1[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Normal::SET_TOKEN_UDL;[&TokenId]\\2[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Dark Vision (60')::SET_TOKEN_UDL;[&TokenId]\\3[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Dark Vision (90')::SET_TOKEN_UDL;[&TokenId]\\4[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Dark Vision (120')::SET_TOKEN_UDL;[&TokenId]\\5[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Candle (Carried)::SET_TOKEN_UDL;[&TokenId]\\6[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Candle (Stationary)::SET_TOKEN_UDL;[&TokenId]\\7[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Torch/Light (Carried)::SET_TOKEN_UDL;[&TokenId]\\8[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Torch/Light (Stationary)::SET_TOKEN_UDL;[&TokenId]\\9[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Hooded Lantern (Carried)::SET_TOKEN_UDL;[&TokenId]\\10[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Hooded Lantern (Covered)::SET_TOKEN_UDL;[&TokenId]\\11[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Hooded Lantern (Stationary)::SET_TOKEN_UDL;[&TokenId]\\12[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Bullseye Lantern::SET_TOKEN_UDL;[&TokenId]\\13[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Flashlight::SET_TOKEN_UDL;[&TokenId]\\14[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Camp Fire::SET_TOKEN_UDL;[&TokenId]\\15[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Bon Fire::SET_TOKEN_UDL;[&TokenId]\\16[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Fez (Soft Light)::SET_TOKEN_UDL;[&TokenId]\\17[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Street Light::SET_TOKEN_UDL;[&TokenId]\\18[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Spot Light::SET_TOKEN_UDL;[&TokenId]\\19[/rbutton][/td][/tr]\n      [/t]\n-->FOOTER_BUTTONS_PARTY|      \n--X|\n--<|\n--:SET_TOKEN_UDL|TokenId; LightingID\n  --#hidecard|1\n  --~Arg|string;split;\\;[&reentryval]\n  --&TokenId|[&Arg1]\n  --&LId|[&Arg2]\n  --#title|Set Updated Dynamic Lighting\n  --#leftsub|[*[&TokenId]:t-name]\n\n  --+UDL Debug Args:|[*[&TokenId]:t-name]([&TokenId]) - [&LId] \n\n  --C[&LId]|1:STU_1|2:STU_2|3:STU_3|4:STU_4|5:STU_5|6:STU_6|7:STU_7|8:STU_8|9:STU_9|10:STU_10|11:STU_11|12:STU_12|13:STU_13|14:STU_14|15:STU_15|16:STU_16|17:STU_17|18:STU_18|19:STU_19\n    --+Err:|Ivalid Lighting Entry - ([&LId])\n    --+UDL Debug Err| [&LId]\n    --X|\n\n    --:STU_1|Reset \n      --+UDL Debug Case| [&LId] - STU_1\n      --&Vision|_off has_bright_light_vision has_night_vision emits_bright_light emits_low_light has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _set night_vision_distance#0 bright_light_distance#0 low_light_distance#0 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0\n      --^APPLY_VISION|\n\n    --:STU_2|Normal \n      --+UDL Debug Case| [&LId] - STU_2\n      --&Vision|_off has_night_vision emits_bright_light emits_low_light has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on has_bright_light_vision   _set night_vision_distance#0 bright_light_distance#0 low_light_distance#0 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0\n      --^APPLY_VISION|\n\n    --:STU_3|Dark Vision (60') \n      --+UDL Debug Case| [&LId] - STU_3\n      --&Vision|_off emits_bright_light emits_low_light has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on has_bright_light_vision  has_night_vision  _set night_vision_distance#60 bright_light_distance#0 low_light_distance#0 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0\n      --^APPLY_VISION|\n\n    --:STU_4|Dark Vision (90')\n      --+UDL Debug Case| [&LId] - STU_4\n      --&Vision|_off emits_bright_light emits_low_light has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on has_bright_light_vision  has_night_vision  _set night_vision_distance#90 bright_light_distance#0 low_light_distance#0 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0\n      --^APPLY_VISION|\n\n    --:STU_5|Dark Vision (120')\n      --+UDL Debug Case| [&LId] - STU_5\n      --&Vision|_off emits_bright_light emits_low_light has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on has_bright_light_vision  has_night_vision  _set night_vision_distance#120 bright_light_distance#0 low_light_distance#0 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0\n      --^APPLY_VISION|\n\n    --:STU_6|Candle (Carried)\n      --+UDL Debug Case| [&LId] - STU_6\n      --&Vision|_off has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on has_bright_light_vision  emits_bright_light emits_low_light  _set night_vision_distance#0 bright_light_distance#5 low_light_distance#10 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0\n      --^APPLY_VISION|      \n   \n    --:STU_7|Candle (Stationary)\n      --+UDL Debug Case| [&LId] - STU_7\n      --&Vision|_off has_bright_light_vision  has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on emits_bright_light emits_low_light  _set night_vision_distance#0 bright_light_distance#5 low_light_distance#10 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0\n      --^APPLY_VISION|\n\n    --:STU_8|Torch/Light (Carried)\n      --+UDL Debug Case| [&LId] - STU_8\n      --&Vision|_off has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on has_bright_light_vision  emits_bright_light emits_low_light  _set night_vision_distance#0 bright_light_distance#20 low_light_distance#20 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0\n      --^APPLY_VISION|\n\n    --:STU_9|Torch/Light (Stationary)\n      --+UDL Debug Case| [&LId] - STU_9\n      --&Vision|_off has_bright_light_vision  has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on emits_bright_light emits_low_light  _set night_vision_distance#0 bright_light_distance#20 low_light_distance#20 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0\n      --^APPLY_VISION|  \n\n    --:STU_10|Hooded Lantern (Carried)\n      --+UDL Debug Case| [&LId] - STU_10\n      --&Vision|_off has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on has_bright_light_vision  emits_bright_light emits_low_light  _set night_vision_distance#0 bright_light_distance#30 low_light_distance#30 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0\n      --^APPLY_VISION|\n\n    --:STU_11|Hooded Lantern (Covered) \n      --+UDL Debug Case| [&LId] - STU_11\n      --&Vision|_off has_bright_light_vision  has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on emits_bright_light emits_low_light  _set night_vision_distance#0 bright_light_distance#0 low_light_distance#5 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0\n      --^APPLY_VISION|\n\n    --:STU_12|Hooded Lantern (Stationary) \n      --+UDL Debug Case| [&LId] - STU_12\n      --&Vision|_off has_bright_light_vision  has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on emits_bright_light emits_low_light  _set night_vision_distance#0 bright_light_distance#30 low_light_distance#30 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0\n      --^APPLY_VISION|\n\n    --:STU_13|Bullseye Lantern\n      --+UDL Debug Case| [&LId] - STU_13\n      --&Vision|_off has_night_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on has_bright_light_vision  emits_bright_light emits_low_light has_limit_field_of_vision  _set night_vision_distance#0 bright_light_distance#60 low_light_distance#60 limit_field_of_vision_center#60 limit_field_of_vision_total#60 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 \n      --^APPLY_VISION|\n\n    --:STU_14|Flashlight\n      --+UDL Debug Case| [&LId] - STU_14\n      --&Vision|_off has_night_vision has_limit_field_of_night_vision has_directional_dim_light  _on has_bright_light_vision  emits_bright_light emits_low_light has_limit_field_of_vision has_directional_bright_light  _set night_vision_distance#0 bright_light_distance#100 low_light_distance#100 limit_field_of_vision_center#60 limit_field_of_vision_total#20 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 \n      --^APPLY_VISION|\n\n    --:STU_15|Camp Fire\n      --+UDL Debug Case| [&LId] - STU_15\n      --&Vision|_off has_bright_light_vision  has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on emits_bright_light emits_low_light  _set night_vision_distance#0 bright_light_distance#70 low_light_distance#70 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 \n      --^APPLY_VISION|\n\n    --:STU_16|Bon Fire\n      --+UDL Debug Case| [&LId] - STU_16\n      --&Vision|_off has_bright_light_vision  has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on emits_bright_light emits_low_light  _set night_vision_distance#0 bright_light_distance#100 low_light_distance#100 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 | \n      --^APPLY_VISION|\n\n    --:STU_17|Fez (Soft Light)\n      --+UDL Debug Case| [&LId] - STU_17\n      --&Vision|_off has_bright_light_vision  has_night_vision emits_bright_light has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on emits_low_light  _set night_vision_distance#0 bright_light_distance#0 low_light_distance#20 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 | \n      --^APPLY_VISION|\n\n    --:STU_18|Street Light\n      --+UDL Debug Case| [&LId] - STU_18\n      --&Vision|_off has_bright_light_vision  has_limit_field_of_vision has_limit_field_of_night_vision has_directional_bright_light has_directional_dim_light  _on emits_bright_light emits_low_light  _set night_vision_distance#0 bright_light_distance#50 low_light_distance#25 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#0 directional_bright_light_total#0 directional_dim_light_center#0 directional_dim_light_total#0 | \n      --^APPLY_VISION|\n\n    --:STU_19|Spot Light\n      --+UDL Debug Case| [&LId] - STU_19\n      --&Vision|_off has_night_vision has_limit_field_of_vision has_limit_field_of_night_vision  _on has_bright_light_vision  emits_bright_light emits_low_light has_directional_bright_light has_directional_dim_light  _set night_vision_distance#0 bright_light_distance#30 low_light_distance#30 limit_field_of_vision_center#0 limit_field_of_vision_total#0 limit_field_of_night_vision_center#0 limit_field_of_night_vision_total#0 directional_bright_light_center#90 directional_bright_light_total#20 directional_dim_light_center#90 directional_dim_light_total#30 |\n      --^APPLY_VISION|\n\n  --:APPLY_VISION|\n\n  --+UDL ApplyVision| [&Vision]\n  --@token-mod|[&Vision] _ids [&TokenId] _ignore-selected\n\n-->FOOTER_BUTTONS_PARTY|\n--X|\n--<|\n\n--/|==================  Party Health Report =======================\n--:PARTY_HEALTH_REPORT| (PH_)\n  --#hidecard|0\n    \n  --#title|Party Health\n  --#leftsub|\n  --#rightsub|\n  --#oddRowBackground|#d8d8e6\n  --#evenRowBackground|#ffffff\n\n  --~tokencnt|array;pagetokens;alltokens;@{selected|token_id}\n\n  --/|Loop through all of the tokens in \"alltokens\" \n  --~TokenId|array;getfirst;alltokens\n\n  --&CID|[*[&TokenId]:t-represents]\n  --?[&TokenId] -eq ArrayError|PH_ENDLOOP\n\n  --&tbl|[t cellpadding=\"15\" border=\"1\" style=\"width:100%\"][tr][td style=\"width:20%;text-align:left\"][b]Char[/b][/td][td style=\"width:15%;text-align:center\"][b]AC[/b][/td][td style=\"width:15%;text-align:center\"][b]PP[/b][/td][td style=\"width:30%;text-align:center\"][b]HP/Max[/b][/td][td style=\"width:20%;text-align:center\"][b]Mad Lvl[/b][/td] [/tr]\n\n  --:PH_LOOPCHECK|\n    --&CID|[*[&TokenId]:t-represents]\n\n    --/|Skip targets that are not on the token layer or that don't represent creatures\n    --?[*[&TokenId]:t-layer] -ne objects|PH_CONTINUE\n    --?\"[*[&TokenId]:t-represents]\" -ninc \"-\"|PH_CONTINUE\n    --?\"[*[&TokenId]:npc]\" -eq 1|PH_CONTINUE\n\n    --&CID|[*[&TokenId]:t-represents]\n    -->SHORT_NAME|[*[&CID]:character_name]\n\n    --&tbl|+ [tr][td style=\"width:20%;text-align:left\"][b][&gSN][/b][/td][td style=\"width:15%;text-align:center\"][*[&CID]:ac][/td][td style=\"width:15%;text-align:center\"][*[&CID]:passive_wisdom][/td][td style=\"width:30%;text-align:center\"][*[&CID]:hp] / [*[&CID]:hp^][/td][td style=\"width:20%;text-align:center\"][*[&CID]:madness_level][/td] [/tr]\n\n    --:PH_CONTINUE|\n    --~TokenId|array;getnext;alltokens\n    --?[&TokenId] -ne ArrayError|PH_LOOPCHECK\n  --:PH_ENDLOOP|\n\n  --&tbl|[&tbl] [/t]\n  --+|[&tbl]\n\n-->FOOTER_BUTTONS_PARTY|\n--X|\n--<|\n\n--/|==================  Party Funds Report =======================\n--:PARTY_FUNDS_REPORT| (PF_)\n  --#hidecard|0\n  --#title|Party Funds\n  --#leftsub|\n  --#rightsub|\n  --#oddRowBackground|#d8d8e6\n  --#evenRowBackground|#ffffff\n\n  --~tokencnt|array;pagetokens;alltokens;@{selected|token_id}\n\n  --/|Loop through all of the tokens in \"alltokens\" \n  --~TokenId|array;getfirst;alltokens\n\n  --&CharId|[*[&TokenId]:t-represents]\n\n  --=GTtlGP|0 --=TtlCP|0 --=TtlSP|0 --=TtlEP|0 --=TtlGP|0 --=TtlPP|0 \n\n  --?[&TokenId] -eq ArrayError|PF_ENDLOOP\n\n  --&tbl|[t cellpadding=\"15\" border=\"1\" style=\"width:100%\"][tr][td style=\"width:12%;text-align:left\"][b]Name[/b][/td][td style=\"width:14%;text-align:right\"][b]cp[/b][/td][td style=\"width:14%\";text-align:right\"][r][b]sp[/b][/r][/td][td style=\"width:14%;text-align:right\"][b]ep[/b][/td][td style=\"width:14%;text-align:right\"][b]gp[/b][/td][td style=\"width:14%;text-align:right\"][b]pp[/b][/td][td style=\"width:18%;text-align:right\"][b]Ttl gp[/b][/td][/tr]\n\n  --:PF_LOOPCHECK|\n    --&CharId|[*[&TokenId]:t-represents]\n\n    --/|Skip targets that are not on the token layer or that don't represent creatures\n    --?[*[&TokenId]:t-layer] -ne objects|PF_CONTINUE\n    --?\"[*[&TokenId]:t-represents]\" -ninc \"-\"|PF_CONTINUE\n    --?\"[*[&TokenId]:npc]\" -eq 1|PF_CONTINUE\n\n    --&CharId|[*[&TokenId]:t-represents]\n    -->SHORT_NAME|[*[&CharId]:character_name]\n\n  --=STtlGP|[*[&CharId]:cp] / 100 \n  --=STtlGP|[*[&CharId]:sp] / 10 + [$STtlGP] \n  --=STtlGP|[*[&CharId]:ep] / 2 + [$STtlGP]\n  --=STtlGP|[*[&CharId]:gp] + [$STtlGP]\n  --=STtlGP|[*[&CharId]:pp]*10 + [$STtlGP]\n  --~STtlGP|math;round;[$STtlGP]\n  --=GTtlGP|[$GTtlGP] + [$STtlGP]\n\n  --=TtlCP|[*[&CharId]:cp] + [$TtlCP]\n  --=TtlSP|[*[&CharId]:sp] + [$TtlSP]\n  --=TtlEP|[*[&CharId]:ep] + [$TtlEP]\n  --=TtlGP|[*[&CharId]:gp] + [$TtlGP]\n  --=TtlPP|[*[&CharId]:pp] + [$TtlPP]\n\n  --&tbl|+ [tr][td style=\"width:12%;text-align:left\"][&gSN][/td][td style=\"width:14%;text-align:right\"][*[&CharId]:cp][/td][td style=\"width:14%;text-align:right\"][*[&CharId]:sp][/td][td style=\"width:14%;text-align:right\"][*[&CharId]:ep][/td][td style=\"width:14%;text-align:right\"][*[&CharId]:gp][/td][td style=\"width:14%;text-align:right\"][*[&CharId]:pp][/td][td style=\"width:18%;text-align:right\"][b][$STtlGP.Total][/b][/td][/tr]\n\n    --:PF_CONTINUE|\n    --~TokenId|array;getnext;alltokens\n    --?[&TokenId] -ne ArrayError|PF_LOOPCHECK\n  --:PF_ENDLOOP|\n\n  --&tbl|+ [tr][td style=\"width:12%;text-align:right\"][b]Total:[/b][/td][td style=\"width:14%;text-align:right\"][b][$TtlCP.Total][/b][/td][td style=\"width:14%;text-align:right\"][b][$TtlSP.Total][/b][/td][td style=\"width:14%;text-align:right\"][b][$TtlEP.Total][/b][/td][td style=\"width:14%;text-align:right\"][b][$TtlGP.Total][/b][/td][td style=\"width:14%;text-align:right\"][b][$TtlPP.Total][/b][/td][td style=\"width:18%;text-align:right\"][b][$GTtlGP.Total][/b][/td][/tr]\n\n  --&tbl|[&tbl] [/t]\n  --+|[&tbl]\n\n-->FOOTER_BUTTONS_PARTY| Add Footer Buttons\n  --X|\n--<|\n\n--/|==================  Party Resources Report =======================\n--:PARTY_RESOURCES_REPORT| (PR_)\n  --#hidecard|0\n  --#title|Party Resources\n  --#leftsub|\n  --#rightsub|\n  --#oddRowBackground|#d8d8e6\n  --#evenRowBackground|#ffffff\n\n  --~tokencnt|array;pagetokens;alltokens;@{selected|token_id}\n\n  --/|Loop through all of the tokens in \"alltokens\" \n  --~TokenId|array;getfirst;alltokens\n  --&CharId|[*[&TokenId]:t-represents]\n\n  --?[&TokenId] -eq ArrayError|PR_ENDLOOP\n\n  --&tbl|[t cellpadding=\"15\" border=\"1\" style=\"width:100%\"][tr][td style=\"width:15%;text-align:left\"][b]Char[/b][/td][td style=\"width:45%;text-align:left\"][b]Resource[/b][/td][td style=\"width:20%;text-align:center\"][b]Avail[/b][/td][td style=\"width:20%;text-align:center\"][b]Total[/b][/td][/tr]\n\n  --:PR_LOOPCHECK|\n    --&CharId|[*[&TokenId]:t-represents]\n\n    --/|Skip targets that are not on the token layer or that don't represent creatures\n    --?[*[&TokenId]:t-layer] -ne objects|PR_CONTINUE\n    --?\"[*[&TokenId]:t-represents]\" -ninc \"-\"|PR_CONTINUE\n    --?\"[*[&TokenId]:npc]\" -eq 1|PR_CONTINUE\n\n    --&CharId|[*[&TokenId]:t-represents]\n    -->SHORT_NAME|[*[&CharId]:character_name]\n\n    --&tbl|+ [tr][td style=\"width:15%;text-align:left\"][&gSN][/td][td style=\"width:45%;text-align:left\"][*[&CharId]:class_resource_name][/td][td style=\"width:20%;text-align:center\"][*[&CharId]:class_resource][/td][td style=\"width:20%;text-align:center\"][*[&CharId]:class_resource^][/td][/tr]\n\n    --&tbl|+ [tr][td style=\"width:15%;text-align:left\"][/td][td style=\"width:45%;text-align:left\"][*[&CharId]:other_resource_name][/td][td style=\"width:20%;text-align:center\"][*[&CharId]:other_resource][/td][td style=\"width:20%;text-align:center\"][*[&CharId]:other_resource^][/td][/tr]\n    \n    --:PR_CONTINUE|\n    --~TokenId|array;getnext;alltokens\n    --?[&TokenId] -ne ArrayError|PR_LOOPCHECK\n  --:PR_ENDLOOP|\n\n  --&tbl|[&tbl] [/t]\n  --+|[&tbl]\n\n-->FOOTER_BUTTONS_PARTY| Add Footer Buttons\n  --X|\n\n--<|\n\n--/|==================  Character Details Report =======================\n--:CHAR_DETAILS_REPORT| CDR_\n  \n  --#hidecard|0\n  --~Arg|string;split;\\;[&reentryval]\n  --&CharId|[&Arg1]\n  --&TokenId|[&Arg2]\n  --#sourceToken|[&TokenId]\n  --#title|[*[&TokenId]:t-name]\n  --#rightsub|[*[&CharId]:race]\n\n  --#oddRowBackground|#ffffff\n  --#evenRowBackground|#ffffff\n\n\n  --&t|[*[&CharId]:class]-[*[&CharId]:base_level]\n  --?\"[*[&CharId]:multiclass1_flag]\" -eq \"0\"|CDR_DONE1 --&t|+ /[*[&CharId]:multiclass1] - [*[&CharId]:multiclass1_lvl]\n  --?\"[*[&CharId]:multiclass2_flag]\" -eq \"0\"|CDR_DONE1 --&t|+ /[*[&CharId]:multiclass2] - [*[&CharId]:multiclass2_lvl] \n  --?\"[*[&CharId]:multiclass3_flag]\" -eq \"0\"|CDR_DONE1 --&t|+ /[*[&CharId]:multiclass3] - [*[&CharId]:multiclass3_lvl]\n  --:CDR_DONE1| \n  --#leftsub|[&t]\n\n  --+|[t style=\"border:2px solid black;width:100%\"][tr style=\"background-color:#d8d8e6\"][td style=\"width:15%;text-align:center\"][b]Str[/b][/td] [td style=\"width:15%;text-align:center\"][b]Dex[/b][/td] \n        [td style=\"width:15%;text-align:center\"][b]Con[/b][/td][td style=\"width:15%;text-align:center\"][b]Int[/b][/td] [td style=\"width:15%;text-align:center\"][b]Wis[/b][/td][td style=\"width:15%;text-align:center\"][b]Cha[/b][/td][/tr]\n      [tr style=\"border:1px solid black\"]\n        [td style=\"width:15%;text-align:center\"][*[&CharId]:strength] ([*[&CharId]:strength_mod])[/td] [td style=\"width:15%;text-align:center\"][*[&CharId]:dexterity] ([*[&CharId]:dexterity_mod])[/td] \n        [td style=\"width:15%;text-align:center\"][*[&CharId]:constitution] ([*[&CharId]:constitution_mod])[/td][td style=\"width:15%;text-align:center\"][*[&CharId]:intelligence] ([*[&CharId]:intelligence_mod])[/td]\n        [td style=\"width:15%;text-align:center\"][*[&CharId]:wisdom] ([*[&CharId]:wisdom_mod])[/td][td style=\"width:15%;text-align:center\"][*[&CharId]:charisma] ([*[&CharId]:charisma_mod])[/td][/tr][/t]\n      \n  --+|[t style=\"border:0px solid black;width:96%\"]\n        [tr][td style=\"width:25%;text-align:right\"][b]AC: [/b] [/td][td style=\"width:20%;text-align:center\"][*[&CharId]:ac][/td]\n            [td style=\"width:25%;text-align:right\"][b]HP: [/b] [/td][td style=\"width:20%;text-align:center\"][*[&CharId]:hp]/[*[&CharId]:hp^][/td][/tr]\n        [tr][td style=\"width:25%;text-align:right\"][b]Speed: [/b] [/td][td style=\"width:20%;text-align:center\"][*[&CharId]:speed][/td]\n            [td style=\"width:25%;text-align:right\"][b]PP: [/b] [/td][td style=\"width:20%;text-align:center\"][*[&CharId]:passive_wisdom][/td][/tr]\n        [tr][td style=\"width:25%;text-align:right\"][b]Init B.: [/b] [/td][td style=\"width:20%;text-align:center\"][*[&CharId]:initiative_bonus][/td]\n            [td style=\"width:25%;text-align:right\"][b]Prof B.: [/b] [/td][td style=\"width:20%;text-align:center\"][*[&CharId]:pb][/td][/tr][/t]\n\n\n  --/| Strength based saves/skills\n  --+|[t style=\"border:1px solid black;width:100%\"]\n        [tr style=\"background-color:#d8d8e6\"][td colspan=4 style=\"width:100%;text-align:center\"][b]Strength [i](Save:[*[&CharId]:strength_save_bonus])[/i][/b][/td][/tr]\n        [tr][td colspan=4 style=\"width:100%;text-align:center\"]Athletics: [*[&CharId]:athletics_bonus][/td][/tr][/t]\n\n  --/| Dex based saves/skills\n  --+|[t style=\"border:1px solid black;width:100%\"]\n        [tr style=\"background-color:#d8d8e6\"][td colspan=4 style=\"width:100%;text-align:center\"][b]Dexterity [i](Save:[*[&CharId]:dexterity_save_bonus])[/i][/b][/td][/tr]\n        [tr][td style=\"width:40%;text-align:right\"]Acrobatics:[/td]\n            [td style=\"width:10%;text-align:center\"] [*[&CharId]:acrobatics_bonus][/td]\n            [td style=\"width:40%;text-align:right\"]SoH:[/td]\n            [td style=\"width:10%;text-align:center\"][*[&CharId]:sleight_of_hand_bonus][/td][/tr]\n        [tr][td colspan=4 style=\"width:100%;text-align:center\"]Stealth: [*[&CharId]:stealth_bonus][/td][/tr][/t]\n\n  --/| Con based saves/skills\n  --+|[t style=\"border:1px solid black;width:100%\"]\n        [tr style=\"background-color:#d8d8e6\"][td colspan=4 style=\"width:100%;text-align:center\"][b]Constitution [i](Save:[*[&CharId]:constitution_save_bonus])[/i][/b][/td][/tr][/t]          \n\n  --/| Intel based saves/skills\n  --+|[t style=\"border:1px solid black;width:100%\"]\n      [tr style=\"background-color:#d8d8e6\"][td colspan=4 style=\"width:100%;text-align:center\"][b]Intelligence [i](Save:[*[&CharId]:intelligence_save_bonus])[/i][/b][/td][/tr]        \n        [tr][td style=\"width:40%;text-align:right\"]Arcana:[/td]\n            [td style=\"width:10%;text-align:center\"] [*[&CharId]:arcana_bonus][/td]\n            [td style=\"width:40%;text-align:right\"]History:[/td]\n            [td style=\"width:10%;text-align:center\"] [*[&CharId]:history_bonus][/td][/tr]\n        [tr][td style=\"width:40%;text-align:right\"]Investigation:[/td]\n            [td style=\"width:10%;text-align:center\"] [*[&CharId]:investigation_bonus][/td]\n            [td style=\"width:40%;text-align:right\"]Nature:[/td]\n            [td style=\"width:10%;text-align:center\"] [*[&CharId]:nature_bonus][/td][/tr]\n        [tr][td colspan=4 style=\"width:100%;text-align:center\"]Religion:   [*[&CharId]:religion_bonus][/td][/tr][/t]\n\n  --/| Wisdom based saves/skills\n  --+|[t style=\"border:1px solid black;width:100%\"]\n      [tr style=\"background-color:#d8d8e6\"][td colspan=4 style=\"width:100%;text-align:center\"][b]Wisdom [i](Save:[*[&CharId]:wisdom_save_bonus])[/i][/b][/td][/tr]        \n        [tr][td style=\"width:40%;text-align:right\"]Animal Hand:[/td]\n            [td style=\"width:10%;text-align:center\"] [*[&CharId]:animal_handling_bonus][/td]\n            [td style=\"width:40%;text-align:right\"]Insight:[/td]\n            [td style=\"width:10%;text-align:center\"] [*[&CharId]:insight_bonus][/td][/tr]\n        [tr][td style=\"width:40%;text-align:right\"]Medicine:[/td]\n            [td style=\"width:10%;text-align:center\"] [*[&CharId]:medicine_bonus][/td]\n            [td style=\"width:40%;text-align:right\"]Perception:[/td]\n            [td style=\"width:10%;text-align:center\"] [*[&CharId]:perception_bonus][/td][/tr]\n        [tr][td colspan=4 style=\"width:100%;text-align:center\"]Survival:  [*[&CharId]:survival_bonus][/td][/tr][/t]\n\n  --/| Charisma based saves/skills\n  --+|[t style=\"border:1px solid black;width:100%\"]\n      [tr style=\"background-color:#d8d8e6\"][td colspan=4 style=\"width:100%;text-align:center\"][b]Charisma [i](Save:[*[&CharId]:charisma_save_bonus])[/i][/b][/td][/tr]        \n        [tr][td style=\"width:40%;text-align:right\"]Deciption:[/td]\n            [td style=\"width:10%;text-align:center\"] [*[&CharId]:deception_bonus][/td]\n            [td style=\"width:40%;text-align:right\"]Intimidation:[/td]\n            [td style=\"width:10%;text-align:center\"] [*[&CharId]:intimidation_bonus][/td][/tr]\n        [tr][td style=\"width:40%;text-align:right\"]Performance:[/td]\n            [td style=\"width:10%;text-align:center\"] [*[&CharId]:performance_bonus][/td]\n            [td style=\"width:40%;text-align:right\"]persuasion:[/td]\n            [td style=\"width:10%;text-align:center\"] [*[&CharId]:persuasion_bonus][/td][/tr][/t]\n\n\n  --/| ===== Global Attack Modifiers\n  --&tbl|[t style=\"width:100%;text-align:center\"][tr style=\"background-color:#d8d8e6\"][td colspan=2][b][c] Global Modifiers [/c][/b][/td][/tr]\n  --Rfirst|[&CharId];repeating_tohitmod\n  --:CDR_LOOP1|\n    --?\"[*R:global_attack_active_flag]\" -eq \"1\"|>CDR_ADDGM;[*R:global_attack_name](Atk);[*R:global_attack_roll];\n      --Rnext| --?\"[*R:global_attack_name]\" -ne \"NoRepeatingAttributeLoaded\"|CDR_LOOP1\n\n  --/| ===== Global Save Modifiers\n  --Rfirst|[&CharId];repeating_savemod\n  --:CDR_LOOP2|\n    --?\"[*R:global_save_active_flag]\" -eq \"1\"|>CDR_ADDGM;[*R:global_save_name](Sav);[*R:global_save_roll]\n      --Rnext| --?\"[*R:global_save_name]\" -ne \"NoRepeatingAttributeLoaded\"|CDR_LOOP2\n\n  --/| ===== Global Skill Modifiers\n  --Rfirst|[&CharId];repeating_skillmod\n  --:CDR_LOOP3|\n    --?\"[*R:global_skill_active_flag]\" -eq \"1\"|>CDR_ADDGM;[*R:global_skill_name](Skl);[*R:global_skill_roll]\n      --Rnext| --?\"[*R:global_skill_name]\" -ne \"NoRepeatingAttributeLoaded\"|CDR_LOOP3\n\n  --/| ===== Global AC Modifiers\n  --Rfirst|[&CharId];repeating_acmod\n  --:CDR_LOOP4|\n    --?\"[*R:global_ac_active_flag]\" -eq \"1\"|>CDR_ADDGM;[*R:global_ac_name](AC);[*R:global_ac_val]\n      --Rnext| --?\"[*R:global_ac_name]\" -ne \"NoRepeatingAttributeLoaded\"|CDR_LOOP4\n\n  --/| ===== Global Damage Modifiers\n  --Rfirst|[&CharId];repeating_damagemod\n  --:CDR_LOOP5|\n    --?\"[*R:global_damage_active_flag]\" -eq \"1\"|>CDR_ADDGM;[*R:global_damage_name](Dmg);[*R:global_damage_damage]\n      --Rnext| --?\"[*R:global_damage_name]\" -ne \"NoRepeatingAttributeLoaded\"|CDR_LOOP5\n\n  --+|[&tbl] [/t]\n\n  --+CharId:|[&CharId]\n  --+TokenId:|[&TokenId]\n\n  -->FOOTER_BUTTONS| Add Footer Buttons\n\n  --X|\n\n--:CDR_ADDGM| \n  --&tbl|+ [tr][td style=\"text-align:left\"][%1%][/td] [td style=\"text-align:right\"]([%2%])[/td][/tr]\n--<|\n\n\n--<|\n\n--:ATTACKS_REPORT| (ATK_)\n  --#hidecard|0\n  --~Arg|string;split;\\;[&reentryval]\n\n  --&CharId|[&Arg1]\n  --&TokenId|[&Arg2]\n\n  --#sourceToken|[&TokenId]\n  --#title|Attacks\n  --#leftsub|[*[&TokenId]:t-name]\n  --#rightsub|\n  --#oddRowBackground|#ffffff\n  --#evenRowBackground|#ffffff\n\n  --Rfirst|[&CharId];repeating_attack\n  --/rDump|\n\n  --&tbl|\n\n  --:ATK_LOOP_TOP|\n    --?\"[*R:name]\" -eq NoRepeatingAttributeLoaded|ATK_LOOP_END\n\n      --&tbl|+ [tr][td style=\"width:60%;text-align:left\"][rbutton][*R:atkname]::ATTACK_DETAILS;[&CharId]\\[&TokenId]\\[*R:atkname]\\1[/rbutton][/td]\n                   [td style=\"width:10%;text-align:center\"][*R:atkbonus][/td]\n                   [td style=\"width:30%;text-align:center\"][*R:atkdmgtype][/td][/tr]\n\n    --Rnext|\n  --^ATK_LOOP_TOP|Back to top of loop\n  --:ATK_LOOP_END|\n  \n  --&tbl|[t border=\"1\" style=\"width:100%\"][tr]\n            [td style=\"width:60%;text-align:center;background-color:#d8d8e6\"][b]Attack[/b][/td]\n            [td style=\"width:10%;text-align:center;background-color:#d8d8e6\"][b]Bonus[/b][/td]\n            [td style=\"width:30%;text-align:center;background-color:#d8d8e6;\"][b]Damage[/b][/td][/tr][&tbl][/t]\n  --+|[&tbl]\n\n-->FOOTER_BUTTONS| Add Footer Buttons\n  --X|\n--<|\n\n--/|==================  Attack Details =======================\n--:ATTACK_DETAILS| (ATKD_)\n  --#hidecard|0\n  --~Arg|string;split;\\;[&reentryval]\n  --/+Debug Args| [$ArgCount] [&Arg1] [&Arg2] [&Arg3] [&Arg4]\n\n  --&CharId|[&Arg1]\n  --&TokenId|[&Arg2]\n  --&AtkName|[&Arg3]\n  \n  --#sourceToken|[&TokenId]\n  --#title|Attack Details\n  --#leftsub|[*[&TokenId]:t-name]\n  --#rightsub|[&AtkName]\n  --#oddRowBackground|#ffffff\n  --#evenRowBackground|#ffffff\n\n  --Rfind|[&CharId];[&AtkName];repeating_attack;atkname\n  --rDump|\n  --?\"[*R:atkname]\" -eq NoRepeatingAttributeLoaded|ATKD_DONE\n\n  --+Bonus:| [*R:atkbonus] to Hit\n  --+Damage:| [*R:atkdmgtype]\n  --+Critical:| [b]On:[/b][*R:atkcritrange] [b]Dmg:[/b][*R:dmgcustcrit]\n  --+Type:| [*R:dmgtype]\n  --+Range:| [*R:atkrange]\n  --+|[br]\n  --/+rollbase:| [*R:rollbase]\n  --+Desc:| [*R:atk_desc] \n\n  --:ATKD_DONE|\n\n-->FOOTER_BUTTONS| Add Footer Buttons\n  --X| Exit\n--<|\n\n--/|==================  Spellbook Report =======================\n--:SPELLBOOK_REPORT| (SB_)\n  --#hidecard|0\n  --/+Debug|ReentryVal: [&reentryval]\n  --~Arg|string;split;\\;[&reentryval]\n  --&CharId|[&Arg1]\n  --&TokenId|[&Arg2]\n\n  --#sourceToken|[&TokenId]\n  --#title|Spell Book\n  --#leftsub|[*[&TokenId]:t-name] [*[&CharId]:caster_level] \n  --#rightsub|\n\n  --&SCA|[*[&CharId]:spellcasting_ability]\n  --~SCA|string;substring;3;3;[&SCA]\n  --~SCA|string;totitlecase\n  -->ADD_POS_SIGN|[*[&CharId]:spell_attack_bonus] --&SAB|[&zRET]\n  --+|[l]&nbsp;[b]Spell Attack Bonus: [&SAB][/l][/b] [r][b]Save DC:[*[&CharId]:spell_save_dc]([&SCA])&nbsp;&nbsp;[/b][/r]\n  \n  -->REPORTSPELLS|cantrip\n  -->REPORTSPELLS|1\n  -->REPORTSPELLS|2\n  -->REPORTSPELLS|3\n  -->REPORTSPELLS|4\n  -->REPORTSPELLS|5\n  -->REPORTSPELLS|6\n  -->REPORTSPELLS|7\n  -->REPORTSPELLS|8\n  -->REPORTSPELLS|9\n\n-->FOOTER_BUTTONS| Add Footer Buttons\n  --X| DONE\n\n--:REPORTSPELLS|Parameter: Level\n  --#hidecard|0\n  --&zLvl|[%1%]\n\n  --Rfirst|[*[&CharId]:character_id];repeating_spell-[&zLvl]\n\n  --?\"[*R:spellname]\" -eq NoRepeatingAttributeLoaded|SB_DONE\n  \n  --&LvlDesc|Cantrip\n  --&zLvlSlots|\n\n  --?[&zLvl] -eq cantrip|SB_SKIPCANTRIP\n    --&LvlDesc|Level [&zLvl]\n    --=SlotsTotal|[*[&CharId]:lvl[&zLvl]_slots_total]\n    --=SlotsExpended|[*[&CharId]:lvl[&zLvl]_slots_expended]\n    --&zLvlSlots|Slots [b][$SlotsExpended.Total][/b] of [b][$SlotsTotal.Total][/b] remaining\n  --:SB_SKIPCANTRIP|\n\n  --&HdrRow|[&LvlDesc] ([&zLvlSlots])\n  -->SECTION_HEADER|[&HdrRow]\n\n  --:SB_DISPLAYLOOP|\n    --?\"[*R:spellname]\" -eq NoRepeatingAttributeLoaded|SB_DONE\n\n      --&zRIT|[r]\n      --?\"[*R:spellritual]\" -inc \"Yes\"|SB_ENDRIT\n        --&zRIT|\n      --:SB_ENDRIT|\n\n      --&zCON|[c]\n      --?\"[*R:spellconcentration]\" -inc \"concentration=1\"|SB_ENDCON\n        --&zCON|\n      --:SB_ENDCON| \n\n      --?[&zLvl] -eq cantrip -or [*R:spellprepared] -eq 1|SB_PREPARED\n        --+|[rbutton]&#x2B1C;::TOGGLE_PREPARED_SPELL;[&CharId]\\[*R>spellprepared]\\1[/rbutton] [rbutton][*R:spellname]::SPELL_DETAILS;[*R:spellname]\\repeating_spell-[&zLvl]\\spellname[/rbutton] [i][*R:innate] [&zCON][&zRIT][/i] \n        --/+SpellName Ref|[*R>spellname]\n        --/+Prepared Ref|[*R>spellprepared]        \n        --/+Prepared test|[*[&CharId]:[*R>spellprepared]]\n      --^SB_ENDIF-1|\n\n      --:SB_PREPARED|\n        --+|[rbutton]&#x2705;::TOGGLE_PREPARED_SPELL;[&CharId]\\[*R>spellprepared]\\0[/rbutton] [rbutton][*R:spellname]::SPELL_DETAILS;[*R:spellname]\\repeating_spell-[&zLvl]\\spellname[/rbutton] [i][*R:innate] [&zCON][&zRIT][/i]\n        --/+SpellName Ref|[*R>spellname]\n        --/+Prepared Ref|[*R>spellprepared]\n        --/+Prepared test|[*[&CharId]:[*R>spellprepared]]        \n      --:SB_ENDIF-1|\n    --Rnext|\n\n  --^SB_DISPLAYLOOP|  \n  --:SB_DONE|\n--<|Return\n\n--/|==================  Toggle Spell Prepared =======================\n--:TOGGLE_PREPARED_SPELL|CharId; SpellPrepared_field\n  --#hidecard|1\n  --+ReEntryVal|[&reentryval]\n  --~rArgs|string;split;\\;[&reentryval]\n  --+Split|[&rArgs]: [&rArgs1], [&rArgs2], [&rArgs3]\n  --@setattr|_charid [&rArgs1] _evaluate _silent _[&rArgs2]|[&rArgs3]\n  --+Prepared Toggled| @setattr|_charid [&Args1] _evaluate _[&rArgs2]|[&rArgs3]\n\n  --X|\n--<|\n\n--/|==================  Spell Details =======================\n--:SPELL_DETAILS| (SBD_)\n\n  --#hidecard|0\n  --/+ReEntryVal|[&reentryval]\n  --~rArgs|string;split;\\;[&reentryval]\n  --/+Split|[&rArgs]: [&rArgs1], [&rArgs2], [&rArgs3]\n\n  --Rfind|[*[&CharId]:character_id];[&rArgs1];[&rArgs2];[&rArgs3]\n  --/Rdump|\n\n  --#title|[*R:spellname]  [*R:innate]\n  --#leftsub|[*[&CharId]:character_name] ([*[&CharId]:caster_level])\n  --#rightsub|[*R:spellschool] [*R:spelllevel]\n\n  --+Casting Time:|[*R:spellcastingtime]\n  --+Range:|[*R:spellrange]\n  --+Target:|[*R:spelltarget]\n\n  --&zSCV|V\n  --?\"[*R:spellcomp_v]\" -inc \"v=1\"|SBD_ENDSCV\n    --&zSCV|\n  --:SBD_ENDSCV|\n\n  --&zSCS|S\n  --?\"[*R:spellcomp_s]\" -inc \"s=1\"|SBD_ENDSCS\n    --&zSCS|\n  --:SBD_ENDSCS|\n\n  --&zSCM|M\n  --?\"[*R:spellcomp_m]\" -inc \"m=1\"|SBD_ENDSCM\n    --&zSCM|\n  --:SBD_ENDSCM|\n\n  --+Components:|[&zSCV][&zSCS][&zSCM] [i]([*R:spellcomp_materials])[/i]\n  --+Duration:|[*R:spellduration]\n  --+|[*R:spelldescription]\n  \n  --~Len|string;length;[*R:spellathigherlevels]\n  --?[$Len] -le 5|SBD_END_HV_CHECK\n    --+|[b][i]At Higher Levels.[/i][/b][*R:spellathigherlevels]\n  --:SBD_END_HV_CHECK|\n  \n  --+|[c][sheetbutton]&#x1F4AB; Cast Spell &#x1F9D9;::[*[&CharId]:character_name]::[&rArgs2]_[*R:xxxActionIDxxxx]_spell[/sheetbutton][/c]\n\n  -->DNDBEYOND_SPELL_LINK|[*R:spellname]\n  \n  --&SCA|[*[&CharId]:spellcasting_ability]\n  --~SCA|string;substring;3;3;[&SCA]\n  --~SCA|string;totitlecase\n  -->ADD_POS_SIGN|[*[&CharId]:spell_attack_bonus] --&SAB|[&zRET]\n  --+Spell Atk Bonus: |[b][&SAB] &nbsp;&nbsp; Save DC:[*[&CharId]:spell_save_dc]&nbsp;([&SCA])[/b] [r][button]D&DBeyond::[&zDnDBeyondSpellLink][/button][/r]\n\n\n-->FOOTER_BUTTONS| Add Footer Buttons\n  \n  --X|\n--<|\n\n--/|==================  Charcter Features Report =======================\n--:FEATURES_REPORT| (FTR_)\n  --#hidecard|0\n\n  --/+Debug|ReentryVal: [&reentryval]\n  --~Arg|string;split;\\;[&reentryval]\n  --&CharId|[&Arg1]\n  --&TokenId|[&Arg2]\n\n  --#sourceToken|[&TokenId]\n  --#title|Features and Traits\n  --#leftsub|[*[&TokenId]:t-name]\n  --#rightsub|\n  --#hidecard|0\n  --/#oddRowBackground|#d8d8e6\n  --/#evenRowBackground|#d8d8e6\n\n\n  --/|======= Features and Traits =============\n  --Rfirst|[&CharId];repeating_traits\n  --/rDump|\n\n  --&C| --&R| --&F| --&BG| --&O|\n  --:FTR_LOOP_TOP|\n    --?\"[*R:name]\" -eq NoRepeatingAttributeLoaded|FTR_LOOP_END\n\n      --/+OUTPUT|[*R:output]\n      --&FName|[*R:name]\n      --~FName|string;replace;:;+;[&FName]\n      --/+Source|[*R:source] CLASS; RACIAL; FEAT; BACKGROUND\n      --/+Source_Type|[*R:source_type]\n      --/+Description|[*R:description]\n\n      --C[*R:source]|CLASS:FTR_CLASS|RACIAL:FTR_RACIAL|FEAT:FTR_FEAT|BACKGROUND:FTR_BG|\n      --&O|+ [tr][td][rbutton][*R:name]::FEATURE_DETAILS;[&CharId]\\[&TokenId]\\[*R:name][/rbutton]([*R:source])[/td][td][r][i][*R:source_type][/i][/r][/td][/tr] --^FTR_CONTINUE|\n      --:FTR_CLASS|  --&C|+ [tr][td][rbutton][*R:name]::FEATURE_DETAILS;[&CharId]\\[&TokenId]\\[&FName][/rbutton][/td][td][r][i][*R:source_type][/i][/r][/td][/tr] --^FTR_CONTINUE| \n      --:FTR_RACIAL| --&R|+ [tr][td][rbutton][*R:name]::FEATURE_DETAILS;[&CharId]\\[&TokenId]\\[*R:name][/rbutton][/td][td][r][i][*R:source_type][/i][/r][/td][/tr] --^FTR_CONTINUE| \n      --:FTR_FEAT|  --&F|+ [tr][td][rbutton][*R:name]::FEATURE_DETAILS;[&CharId]\\[&TokenId]\\[*R:name][/rbutton][/td][td][r][i][*R:source_type][/i][/r][/td][/tr] --^FTR_CONTINUE| \n      --:FTR_BG|  --&BG|+ [tr][td][rbutton][*R:name]::FEATURE_DETAILS;[&CharId]\\[&TokenId]\\[*R:name][/rbutton][/td][td][r][i][*R:source_type][/i][/r][/td][/tr] --^FTR_CONTINUE| \n\n      --:FTR_CONTINUE|\n    --Rnext|\n\n  --^FTR_LOOP_TOP|Back to top of loop\n  --:FTR_LOOP_END|\n\n  -->SECTION_HEADER|Class Abilities\n  --+|[t style=\"width:100%\"][&C][/t]\n\n  -->SECTION_HEADER|Racial Abilities\n  --+|[t style=\"width:100%\"][&R][/t]\n\n  -->SECTION_HEADER|Feats\n  --+|[t style=\"width:100%\"][&F][/t]\n\n  -->SECTION_HEADER|Background Features\n  --+|[t style=\"width:100%\"][&BG][/t]\n\n  -->SECTION_HEADER|Other Features\n  --+|[t style=\"width:100%\"][&O][/t]\n\n  --/|======= Proficiencies =============\n  -->SECTION_HEADER|Proficiencies\n\n  --Rfirst|[&CharId];repeating_proficiencies\n  --/rDump|\n  --&L| --&W| --&A| --&O|\n\n  --:FTR_PRF_LOOP_TOP|\n    --?\"[*R:name]\" -eq NoRepeatingAttributeLoaded|FTR_PRF_LOOP_END\n\n      --C[*R:prof_type]|LANGUAGE:PRF_LANG|WEAPON:PRF_WEAPON|ARMOR:PRF_ARMOR|\n\n      --&O|+ [*R:name]([*R:prof_type]), --^FTR_PRF_CONTINUE|\n      --:PRF_LANG|  --&L|+ [*R:name], --^FTR_PRF_CONTINUE| \n      --:PRF_WEAPON| --&W|+ [*R:name], --^FTR_PRF_CONTINUE| \n      --:PRF_ARMOR|  --&A|+ [*R:name], --^FTR_PRF_CONTINUE| \n      --:FTR_PRF_CONTINUE|\n    --Rnext|\n  --^FTR_PRF_LOOP_TOP|Back to top of loop\n  --:FTR_PRF_LOOP_END|\n\n  --/| Take out the final comma\n  --~Len|string;length;[&A] --=Len|[$Len.Total] - 1 --~Len|math;max;0,[$Len.Total] --~A|string;Left;[$Len.Total];[&A]\n  --~Len|string;length;[&W] --=Len|[$Len.Total] - 1 --~Len|math;max;0,[$Len.Total] --~W|string;Left;[$Len.Total];[&W]\n  --~Len|string;length;[&L] --=Len|[$Len.Total] - 1 --~Len|math;max;0,[$Len.Total] --~L|string;Left;[$Len.Total];[&L]\n  --~Len|string;length;[&O] --=Len|[$Len.Total] - 1 --~Len|math;max;0,[$Len.Total] --~O|string;Left;[$Len.Total];[&O]    \n\n  --&tStyle|style=\"width:100%;padding:1px;border-spacing:0px;border-collapse:collapse;text-shadow: 0px 0px 0px black;border:0px dashed black;\"\n  --&trStyle1|style=\"border:0px dashed black;\"\n  --&tdStyle1|style=\"width:30%;text-align:left;background-color:#FFFFFF;font-size:80%\"\n  --&tdStyle2|style=\"width:70%;text-align:left;background-color:#FFFFFF;font-size:80%\"\n\n  --+|[t [&tStyle]]\n          [tr [&trStyle1]][td [&tdStyle1]]&nbsp;&nbsp;Armor[/td][td [&tdStyle2]][&A][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]]&nbsp;&nbsp;Weapon[/td][td [&tdStyle2]][&W][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]]&nbsp;&nbsp;Language[/td][td [&tdStyle2]][&L][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]]&nbsp;&nbsp;Other[/td][td [&tdStyle2]][&O][/td][/tr]\n      [/t]\n\n  --/|======= Tools / Languages =============\n  -->SECTION_HEADER|Tools & Custom Skills\n  --Rfirst|[&CharId];repeating_tool\n  --/rDump|\n\n  --&tStyle|style=\"width:100%;padding:1px;border-spacing:0px;border-collapse:collapse;text-shadow: 0px 0px 0px black;border:0px dashed black;\"\n  --&trStyle1|style=\"border:0px dashed black;\"\n  --&tdStyle1|style=\"width:40%;text-align:left;background-color:#FFFFFF;font-size:80%\"\n  --&tdStyle2|style=\"width:10%;text-align:left;background-color:#FFFFFF;font-size:80%\"\n\n  --&Tbl|[t [&tStyle]]\n  --:FTR_TOOL_LOOP_TOP|\n    --?\"[*R:name]\" -eq NoRepeatingAttributeLoaded|FTR_TOOL_LOOP_END\n      --&Tbl|+ [tr [&trStyle1]][td [&tdStyle1]]&nbsp;&nbsp;[*R:toolname][/td][td [&tdStyle2]] [*R:toolbonus_base] [/td]\n      \n      --Rnext|\n\n      --&ToolName| --&ToolBonus|\n      --?\"[*R:name]\" -eq NoRepeatingAttributeLoaded|FTR_TOOL_LOOP_CONTINUE\n      --&ToolName|[*R:toolname] --&ToolBonus|[*R:toolbonus_base]\n      --RNext\n\n  --:FTR_TOOL_LOOP_CONTINUE|\n  --&Tbl|+ [td [&tdStyle1]]&nbsp;&nbsp;[&ToolName][/td][td [&tdStyle2]] [&ToolBonus] [/td][/tr]\n     \n  --^FTR_TOOL_LOOP_TOP|Back to top of loop\n  --:FTR_TOOL_LOOP_END|\n  --&Tbl|+ [/t]\n  --+|[&Tbl]\n  \n-->FOOTER_BUTTONS| Add Footer Buttons\n --X|\n--<|\n\n--/|==================  Charcter Feature Details =======================\n--:FEATURE_DETAILS| (FTRD_)\n  \n  --#hidecard|0\n  --~Arg|string;split;\\;[&reentryval]\n  --/+Debug Args| [$ArgCount] [&Arg1] [&Arg2] [&Arg3]\n\n  --&CharId|[&Arg1]\n  --&TokenId|[&Arg2]\n  --&FtrName|[&Arg3]\n  --#sourceToken|[&TokenId]\n\n  --~FtrName|string;replace;+;:;[&FtrName]\n  \n  --#title|Feature Details\n  --#leftsub|[*[&TokenId]:t-name]\n  --#rightsub|[&FtrName]\n  --#oddRowBackground|#ffffff\n  --#evenRowBackground|#ffffff\n\n  --Rfind|[&CharId];[&FtrName];repeating_traits;name\n  --rDump|\n  --?\"[*R:name]\" -eq NoRepeatingAttributeLoaded|FTRD_DONE\n\n  --+Source:| [*R:source]\n  --+Source type:| [*R:source_type]\n  --+Desc:| [*R:description]\n  --+Options:| [*R:options_flag] \n  --+Display:| [*R:display_flag]\n  \n  --:FTRD_DONE|\n\n-->FOOTER_BUTTONS| Add Footer Buttons  \n--X| Exit\n--<|\n\n--/|==================  Charcter Inventory Report =======================\n--:INV_REPORT| (INV_)\n  --#hidecard|0\n  --~Arg|string;split;\\;[&reentryval]\n\n  --&CharId|[&Arg1]\n  --&TokenId|[&Arg2]\n  --#sourceToken|[&TokenId]\n\n  --#title|Inventory\n  --#leftsub|[*[&TokenId]:t-name]\n  --#rightsub|\n  --#oddRowBackground|#d8d8e6\n  --#evenRowBackground|#ffffff\n\n  --Rfirst|[&CharId];repeating_inventory\n  --/rDump|\n\n\n  -->SECTION_HEADER|Money\n  --=TtlGP|[*[&CharId]:cp] / 100 \n  --=TtlGP|[*[&CharId]:sp] / 10 + [$TtlGP] \n  --=TtlGP|[*[&CharId]:ep] / 2 + [$TtlGP]\n  --=TtlGP|[*[&CharId]:gp] + [$TtlGP]\n  --=TtlGP|[*[&CharId]:pp]*10 + [$TtlGP]\n  --=TtlGP|[$TtlGP]*100\n  --~TtlGP|math;round;[$TtlGP]\n  --=TtlGP|[$TtlGP]/100\n\n  --&tbl|[t style=\"width:90%;text-align:right\"][tr][td style=\"width:15%;text-align:right\"]cp[/td][td style=\"width:15%\";text-align:right]sp[/td][td style=\"width:15%;text-align:right\"]ep[/td][td style=\"width:15%;text-align:right\"]gp[/td][td style=\"width:15%;text-align:right\"]pp[/td][td style=\"width:25%;text-align:right\"]Ttl(gp)[/td][/tr]\n\n  --&tbl|+  [tr][td style=\"text-align:right\"][*[&CharId]:cp][/td][td style=\"text-align:right\"][*[&CharId]:sp][/td][td style=\"text-align:right\"][*[&CharId]:ep][/td][td style=\"text-align:right\"][*[&CharId]:gp][/td][td style=\"text-align:right\"][*[&CharId]:pp][/td][td style=\"text-align:right\"][$TtlGP.Total][/td][/tr][/t]\n  --+|[&tbl]\n\n  --&tbl|\n  -->SECTION_HEADER|Items\n  --=ItemWt|0\n\n  --:INV_LOOP_TOP|\n    --?\"[*R:name]\" -eq NoRepeatingAttributeLoaded|INV_LOOP_END\n\n      --&E|&#x1F392; --?[*R:equipped] -ne 1|INV_NOTEQUIPPED --&E|&#x270B; --:INV_NOTEQUIPPED|\n      --&tbl|+ [tr][td style=\"width:60%\"][rbutton][*R:itemname]::INV_DETAILS;[&CharId]\\[&TokenId]\\[*R:itemname][/rbutton][/td][td style=\"width:13%;text-align:center\"][*R:itemcount][/td][td style=\"width:13%;text-align:center\"][&E][/td][td style=\"text-align:right;width:14%\"][*R:itemweight][/td][/tr]\n\n    --Rnext|\n  --^INV_LOOP_TOP|Back to top of loop\n  --:INV_LOOP_END|\n\n  --=CC|15 * [*[&TokenId]:strength]\n  --&CC|[$CC.Total]\n  --&tbl|+ [tr][td style=\"text-align:left;width:60%\"][b]Carrying: [$CC.Total]lbs[/b][/td][td][/td][td style=\"text-align:right;width:13%\"][b]Total:[/b][/td][td style=\"text-align:right;width:14%\"][r][b][*[&CharId]:weighttotal] lbs[/b][/r][/td][/tr]  \n\n  --&tbl|[t style=\"width:90%\"][tr][td style=\"width:60%\"][b]Item Name[/b][/td][td style=\"width:13%;text-align:center\"][b]#[/b][/td][td style=\"width:13%;text-align:center\"][b]Equip[/b][/td][td style=\"text-align:center;width:14%\"][r][b]Lbs[/b][/r][/td][/tr][&tbl][/t]\n\n  --+|[&tbl]\n\n  -->FOOTER_BUTTONS| Add Footer Buttons\n  --X|\n--<|\n\n--/|==================  Inv Details Report =======================\n--:INV_DETAILS| (INVD_)\n  --#hidecard|0\n  --~Arg|string;split;\\;[&reentryval]\n  --/+Debug Args| [$ArgCount] [&Arg1] [&Arg2] [&Arg3]\n\n  --&CharId|[&Arg1]\n  --&TokenId|[&Arg2]\n  --&ItemName|[&Arg3]\n  \n  --#sourceToken|[&TokenId]\n  --#title|Inventory Item Info\n  --#leftsub|[*[&TokenId]:t-name]\n  --#rightsub|[&ItemName]\n  --#oddRowBackground|#ffffff\n  --#evenRowBackground|#ffffff\n\n  --Rfind|[&CharId];[&ItemName];repeating_inventory;name\n  --/rDump|\n  --?\"[*R:name]\" -eq NoRepeatingAttributeLoaded|INVD_DONE\n\n  --+Count:| [*R:count]\n  --+Weight:| [*R:weight]\n  --+Properties:| [*R:properties]\n  --+Modifiers:| [*R:modifiers]\n  --+Content:| [*R:content]\n  --:INVD_DONE|\n\n-->FOOTER_BUTTONS| Add Footer Buttons\n  --X| Exit\n\n--<|\n\n--/|==================  Resource Summary Report =======================\n--:RESOURCES_REPORT| RES_\n  --#hidecard|0\n  --~Arg|string;split;\\;[&reentryval]\n\n  --&CharId|[&Arg1]\n  --&TokenId|[&Arg2]\n\n  --#sourceToken|[&TokenId]\n  --#title|Resources\n  --#leftsub|[*[&TokenId]:t-name]\n  --#rightsub|\n  --#oddRowBackground|#ffffff\n  --#evenRowBackground|#ffffff\n\n  --/| First get the Class and Other Resources\n  --&tbl|[t style=\"width:100%\"][tr style=\"background-color:#d8d8e6\"][td style=\"width:55%;text-align:left\"][b]Resource[/b][/td][td style=\"width:15%\";text-align:center][b]Total[/b][/td][td style=\"width:15%;text-align:center\"][b]Exp[/b][/td][td style=\"width:15%;text-align:center\"][b]Rem[/b][/td][/tr]\n\n  --=ResExp|[*[&CharId]:class_resource]\n  --=ResTotal|[*[&CharId]:class_resource^]\n  --=ResRem|[$ResTotal]-[$ResExp]\n  --&tbl|+ [tr style=\"background-color:#FFFFFF\"][td style=\"width:55%;text-align:left\"]&nbsp;&nbsp;[*[&CharId]:class_resource_name][/td][td style=\"width:15%;text-align:center\"][$ResTotal.Total][/td][td style=\"width:15%;text-align:center\"][$ResExp.Total][/td][td style=\"width:15%;text-align:center\"][$ResRem.Total][/td][/tr]\n\n  --=ResExp|[*[&CharId]:other_resource]\n  --=ResTotal|[*[&CharId]:other_resource^]\n  --=ResRem|[$ResTotal]-[$ResExp]\n  --&tbl|+ [tr style=\"background-color:#FFFFFF\"][td style=\"width:55%;text-align:left\"]&nbsp;&nbsp;[*[&CharId]:other_resource_name][/td][td style=\"width:15%;text-align:center\"][$ResTotal.Total][/td][td style=\"width:15%;text-align:center\"][$ResExp.Total][/td][td style=\"width:15%;text-align:center\"][$ResRem.Total][/td][/tr]\n\n  --/| Then get the repeating resources\n\n  --Rfirst|[&CharId];repeating_resource\n  --/rDump|\n\n  --:RES_LOOP_TOP|\n    --?\"[*R:resource_left_name]\" -eq NoRepeatingAttributeLoaded|RES_LOOP_END\n\n      --=ResExp|[*R:resource_left]\n      --=ResTotal|[*[&CharId]:resource_left^]\n      --=ResRem|[$ResTotal]-[$ResExp]\n      --&tbl|+ [tr style=\"background-color:#FFFFFF\"][td style=\"width:55%;text-align:left\"]&nbsp;&nbsp;[*R:resource_left_name][/td][td style=\"width:15%;text-align:center\"][$ResTotal.Total][/td][td style=\"width:15%;text-align:center\"][$ResExp.Total][/td][td style=\"width:15%;text-align:center\"][$ResRem.Total][/td][/tr]\n\n      --=ResExp|[*R:resource_right]\n      --=ResTotal|[*[&CharId]:resource_right^]\n      --=ResRem|[$ResTotal]-[$ResExp]\n      --&tbl|+ [tr style=\"background-color:#FFFFFF\"][td style=\"width:55%;text-align:left\"]&nbsp;&nbsp;[*R:resource_right_name][/td][td style=\"width:15%;text-align:center\"][$ResTotal.Total][/td][td style=\"width:15%;text-align:center\"][$ResExp.Total][/td][td style=\"width:15%;text-align:center\"][$ResRem.Total][/td][/tr]\n\n    --Rnext|\n  --^RES_LOOP_TOP|Back to top of loop\n  --:RES_LOOP_END|\n\n  --+|[C][&tbl][/C]\n\n-->FOOTER_BUTTONS| Add Footer Buttons\n  --X|\n--<|\n\n\n\n--/|==================  Utility Functions =======================\n--:SHORT_NAME|Shortens player name for reporting purposes (6 characters); Parameter:Character_Name\n  --~gSN|string;left;8;[%1%]\n  --~gSN|string;before; ;[&gSN]\n--<| Return\n\n--:FIND_TOKEN|TokenId\n  --#hidecard|1  \n  --@ping-token|_[&reentryval] _[&SendingPlayerID]\n  --X|\n--<|\n\n--:SECTION_HEADER|Title\n  --&hdrstyle_T|style=\"width:100%;padding:1px;border-spacing:0px;border-collapse:collapse;text-shadow: 0px 0px 1px black;border: 0px solid black;\"\n  --&hdrstyle_TR|style=\"border:0px solid black;\"\n  --&hdrstyle_TD|style=\"width:100%;background-color:#d8d8e6;font-size:110%;font-weight:bold;text-align:center\"\n  --+|[t [&hdrstyle_T]][tr [&hdrstyle_TR]][td [&hdrstyle_TD]][c][%1%][/c][/td][/tr][/t]\n--<|\n\n--:ADD_POS_SIGN|Parameter1: Number / Can be a roll or string variable, but should be a number. \n --/| Populates zRET(String) and rRET(Roll Variable) (Global vars effectively)\n  --&zRET|[%1%]\n  --=rRET|[%1%]\n  --?[%1%] -le 0|_APS_SKIP  --=rRET|&#43;[%1%] --&zRET|[$rRET.Text] --:_APS_SKIP|\n--<|\n\n--:FOOTER_BUTTONS|\n\n  --&tStyle|style=\"width:100%;padding:1px;border-spacing:0px;border-collapse:collapse;text-shadow: 0px 0px 0px black;border: 0px solid black;\"\n  --&trStyle1|style=\"border:1px solid black;\"\n  --&tdStyle1|style=\"width:100%;background-color:#FFFFFF;font-size:70%\"\n  --+|[t [&tStyle]][tr [&trStyle1]][td [&tdStyle1]]\n      [l][rbutton]&#x1F4C3;::CHAR_DETAILS_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n          [rbutton]&#x1F3F9;::ATTACKS_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n          [rbutton]&#x1F393;::FEATURES_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n          [rbutton]&#x1F4AB;::SPELLBOOK_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n          [rbutton]&#x1F392;::INV_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n          [rbutton]&#x1F520;::RESOURCES_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n          [rbutton]&#x1F3AF;::FIND_TOKEN;[&TokenId][/rbutton]\n      [/l]\n        \n          [r][button]NPC::~Mule|NPC-Tools[/button][button]DM::~Mule|DM-Tools[/button][/r]\n      [/td][/tr][/t]\n--<|\n\n--:FOOTER_BUTTONS_PARTY|\n\n  --&tStyle|style=\"width:100%;padding:1px;border-spacing:0px;border-collapse:collapse;text-shadow: 0px 0px 0px black;border: 0px solid black;\"\n  --&trStyle1|style=\"border:1px solid black;\"\n  --&tdStyle1|style=\"width:100%;background-color:#FFFFFF;font-size:70%\"\n\n    --+|[t [&tStyle]][tr [&trStyle1]][td [&tdStyle1]]\n        [l][rbutton]&#x1F497;::PARTY_HEALTH_REPORT[/rbutton]\n          [rbutton]&#x1F520;::PARTY_RESOURCES_REPORT[/rbutton]\n          [rbutton]&#x1F4B0;::PARTY_FUNDS_REPORT[/rbutton]\n          [rbutton]&#x1F453;::PARTY_UDL_REPORT[/rbutton]\n        [/l]\n\n          [r][button]NPC::~Mule|NPC-Tools[/button][button]DM::~Mule|DM-Tools[/button][/r]\n        [/td][/tr][/t]\n--<|\n\n--/|I use D&D Beyond for my rules refrences.  These functions create hyperlinks based on context of card\n--:DNDBEYOND_MONSTER_LINK|MonsterName \n  --/|Format is https://www.dndbeyond.com/monsters/vampire-spellcaster\n  --~MN|string;replace; ;-;[%1%]\n  --&zDnDBeyondMonsterLink|https://www.dndbeyond.com/monsters/[&MN]\n--<|\n\n--:DNDBEYOND_SPELL_LINK|SpellName \n  --/|Format is https://www.dndbeyond.com/spells/dominate-person\n  --~SN|string;replace; ;-;[%1%]\n  --&zDnDBeyondSpellLink|https://www.dndbeyond.com/spells/[&SN]\n--<|\n\n}}",
            "order": -1
        },
        {
            "name": "Spawn-Party",
            "description": "",
            "istokenaction": false,
            "action": "!Spawn --name|Eliza Redburrow --offset|1,-1\n!Spawn --name|Shaper --offset|2,0\n!Spawn --name|Steel Defender (Shaper) --Offset|1,0\n!Spawn --name|Kharg --offset|2,-1\n!Spawn --name|Jokaryn --offset|2,1\n!Spawn --name|Xaral Mind-drinker --offset|1,1 --DeleteTarget|?{Delete spawn token?|Yes|No}",
            "order": -1
        },
        {
            "name": "NPC-Tools",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{ \n  --/|___NPC Tools_2.0_____\n  --:TOP|\n  --#reentrant|NPC Tools\n  --#title|NPC Tools\n  --#titleCardBackground|#095c1f\n  --/#oddRowBackground|#9fbfa7  (Old background-color)\n\n  --#oddRowBackground|#BADFBB  \n  --#evenRowBackground|#BADFBB\n  --#buttonbackground|#BADFBB\n  --#buttontextcolor|#0905f2\n  --#buttonbordercolor|#BADFBB\n  --#hidecard|0    \n  --#bodyFontSize|11px\n  --#whisper|gm\n  --#debug|1\n\n  -->SECTION_HEADER|Macros  \n  --+|[c][button]&#x1F4CD;::~Mule|Page-Assets[/button]\n  \t\t\t [button]&#x1F4CB;::~Mule|Menu-Char-Token-Info[/button]\n         [button]&#x1F527;::~Mule|Menu-Utility-Macros[/button]\n         [button]&#x1F6A6;::~Mule|Menu-TurnOrder-Macros[/button]\n         [button]&#x1F3AD;::~Mule|Player-Macros[/button]\n         [button]&#x1F310;::~Mule|DM-Links[/button]         \n         [button]&#x1F39A;::~Mule|NPC-Layers[/button]\n         [button]&#x1F9DB;::~Mule|DM-Tools[/button]\n     [/c]\n\n  --~tokencnt|array;pagetokens;alltokens;@{selected|token_id}\n  --/|Loop through all of the tokens in \"alltokens\" \n  --~TokenId|array;getfirst;alltokens\n\t--?[&TokenId] -eq ArrayError|ENDLOOP\n\n  --?\"[*[&TokenId]:playercharacter]\" -eq 1|CONTINUE\n\n  --&ObjRows|F --&GMRows|F --&MapRows|F --&WallsRows|F --&OtherRows|F \n\n  --&tStyle|style=\"width:100%;text-align:left;padding:1px;border-spacing:0px;border-collapse:collapse;text-shadow: 0px 0px 0px black;border: 0px dashed black;\"\n  --&trStyle1|style=\"border:1px dashed black;\"\n  --&trStyle2|style=\"border:0px dashed black;\"\n  --&tdStyle1|style=\"width:40%;text-align:left;background-color:#BADFBB;font-size:100%\"\n  --&tdStyle2|style=\"width:60%;text-align:left;background-color:#BADFBB;font-size:100%\"\n  --&tdStyle3|style=\"width:100%;background-color:#edf7f0;font-size:100%;font-weight:bold;text-align:center\" colspan=2  \n\n  --:LOOPCHECK|\n    --&CharId|[*[&TokenId]:t-represents]\n    --/+Debug|[*[&TokenId]:t-name], [*[&TokenId]:t-layer], [*[&TokenId]:npc], [*[&TokenId]:t-represents]\n\n    --/|Skip targets that are not NPCs\n    --/?[*[&TokenId]:t-layer] -ne objects|CONTINUE\n    --?\"[*[&TokenId]:npc]\" -ne 1|CONTINUE\n    --?\"[*[&TokenId]:t-represents]\" -inc \"-\"|START\n    --^CONTINUE|\n\n   --:START|\n    --&CharId|[*[&TokenId]:t-represents]\n\n    --?\"[*[&TokenId]:t-layer]\" -eq \"objects\"|&visbtn;&#x1F648|&visbtn;&#x1F649\n\n    --&t|[tr [&trStyle1]][td [&tdStyle1]] \n    \t\t\t[b][rbutton][*[&TokenId]:t-name]::FIND_TOKEN;[&TokenId][/rbutton][/b][/td]\n        \t[td [&tdStyle2]]\n\t          [rbutton][&visbtn];::TOGGLE_LAYER;[&TokenId][/rbutton]\n\t          [rbutton]&#x1F4C3;::NPC_DETAILS_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n\t          [rbutton]&#x1F3F9;::NPC_FEATURES_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n\t          [rbutton]&#x1F4AB;::NPC_SPELLS_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n\t          [rbutton]&#x1F6A6;::ADD_TURNORDER;[&TokenId][/rbutton]\n\t          [rbutton]&#x1F51F;::ADD_NUMBERED;[&TokenId][/rbutton]\n        \t[/td][/tr]\n        \n\t\t--C[*[&TokenId]:t-layer]|objects:OBJECTS|gmlayer:GM|map:MAP|walls:WALLS\n\n\t\t--&OtherTbl|+ [&t] --&OtherRows|T --^CONTINUE|\n\t\t--:OBJECTS| --&ObjTbl|+ [&t] --&ObjRows|T --^CONTINUE|\n\t\t--:GM| --&GMTbl|+ [&t] --&GMRows|T --^CONTINUE|\n\t\t--:MAP| --&MapTbl|+ [&t] --&MapRows|T --^CONTINUE|\n\t\t--:WALLS| --&WallsTbl|+ [&t] --&WallsRows|T --^CONTINUE|\n\n    --:CONTINUE|\n    --~TokenId|array;getnext;alltokens\n    --?[&TokenId] -ne ArrayError|LOOPCHECK\n  --:ENDLOOP|\n\n  --?\"[&ObjRows]\" -eq \"F\"|NEXT1\n  \t--&ObjTbl|[tr [&trStyle1]][td [&tdStyle3]]Ojbect Layer NPCs[/td][/tr] [&ObjTbl]\n  --:NEXT1|\n  --?\"[&GMRows]\" -eq \"F\"|NEXT2\n  \t--&GMTbl|[tr [&trStyle1]][td [&tdStyle3]]GM Layer NPCs[/td][/tr] [&GMTbl]\n  --:NEXT2|\n  --?\"[&MapRows]\" -eq \"F\"|NEXT3\n  \t--&MapTbl|[tr [&trStyle1]][td [&tdStyle3]]Map Layer NPCs[/td][/tr] [&MapTbl]\n  --:NEXT3|\n  --?\"[&WallsRows]\" -eq \"F\"|NEXT4\n  \t--&WallsTbl|[tr [&trStyle1]][td [&tdStyle3]]Wall/Lighting Layer NPCs[/td][/tr] [&WallsTbl]\n  --:NEXT4|\n  --?\"[&OtherRows]\" -eq \"F\"|NEXT5\n  \t--&OtherTbl|[tr [&trStyle1]][td [&tdStyle3]]GM Layer NPCs[/td][/tr] [&OtherTbl]\n  --:NEXT5|\n\n  --&tbl|[t [&tStyle]] [&ObjTbl] [&GMTbl] [&MapTbl] [&WallsTbl] [&OtherTbl] [/t]\n  --+|[&tbl]\n\t-->FOOTER_BUTTONS_MAIN|  \n\t--X|\n\n--/|==================\tReEntry Function ========================\n\n--/|==================  NPC Details Report =======================\n--:NPC_DETAILS_REPORT| NDR_\n  --~Arg|string;split;\\;[&reentryval]\n  --&CharId|[&Arg1]\n  --&TokenId|[&Arg2]\n  --#hidecard|0\n\n  --#oddRowBackground|#BADFBB\n  --#evenRowBackground|#BADFBB\n  --#buttonbackground|#BADFBB\n  --#buttontextcolor|#0905f2\n  --#buttonbordercolor|#BADFBB\n\n\n\n  --#title|[*[&TokenId]:t-name]\n  --#leftsub|[*[&CharId]:npc_name]\n\n  --/+|[b][c][*[&CharId]:race][/c][/b]\n  --+|[c][i][*[&CharId]:npc_type][/i][/c]\n\n  -->DNDBEYOND_MONSTER_LINK|[*[&CharId]:npc_name]\n\t--+CharId:|[&CharId][r][button]D&DBeyond::[&zDnDBeyondMonsterLink] [/button]&nbsp;&nbsp;[/r]\n\t--+TokenId:|[&TokenId]\n\n  --?\"[*[&CharId]:npc_str_save_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_str_save_base]|&Tmp;[*[&CharId]:strength_save_bonus]  -->ADD_POS_SIGN|[&Tmp] --&StrSave|[&zRET]  --/&Tmp|\n\t--?\"[*[&CharId]:npc_dex_save_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_dex_save_base]|&Tmp;[*[&CharId]:dexterity_save_bonus] -->ADD_POS_SIGN|[&Tmp] --&DexSave|[&zRET] --&Tmp|\n  --?\"[*[&CharId]:npc_con_save_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_con_save_base]|&Tmp;[*[&CharId]:constitution_save_bonus] -->ADD_POS_SIGN|[&Tmp] --&ConSave|[&zRET] --&Tmp|\n  --?\"[*[&CharId]:npc_int_save_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_int_save_base]|&Tmp;[*[&CharId]:intelligence_save_bonus] -->ADD_POS_SIGN|[&Tmp] --&IntSave|[&zRET] --&Tmp|\n  --?\"[*[&CharId]:npc_wis_save_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_wis_save_base]|&Tmp;[*[&CharId]:wisdom_save_bonus] -->ADD_POS_SIGN|[&Tmp] --&WisSave|[&zRET] --&Tmp|\n  --?\"[*[&CharId]:npc_cha_save_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_cha_save_base]|&Tmp;[*[&CharId]:charisma_save_bonus] -->ADD_POS_SIGN|[&Tmp] --&ChaSave|[&zRET] --&Tmp|\n\n  -->ADD_POS_SIGN|[*[&CharId]:strength_mod] --&StrMod|[&zRET] \n  -->ADD_POS_SIGN|[*[&CharId]:dexterity_mod] --&DexMod|[&zRET]\n  -->ADD_POS_SIGN|[*[&CharId]:constitution_mod] --&ConMod|[&zRET]\n  -->ADD_POS_SIGN|[*[&CharId]:intelligence_mod] --&IntMod|[&zRET]\n  -->ADD_POS_SIGN|[*[&CharId]:wisdom_mod] --&WisMod|[&zRET] \n  -->ADD_POS_SIGN|[*[&CharId]:charisma_mod] --&ChaMod|[&zRET] \n\n\t--&tStyle|style=\"border:1px solid black;width:100%\"\n\t--&trStyle1|style=\"background-color:#BADFBB\"\n\t--&trStyle2|style=\"background-color:#BADFBB\"\n\t--&tdStyle1|style=\"width:25%;text-align:right;font-weight:bold\"\n\t--&tdStyle2|style=\"width:25%;text-align:left;font-size:smaller\"\n\t--&tdStyle3|style=\"width:25%;text-align:right;font-weight:bold\"\t\n\t--&tdStyle4|style=\"width:25%;text-align:center;font-weight:bold\"\n\n  --+|[t [&tStyle]]\n  \t\t\t[tr [&trStyle1]][td [&tdStyle1]][u]Attr[/u][/td]\t[td style=\"width:50%;text-align:center;font-weight:bold\" colspan=2] [u]Score[/u][/td] \t\t\t\t\t[td [&tdStyle4]][u]Save[/u][/td][/tr]\n  \t\t\t[tr [&trStyle2]][td [&tdStyle1]]Str[/td] \t\t\t\t\t[td [&tdStyle3]] [&StrMod][/td] [td [&tdStyle2]]&#40;[*[&CharId]:strength]&#41;\t[/td]\t[td [&tdStyle4]][button][&StrSave]::~[*[&CharId]:character_name]|npc_str_save[/button][/td][/tr]\n  \t\t\t[tr [&trStyle1]][td [&tdStyle1]]Dex[/td] \t\t\t\t\t[td [&tdStyle3]] [&DexMod][/td] [td [&tdStyle2]]&#40;[*[&CharId]:dexterity]&#41;\t[/td]\t[td [&tdStyle4]][button][&DexSave]::~[*[&CharId]:character_name]|npc_dex_save[/button][/td][/tr]\n  \t\t\t[tr [&trStyle2]][td [&tdStyle1]]Con[/td] \t\t\t\t\t[td [&tdStyle3]] [&ConMod][/td] [td [&tdStyle2]]&#40;[*[&CharId]:constitution]&#41;\t[/td]\t[td [&tdStyle4]][button][&ConSave]::~[*[&CharId]:character_name]|npc_con_save[/button][/td][/tr]\n  \t\t\t[tr [&trStyle1]][td [&tdStyle1]]Int[/td] \t\t\t\t\t[td [&tdStyle3]] [&IntMod][/td] [td [&tdStyle2]]&#40;[*[&CharId]:intelligence]&#41;\t[/td]\t[td [&tdStyle4]][button][&IntSave]::~[*[&CharId]:character_name]|npc_int_save[/button][/td][/tr]\n  \t\t\t[tr [&trStyle2]][td [&tdStyle1]]Wis[/td] \t\t\t\t\t[td [&tdStyle3]] [&WisMod][/td]\t[td [&tdStyle2]]&#40;[*[&CharId]:wisdom]&#41;\t[/td][td [&tdStyle4]][button][&WisSave]::~[*[&CharId]:character_name]|npc_wis_save[/button][/td][/tr]\n  \t\t\t[tr [&trStyle1]][td [&tdStyle1]]Cha[/td] \t\t\t\t\t[td [&tdStyle3]] [&ChaMod][/td]\t[td [&tdStyle2]]&#40;[*[&CharId]:charisma]&#41;\t[/td][td [&tdStyle4]][button][&ChaSave]::~[*[&CharId]:character_name]|npc_cha_save[/button][/td][/tr]\n  \t\t[/t]\n\n  --&SCA|[*[&CharId]:spellcasting_ability]\n  --~SCA|string;substring;3;3;[&SCA]\n\n\t-->ADD_POS_SIGN|[*[&CharId]:initiative_bonus] --&InitBonus|[&zRET] \n\t-->ADD_POS_SIGN|[*[&CharId]:pb] --&PB|[&zRET] \n\t-->ADD_POS_SIGN|[*[&CharId]:passive_wisdom] --&PP|[&zRET] \n\t-->ADD_POS_SIGN|[*[&CharId]:spell_attack_bonus] --&SAB|[&zRET] \n\t-->ADD_POS_SIGN|[*[&CharId]:spell_save_dc] --&SSDC|[&zRET] \n\n\t--/|4 column table /w desc:pair every 2 columns\n\t--&tStyle|style=\"border:0px solid black;width:100%\"\n\t--&trStyle1|style=\"background-color:#BADFBB\"\n\t--&trStyle2|style=\"background-color:#BADFBB\"\n\n\t--&tdStyle1|style=\"width:35%;text-align:right\"\n\t--&tdStyle2|style=\"width:10%;text-align:left\"\n\t--&tdStyle3|colspan=3 style=\"width:70%;text-align:left\"\n\n  --&tdStyle4|style=\"width:20%;text-align:right\"\n  --&tdStyle5|style=\"width:35%;text-align:left\"\n\n\n  --+|[t [&tStyle]]\n        [tr [&trStyle1]] [td [&tdStyle1]][b]AC:[/b] [/td][td [&tdStyle2]]&nbsp;[*[&CharId]:npc_ac] [/td]\n            [td [&tdStyle4]][b]HP:[/b] [/td][td [&tdStyle5]]&nbsp;[*[&TokenId]:t-bar1_value]/[*[&TokenId]:t-bar1_max][/td][/tr]\n        [tr [&trStyle2]][td [&tdStyle1]][b]AC Type:[/b] [/td][td [&tdStyle3]]&nbsp;[*[&CharId]:npc_actype][/td][/tr]\n        [tr [&trStyle1]][td [&tdStyle1]][b]Speed:[/b] [/td][td [&tdStyle3]]\t&nbsp;[*[&CharId]:npc_speed][/td][/tr]\n        [tr [&trStyle2]][td [&tdStyle1]][b]Initiative:[/b] [/td][td [&tdStyle2]]&nbsp;[&InitBonus][/td]\n            [td [&tdStyle4]][b]PP:[/b] [/td][td [&tdStyle5]]&nbsp;[&PP][/td][/tr]\n        [tr [&trStyle1]][td [&tdStyle1]][b]Prof Bonus:[/b] [/td][td [&tdStyle2]]&nbsp;[&PB][/td] [td [&tdStyle4]][/td][td [&tdStyle5]] [/td][/tr]\n        [tr [&trStyle1]][td [&tdStyle1]][b]Spell Save:[/b] [/td][td [&tdStyle2]]&nbsp;[&SSDC] ([&SCA])[/td]\n            [td [&tdStyle4]][b]Attack:[/b]&nbsp;[/td][td [&tdStyle5]] [&SAB][/td][/tr]\n        [tr [&trStyle2]][td [&tdStyle1]][b]Vulnerable:[/b] [/td][td [&tdStyle3]]&nbsp;[*[&CharId]:npc_vulnerabilities][/td][/tr]\n        [tr [&trStyle1]][td [&tdStyle1]][b]Dmg Resist:[/b] [/td][td [&tdStyle3]]&nbsp;[*[&CharId]:npc_resistances][/td][/tr]\n        [tr [&trStyle2]][td [&tdStyle1]][b]Dmg Immune:[/b] [/td][td [&tdStyle3]]&nbsp;[*[&CharId]:npc_immunities][/td][/tr]\n        [tr [&trStyle1]][td [&tdStyle1]][b]Cond Immune:[/b] [/td][td [&tdStyle3]]&nbsp;[*[&CharId]:npc_condition_immunities][/td][/tr]\n        [tr [&trStyle2]][td [&tdStyle1]][b]Languages:[/b] [/td][td [&tdStyle3]]&nbsp;[*[&CharId]:npc_languages][/td][/tr]\n        [tr [&trStyle1]][td [&tdStyle1]][b]Senses:[/b] [/td][td [&tdStyle3]]&nbsp;[*[&CharId]:npc_senses][/td][/tr]\n      [/t]\n\n\t--&tStyle|style=\"border:1px solid black;width:100%\"\n\t--&trStyle1|style=\"background-color:#BADFBB\"\n\t--&trStyle2|style=\"background-color:#BADFBB\"\n\t--&tdStyle1|style=\"width:35%;text-align:left;font-weight:bold\"\n\t--&tdStyle2|style=\"width:15%;text-align:center;font-weight:bold\"\n\t--&tdStyle3|colspan=4 style=\"width:100%;text-align:center\"\n\n  --?\"[*[&CharId]:npc_acrobatics_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_acrobatics_base]|&Tmp;[*[&CharId]:acrobatics_bonus] -->ADD_POS_SIGN|[&Tmp] --&AcrobaticsBonus|[&zRET]\n  --?\"[*[&CharId]:npc_animal_handling_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_animal_handling_base]|&Tmp;[*[&CharId]:animal_handling_bonus] -->ADD_POS_SIGN|[&Tmp] --&AnimalHandlingBonus|[&zRET]\n  --&tbl|[t [&tStyle]]\n        [tr [&trStyle1]][td [&tdStyle1]]Acrobatics[/td]\n            [td [&tdStyle2]] [b][button][&AcrobaticsBonus]::~[*[&CharId]:character_name]|npc_acrobatics[/button][/b][/td]\n            [td [&tdStyle1]]Animal Hand[/td]\n            [td [&tdStyle2]][b][button][&AnimalHandlingBonus]::~[*[&CharId]:character_name]|npc_animal_handling[/button][/b][/td][/tr]\n\n  --?\"[*[&CharId]:npc_arcana_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_arcana_base]|&Tmp;[*[&CharId]:arcana_bonus] -->ADD_POS_SIGN|[&Tmp] --&ArcanaBonus|[&zRET]\n  --?\"[*[&CharId]:npc_athletics_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_athletics_base]|&Tmp;[*[&CharId]:athletics_bonus] -->ADD_POS_SIGN|[&Tmp] --&AthleticsBonus|[&zRET]\n  --&tbl|+ [tr [&trStyle2]][td [&tdStyle1]]Arcana[/td]\n            [td [&tdStyle2]][button][&ArcanaBonus]::~[*[&CharId]:character_name]|npc_arcana[/button][/td]\n            [td [&tdStyle1]]Athletics[/td]\n            [td [&tdStyle2]][button][&AthleticsBonus]::~[*[&CharId]:character_name]|npc_athletics[/button][/td][/tr]\n\n  --?\"[*[&CharId]:npc_deception_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_deception_base]|&Tmp;[*[&CharId]:deception_bonus] -->ADD_POS_SIGN|[&Tmp] --&DeceptionBonus|[&zRET]\n  --?\"[*[&CharId]:npc_history_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_history_base]|&Tmp;[*[&CharId]:history_bonus] -->ADD_POS_SIGN|[&Tmp] --&HistoryBonus|[&zRET]\n  --&tbl|+ [tr [&trStyle1]][td [&tdStyle1]]Deception[/td]\n            [td [&tdStyle2]][button][&DeceptionBonus]::~[*[&CharId]:character_name]|npc_deception[/button][/td]\n            [td [&tdStyle1]]History[/td]\n            [td [&tdStyle2]][button][&HistoryBonus]::~[*[&CharId]:character_name]|npc_history[/button][/td][/tr]\n\n  --?\"[*[&CharId]:npc_insight_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_insight_base]|&Tmp;[*[&CharId]:insight_bonus] -->ADD_POS_SIGN|[&Tmp] --&InsightBonus|[&zRET]\n  --?\"[*[&CharId]:npc_intimidation_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_intimidation_base]|&Tmp;[*[&CharId]:intimidation_bonus] -->ADD_POS_SIGN|[&Tmp] --&IntimidationBonus|[&zRET]\n  --&tbl|+ [tr [&trStyle1]][td [&tdStyle1]]Insight[/td]\n            [td [&tdStyle2]][button][&InsightBonus]::~[*[&CharId]:character_name]|npc_insight[/button][/td]\n            [td [&tdStyle1]]Intimidation[/td]\n            [td [&tdStyle2]][button][&IntimidationBonus]::~[*[&CharId]:character_name]|npc_intimidation[/button][/td][/tr]\n\n  --?\"[*[&CharId]:npc_investigation_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_investigation_base]|&Tmp;[*[&CharId]:investigation_bonus] -->ADD_POS_SIGN|[&Tmp] --&InvestigationBonus|[&zRET]\n  --?\"[*[&CharId]:npc_medicine_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_medicine_base]|&Tmp;[*[&CharId]:medicine_bonus] -->ADD_POS_SIGN|[&Tmp] --&MedicineBonus|[&zRET]\n  --&tbl|+ [tr [&trStyle1]][td [&tdStyle1]]Investigation[/td]\n            [td [&tdStyle2]][button][&InvestigationBonus]::~[*[&CharId]:character_name]|npc_investigation[/button][/td]\n            [td [&tdStyle1]]Medicine[/td]\n            [td [&tdStyle2]][button][&MedicineBonus]::~[*[&CharId]:character_name]|npc_medicine[/button][/td][/tr]\n\n  --?\"[*[&CharId]:npc_nature_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_nature_base]|&Tmp;[*[&CharId]:nature_bonus] -->ADD_POS_SIGN|[&Tmp] --&NatureBonus|[&zRET]\n  --?\"[*[&CharId]:npc_perception_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_perception_base]|&Tmp;[*[&CharId]:perception_bonus] -->ADD_POS_SIGN|[&Tmp] --&PerceptionBonus|[&zRET]\n  --&tbl|+ [tr [&trStyle1]][td [&tdStyle1]]Nature[/td]\n            [td [&tdStyle2]][button][&NatureBonus]::~[*[&CharId]:character_name]|npc_nature[/button][/td]\n            [td [&tdStyle1]]Perception[/td]\n            [td [&tdStyle2]][button][&PerceptionBonus]::~[*[&CharId]:character_name]|npc_perception[/button][/td][/tr]\n\n  --?\"[*[&CharId]:npc_performance_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_performance_base]|&Tmp;[*[&CharId]:performance_bonus] -->ADD_POS_SIGN|[&Tmp] --&PerformanceBonus|[&zRET]\n  --?\"[*[&CharId]:npc_persuasion_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_persuasion_base]|&Tmp;[*[&CharId]:persuasion_bonus] -->ADD_POS_SIGN|[&Tmp] --&PersuasionBonus|[&zRET]\n  --&tbl|+ [tr [&trStyle1]][td [&tdStyle1]]Performance[/td]\n            [td [&tdStyle2]][button][&PerformanceBonus]::~[*[&CharId]:character_name]|npc_performance[/button][/td]\n            [td [&tdStyle1]]Persuasion[/td]\n            [td [&tdStyle2]][button][&PersuasionBonus]::~[*[&CharId]:character_name]|npc_persuasion[/button][/td][/tr]\n\n  --?\"[*[&CharId]:npc_religion_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_religion_base]|&Tmp;[*[&CharId]:religion_bonus] -->ADD_POS_SIGN|[&Tmp] --&ReligionBonus|[&zRET]\n  --?\"[*[&CharId]:npc_sleight_of_hand_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_sleight_of_hand_base]|&Tmp;[*[&CharId]:sleight_of_hand_bonus] -->ADD_POS_SIGN|[&Tmp] --&SOHBonus|[&zRET]\n  --&tbl|+ [tr [&trStyle1]][td [&tdStyle1]]Religion[/td]\n            [td [&tdStyle2]][button][&ReligionBonus]::~[*[&CharId]:character_name]|npc_religion[/button][/td]\n            [td [&tdStyle1]]SoH[/td]\n            [td [&tdStyle2]][button][&SOHBonus]::~[*[&CharId]:character_name]|npc_sleight_of_hand[/button][/td][/tr]\n\n  --?\"[*[&CharId]:npc_stealth_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_stealth_base]|&Tmp;[*[&CharId]:stealth_bonus] -->ADD_POS_SIGN|[&Tmp] --&StealthBonus|[&zRET]\n  --?\"[*[&CharId]:npc_survival_flag]\" -ne \"0\"|&Tmp;[*[&CharId]:npc_survival_base]|&Tmp;[*[&CharId]:survival_bonus] -->ADD_POS_SIGN|[&Tmp] --&SurvivalBonus|[&zRET]\n\n  --&tbl|+ [tr [&trStyle1]][td [&tdStyle1]]Stealth[/td]\n            [td [&tdStyle2]][button][&StealthBonus]::~[*[&CharId]:character_name]|npc_stealth[/button][/td]\n            [td [&tdStyle1]]Survival[/td]\n            [td [&tdStyle2]][button][&SurvivalBonus]::~[*[&CharId]:character_name]|npc_survival[/button][/td][/tr]\n\t--+|[&tbl]\n  \n  -->FOOTER_BUTTONS_SECONDARY| Add Top Button to bottom right corner of card\n  --X|\n\n\t--:NDR_ADDGM| \n\t  --&tbl|+ [tr][td style=\"text-align:left\"][%1%][/td] [td style=\"text-align:right\"]([%2%])[/td][/tr]\n\t--<|\n\n--/|==================  NPC Features/Actions Report =======================\n--:NPC_FEATURES_REPORT| NFR_\n  --~Arg|string;split;\\;[&reentryval]\n  --&CharId|[&Arg1]\n  --&TokenId|[&Arg2]\n  --#hidecard|0\n  --#title|[*[&TokenId]:t-name]\n  --#leftsub|NPC Features/Actions\n\n  --#oddRowBackground|#BADFBB\n  --#evenRowBackground|#BADFBB\n  --#buttonbackground|#BADFBB\n  --#buttontextcolor|#0905f2\n  --#buttonbordercolor|#BADFBB\n\n  --/#oddRowBackground|#edf7f0\n  --/#evenRowBackground|#edf7f0\n  --/#buttonbackground|#edf7f0\n  --/#buttontextcolor|#095c1f\n  --/#buttonbordercolor|#edf7f0  \n\n  --/| Traits\n  --&Header|Traits\n\t-->Lib5E_NPC_Description_List|[&CharId];repeating_npctrait;Traits;[&Header]\n\n  --/| Actions/Attacks\n  --&Header|Actions/Attacks\n\t-->Lib5E_NPC_Action_List|[&CharId];[&Header]\n\n  --/| Legendary Actions\n  --&Header|Legendary Actions\n\t-->Lib5E_NPC_Legendary_Action_List|[&CharId];[&Header] \n\n  --/| Reactions\n  --&Header|Reactions\n\t-->Lib5E_NPC_Description_List|[&CharId];repeating_npcreaction;Available Reactions;[&Header]\n\n  --/| Spells\n  --&Header|Spells\n\n\n  -->FOOTER_BUTTONS_SECONDARY| Add Top Button to bottom right corner of card\n  --X|\n\n--/|==================  Spells Report =======================\n--:NPC_SPELLS_REPORT| NSR_ \n  --~Arg|string;split;\\;[&reentryval]\n  --&CharId|[&Arg1]\n  --&TokenId|[&Arg2]\n  --#hidecard|0\n  --#buttontextcolor|#0905f2\n  --#buttonbordercolor|#BADFBB\n  --#buttonbackground||#BADFBB\n\n\t--#oddRowBackground|#BADFBB\n  --#evenRowBackground|#BADFBB\n  \n  --#title|[*[&TokenId]:t-name]\n  --#leftsub|NPC Spells\n\n  --&tStyle|style=\"width:100%;text-align:left;padding:1px;border-spacing:0px;border-collapse:collapse;text-shadow: 0px 0px 0px black;border: 0px dashed black;\"\n  --&trStyle1|style=\"border:1px dashed black;\"\n  --&trStyle2|style=\"border:0px dashed black;\"\n  --&tdStyle1|style=\"width:20%;text-align:right\"\n  --&tdStyle2|style=\"width:20%;text-align:center\"\n  --&tdStyle3|style=\"width:100%;text-align:center;background-color:#edf7f0;font-size:100%\" colspan=2  \n\n  --/| Spell Attributes\n  --&SCA|[*[&CharId]:spellcasting_ability]\n  --~SCA|string;substring;3;3;[&SCA]\n\n  --+|[t [&tStyle]]\n        [tr][td [&tdStyle1]][b]Save:[/b] [/td][td [&tdStyle2]][*[&CharId]:spell_save_dc] ([&SCA])[/td]\n            [td [&tdStyle1]][b]Spell Atk:[/b] [/td][td [&tdStyle2]][*[&CharId]:spell_attack_bonus][/td]\n            [td [&tdStyle2]][rbutton]Reset::RESET_SPELL_SLOTS;[&CharId][/rbutton][/td]\n            [/tr][/t]\n\n  -->REPORTSPELLS|cantrip\n  -->REPORTSPELLS|1\n  -->REPORTSPELLS|2\n  -->REPORTSPELLS|3\n  -->REPORTSPELLS|4\n  -->REPORTSPELLS|5\n  -->REPORTSPELLS|6\n  -->REPORTSPELLS|7\n  -->REPORTSPELLS|8\n  -->REPORTSPELLS|9\n\n  -->FOOTER_BUTTONS_SECONDARY| Add Top Button to bottom right corner of card\n\n  --X|\n\n--:REPORTSPELLS|Parameter: Level\n  --#hidecard|0\n  --&zLvl|[%1%]\n\n  --Rfirst|[*[&CharId]:character_id];repeating_spell-[&zLvl]\n\n  --?\"[*R:spellname]\" -eq NoRepeatingAttributeLoaded|SB_DONE\n  \n  --&STblStyle1|\"width:100%;text-align:center;padding:5px;border-spacing:0px;border-collapse:collapse;text-shadow: 1px 1px 3px purple;border: 1px dashed purple;\"\n  \n  --&LvlDesc|Cantrip\n  --&zLvlSlots|\n\n  --?[&zLvl] -eq cantrip|SB_SKIPCANTRIP\n    --&LvlDesc|Level [&zLvl]\n    --=SlotsTotal|[*[&CharId]:lvl[&zLvl]_slots_total]\n    --=SlotsExpended|[*[&CharId]:lvl[&zLvl]_slots_expended]\n    --&zLvlSlots|Slots [b][$SlotsExpended.Total][/b] of [b][$SlotsTotal.Total][/b] remaining\n  --:SB_SKIPCANTRIP|\n\n  --&STbl|[t style=[&STblStyle1]][tr][td][&LvlDesc][/td][td][&zLvlSlots][/td][/tr][/t]\n  --+|[&STbl]\n\n  --:SB_DISPLAYLOOP|\n    --?\"[*R:spellname]\" -eq NoRepeatingAttributeLoaded|SB_DONE\n\n      --&zRIT|[r]\n      --?\"[*R:spellritual]\" -inc \"Yes\"|SB_ENDRIT\n        --&zRIT|\n      --:SB_ENDRIT|\n\n      --&zCON|[c]\n      --?\"[*R:spellconcentration]\" -inc \"concentration=1\"|SB_ENDCON\n        --&zCON|\n      --:SB_ENDCON| \n\n      --?[&zLvl] -eq cantrip -or [*R:spellprepared] -eq 1|SB_PREPARED\n        --+|[rbutton]&#x2B1C;::TOGGLE_PREPARED_SPELL;[&CharId]\\[*R>spellprepared]\\1[/rbutton] [rbutton]&#x1F50E;[*R:spellname]::SPELL_DETAILS;[*R:spellname]\\repeating_spell-[&zLvl]\\spellname[/rbutton] [i][*R:innate] [&zCON][&zRIT][/i]\n      --^SB_ENDIF-1|\n\n      --:SB_PREPARED|\n        --+|[rbutton]&#x2705;::TOGGLE_PREPARED_SPELL;[&CharId]\\[*R>spellprepared]\\0[/rbutton][rbutton]&#x1F50E;[*R:spellname]::SPELL_DETAILS;[*R:spellname]\\repeating_spell-[&zLvl]\\spellname[/rbutton] [i][*R:innate] [&zCON][&zRIT][/i]\n      --:SB_ENDIF-1|\n    --Rnext|\n\n  --^SB_DISPLAYLOOP|  \n  --:SB_DONE|\n\n--<|Return\n\n--/|==================  Spell Details =======================\n--:SPELL_DETAILS| (SBD_)\n  --/+ReEntryVal|[&reentryval]\n  --~rArgs|string;split;\\;[&reentryval]\n  --/+Split|[&rArgs]: [&rArgs1], [&rArgs2], [&rArgs3]\n\n  --Rfind|[*[&CharId]:character_id];[&rArgs1];[&rArgs2];[&rArgs3]\n  --/Rdump|\n\n  --#hidecard|0\n  --#title|[*R:spellname]  [*R:innate]\n  --#leftsub|[*[&CharId]:character_name] ([*[&CharId]:caster_level])\n  --#rightsub|[*R:spellschool] [*R:spelllevel]\n  --#oddRowBackground|#BADFBB \n  --#evenRowBackground|#BADFBB\n  --#buttonbackground|#BADFBB\n  --#buttontextcolor|#0905f2\n  --#buttonbordercolor|#BADFBB\n\n\n  --+Casting Time:|[*R:spellcastingtime]\n  --+Range:|[*R:spellrange]\n  --+Target:|[*R:spelltarget]\n\n  --&zSCV|V\n  --?\"[*R:spellcomp_v]\" -inc \"v=1\"|SBD_ENDSCV\n    --&zSCV|\n  --:SBD_ENDSCV|\n\n  --&zSCS|S\n  --?\"[*R:spellcomp_s]\" -inc \"s=1\"|SBD_ENDSCS\n    --&zSCS|\n  --:SBD_ENDSCS|\n\n  --&zSCM|M\n  --?\"[*R:spellcomp_m]\" -inc \"m=1\"|SBD_ENDSCM\n    --&zSCM|\n  --:SBD_ENDSCM|\n\n  --+Components:|[&zSCV][&zSCS][&zSCM] [i]([*R:spellcomp_materials])[/i]\n  --+Duration:|[*R:spellduration]\n  --+|[*R:spelldescription]\n  \n  --~Len|string;length;[*R:spellathigherlevels]\n  --?[$Len] -le 5|SBD_END_HV_CHECK\n    --+|[b][i]At Higher Levels.[/i][/b][*R:spellathigherlevels]\n  --:SBD_END_HV_CHECK|\n  \n   --+|[c][sheetbutton]&#x1F4AB; Cast Spell &#x1F9D9;::[*[&CharId]:character_name]::[&rArgs2]_[*R:xxxActionIDxxxx]_spell[/sheetbutton][/c]\n\n  -->DNDBEYOND_SPELL_LINK|[*R:spellname]\n  --+|[l][b]Spell Save DC[/b] [*[&CharId]:spell_save_dc][/l][r][button]D&DBeyond::[&zDnDBeyondSpellLink][/button][/r]\n\n  -->FOOTER_BUTTONS_SECONDARY| Add Top Button to bottom right corner of card\n  \n  --X|\n--<|\n\n--/|==================  Toggle Spell Prepared =======================\n--:TOGGLE_PREPARED_SPELL|CharId; SpellPrepared_field\n  --#hidecard|1\n  --+ReEntryVal|[&reentryval]\n  --~rArgs|string;split;\\;[&reentryval]\n  --+Split|[&rArgs]: [&rArgs1], [&rArgs2], [&rArgs3]\n  --@setattr|_charid [&rArgs1] _evaluate _silent _[&rArgs2]|[&rArgs3]\n  --+Prepared Toggled| @setattr|_charid [&Args1] _evaluate _[&rArgs2]|[&rArgs3]\n\n  --X|\n--<|\n\n\n--/|==================  RESET SPELL Slots =======================\n--:RESET_SPELL_SLOTS| Arg1: CharId \n  --/|Rest Spell slots for character sent in \n  --#title|Reset Spell Slots \n  --#whisper|gm\n  --#hidecard|0\n  --~Arg|string;split;\\;[&reentryval]\n\n  --@setattr|_charid [&Arg1] _evaluate _lvl1_slots_expended|%lvl1_slots_total% _lvl2_slots_expended|%lvl2_slots_total% _lvl3_slots_expended|%lvl3_slots_total% _lvl4_slots_expended|%lvl4_slots_total% _lvl5_slots_expended|%lvl5_slots_total% _lvl6_slots_expended|%lvl6_slots_total% _lvl7_slots_expended|%lvl7_slots_total% _lvl8_slots_expended|%lvl8_slots_total% _lvl9_slots_expended|%lvl9_slots_total%\n  --X| Exit\n--<|\n\n--/|==================  Add Turnorder =======================\n--:ADD_TURNORDER| Arg1: TokenID  (AT_)\n  --/|Add to TurnOrder (Init Roll)\n  --#title|Add to Turnorder\n  --#whisper|gm\n  --#hidecard|0\n  --~Arg|string;split;\\;[&reentryval]\n  --&TokenId|[&Arg1]\n\n  --#leftsub|[*[&TokenId]:t-name]\n  --#rightsub|Bonus: [*[&TokenId]:initiative_bonus]\n\n  --=Init|1d20 + [*[&TokenId]:initiative_bonus]\n  --~temp|turnorder;replacetoken;[&TokenId];[$Init]\n\n  --+|[*[&TokenId]:t-name] added to the Turn Order: [$Init]\n  --+ImageURL|[img width=50 height=50][*[&TokenId]:t-imgsrc][/img]\n  --X| Exit\n--<|\n\n--/|==================  Add Numbered to Token Name =======================\n--:ADD_NUMBERED| Arg1: TokenID  (AN_)\n  --/|Add %%NUMBERED%% to token name for TokenAutoNumber script\n  --#title|Add %%NUMBERED%%\n  --#whisper|gm\n  --#hidecard|0\n\n  --~Arg|string;split;\\;[&reentryval]\n  --+Debug|[&reentryval]\n  --+Debug|[&Arg1]\n  --&TokenId|[&Arg1]\n\n  --?\"[*[&TokenId]:t-name]\" -inc NUMBERED|AN_EXIT\n\n  --/|Token doesnt have %%NUMBERED%%, so lets add it\n  --&TN|[*[&TokenId]:t-name] %%NUMBERED%%\n  --+Token Name Changed|\n  --+From|[r][*[&TokenId]:t-name][/r]\n  --+To|[r][&TN][/r]\n  --@token-mod|_set name|\"[&TN]\"\" _ids [&TokenId] _ignore-selected\n\n  --X| Exit\n  --:AN_EXIT|\n  --+Token Name Already has required syntax|\n  --X| Exit\n--<|\n\n--:TOGGLE_LAYER|TokenId\n  --#hidecard|1\n  --~Arg|string;split;\\;[&reentryval]\n  --+TOGGLE_LAYER |[&Arg1]\n  --&TokenId|[&Arg1]\n\n  --?\"[*[&TokenId]:t-layer]\" -eq \"objects\"|&Layer;gmlayer|&Layer;objects\n\n  -->SET_LAYER|[&TokenId];[&Layer]\n--<|\n\n--/|==================  Utility Functions =======================\n--:SHORT_NAME|Shortens player name for reporting purposes (6 characters); Parameter:Character_Name\n  --~gSN|string;left;6;[%1%]\n--<| Return\n\n--:SET_LAYER|TokenId;layer\n  --+SET_LAYER |[%1%] [%2%]\n  --&TokenId|[%1%]\n  --&Layer|[%2%]\n  --@token-mod|_set layer|[&Layer] _ids [&TokenId] _ignore-selected\n\n  --X|\n--<|\n\n--:FIND_TOKEN|TokenId - Pings the token name\n  --#hidecard|1  \n  --/@find-token|_[&reentryval]\n  --@ping-token|_[&reentryval]\n  --X|\n--<|\n\n--:CONCAT|Add 2 strings\n  --&gCONCAT|[%1%][%2%]\n  --[%2%]|[&gCONCAT]\n  --[%1%]|[&gCONCAT]\n--<| Return\n\n--:ADD_POS_SIGN|Parameter1: Number / Can be a roll or string variable, but should be a number. \n --/| Populates zRET(String) and rRET(Roll Variable) (Global vars effectively)\n\t--&zRET|[%1%]\n\t--=rRET|[%1%]\n\t--?[%1%] -le 0|_APS_SKIP\t--=rRET|&#43;[%1%] --&zRET|[$rRET.Text]\t--:_APS_SKIP|\n--<|\n\n--:SECTION_HEADER|Title\n  --&hdrstyle_T|style=\"width:100%;padding:1px;border-spacing:0px;border-collapse:collapse;text-shadow: 0px 0px 0px black;border:1px solid black;\"\n  --&hdrstyle_TR|style=\"border:0px solid black;\"\n  --&hdrstyle_TD|style=\"width:100%;background-color:#edf7f0;font-size:110%;font-weight:bold;text-align:center\"\n  --+|[t [&hdrstyle_T]][tr [&hdrstyle_TR]][td [&hdrstyle_TD]][c][%1%][/c][/td][/tr][/t]\n--<|\n\n--:FOOTER_BUTTONS_MAIN|\n    --+|[r][button]NPC::~Mule|NPC-Tools[/button]\n\t       \t\t[button]DM::~Mule|DM-Tools[/button][/r]  \n--<|\n\n--:FOOTER_BUTTONS_SECONDARY|\n    --+|[l][rbutton]&#x1F4C3;::NPC_DETAILS_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n\t          [rbutton]&#x1F3F9;::NPC_FEATURES_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n\t          [rbutton]&#x1F4AB;::NPC_SPELLS_REPORT;[&CharId]\\[&TokenId]\\[/rbutton]\n\t          [rbutton]&#x1F6A6;::ADD_TURNORDER;[&TokenId][/rbutton]\n\t          [rbutton]&#x1F51F;::ADD_NUMBERED;[&TokenId][/rbutton]\n\t          [rbutton]&#x1F3AF;::FIND_TOKEN;[&TokenId][/rbutton][/l]\n\t       [r][button]NPC::~Mule|NPC-Tools[/button]\n\t       \t\t[button]DM::~Mule|DM-Tools[/button][/r]  \n\t  --/+CharId|[&CharId]\n\t  --/+TokenId|[&TokenId]\n--<|\n\n\n--:DNDBEYOND_MONSTER_LINK|MonsterName \n\t--/|Format is https://www.dndbeyond.com/monsters/vampire-spellcaster\n\t--~MN|string;replace; ;-;[%1%]\n\t--&zDnDBeyondMonsterLink|https://www.dndbeyond.com/monsters/[&MN]\n--<|\n\n--:DNDBEYOND_SPELL_LINK|SpellName \n\t--/|Format is https://www.dndbeyond.com/spells/dominate-person\n\t--~SN|string;replace; ;-;[%1%]\n\t--&zDnDBeyondSpellLink|https://www.dndbeyond.com/spells/[&SN]\n--<|\n\n--:Lib5E_NPC_Description_List|character_id;repeatingList; header\n\t--Rfirst|[%1%];[%2%];[%3%]\n\t--/rDump| \n\t--?\"[*R:name]\" -eq \"NoRepeatingAttributeLoaded\"|_Lib5E_NPCDESCL_Done\n\t-->SECTION_HEADER|[%4%]  \n\n\t--:_Lib5E_NPCDESCL_Loop| \n\t\t--?\"[*R:name]\" -eq \"NoRepeatingAttributeLoaded\"|_Lib5E_NPCDESCL_Done\n\t\t--&_Lib5E_NameTemp|[*R:name] \n\t\t--~_Lib5E_NameTemp|string;replace;(; ;[&_Lib5E_NameTemp] \n\t\t--~_Lib5E_NameTemp|string;replace;); ;[&_Lib5E_NameTemp]\n\t\t--+|[b][u][&_Lib5E_NameTemp]. [/b][/u][*R:description]\n\t\t--Rnext| \n\t--^_Lib5E_NPCDESCL_Loop| \n\t--:_Lib5E_NPCDESCL_Done| \n--<|\n\n--:Lib5E_NPC_Action_List|character_id; header\n\t--&_Lib5E_Temp| \n\n\t--Rfirst|[%1%];repeating_npcaction \n\t--?\"[*R:name]\" -eq \"NoRepeatingAttributeLoaded\"|_Lib5E_NPCAL_Done \n\n\t-->SECTION_HEADER|[%2%]  \n\n\t--:_Lib5E_NPCAL_Loop| \n\t\t--rDump| \n\t\t--?\"[*R:name]\" -eq \"NoRepeatingAttributeLoaded\"|_Lib5E_NPCAL_Done \n\t\t--&_Lib5E_NameTemp|[*R:name] \n\t\t--~_Lib5E_NameTemp|string;replace;(; ;[&_Lib5E_NameTemp] --~_Lib5E_NameTemp|string;replace;); ;[&_Lib5E_NameTemp] \n\t\t\t--+|[br]\n\t\t\t--+[&_Lib5E_NameTemp].| [r][button]&#x1F3F9;::~[%1%]|[*R>npc_action][/button][/r]\n\t\t--?\"[*R:attack_flag]\" -ne \"on\"|_Lib5E_NPCAL_SKIPATK\n\t\t\t--+|[i][*R:attack_type:] Weapon Attack:[/i] [*R:attack_tohitrange]\n\t\t\t--+|[i]Hit:[/i] [*R:attack_onhit]\n\t\t--:_Lib5E_NPCAL_SKIPATK|\n\t\t--+|[*R:description]\n\t\t\n\t\t--Rnext| \n\n\t--^_Lib5E_NPCAL_Loop| \n\t--:_Lib5E_NPCAL_Done| \n\n--<|\n\n--:Lib5E_NPC_Legendary_Action_List|character_id; header\n\t--&_Lib5E_Temp| \n\t--&_Lib5E_FoundOne|0 \n\t--Rfirst|[%1%];repeating_npcaction-l \n\t--?\"[*R:name]\" -eq \"NoRepeatingAttributeLoaded\"|_Lib5E_NPCLAL_Done\n\n\t-->SECTION_HEADER|[%2%] ([*[%1%]:npc_legendary_actions])\n\n\t--+|[*[%1%]:npc_legendary_actions_desc]\n\t\n\t--:_Lib5E_NPCLAL_Loop|\n\t\t--/rDump|  \n\t\t--?\"[*R:name]\" -eq \"NoRepeatingAttributeLoaded\"|_Lib5E_NPCLAL_Done\n\t\t--&_Lib5E_NameTemp|[*R:name] \n\t\t--~_Lib5E_NameTemp|string;replace;(; ;[&_Lib5E_NameTemp] --~_Lib5E_NameTemp|string;replace;); ;[&_Lib5E_NameTemp]\n\t\t--+|[br][b][&_Lib5E_NameTemp][/b][r][button]&#x1F409;::~[%1%]|[*R>npc_action][/button][/r]\n\t\t--+|[*R:description]\n\n\t\t--Rnext| \n\t--^_Lib5E_NPCLAL_Loop| \n\t--:_Lib5E_NPCLAL_Done| \n\n--<|\n\n--:Lib5E_NPC_Attribute_Summary|character_id\n--+|[t width=100%][tr][td][b]Str[/b] [*[%1%]:strength] ([*[%1%]:strength_mod])[/td][td][b]Dex[/b] [*[%1%]:dexterity] ([*[%1%]:dexterity_mod])[/td][td][b]Con[/b] [*[%1%]:constitution] ([*[%1%]:constitution_mod]) [/td][/tr]\n       [tr][td][b]Int[/b] [*[%1%]:intelligence] ([*[%1%]:intelligence_mod])[/td][td][b]Wis[/b] [*[%1%]:wisdom] ([*[%1%]:wisdom_mod])[/td][td][b]Cha[/b] [*[%1%]:charisma] ([*[%1%]:charisma_mod])[/td][/tr]\n       [tr][td][b]AC[/b] [*[%1%]:npc_ac][/td][td][b]HP[/b][*[%1%]:hp]/[*[%1%]:hp^][/td][td][b]CR[/b] [*[%1%]:npc_challenge][/td][/tr][/t] --<|\n\n--:Lib5E_NPC_Qualities_Summary|character_id\n--+Type|[*[%1%]:npc_type] --?\"[*[%1%]:npc_vulnerabilities]\" -eq \"\"|_Lib5E_NPCQS_Skip1 --+Vulnerable|[*[%1%]:npc_vulnerabilities]\n--:_Lib5E_NPCQS_Skip1| --?\"[*[%1%]:npc_resistances]\" -eq \"\"|_Lib5E_NPCQS_Skip2 --+Resistant|[*[%1%]:npc_resistances] --:_Lib5E_NPCQS_Skip2| --?\"[*[%1%]:npc_immunities]\" -eq \"\"|_Lib5E_NPCQS_Skip3 --+Immune|[*[%1%]:npc_immunities]\n--:_Lib5E_NPCQS_Skip3| --?\"[*[%1%]:npc_condition_immunities]\" -eq \"\"|_Lib5E_NPCQS_Skip4 --+Cond. Immune|[*[%1%]:npc_condition_immunities] --:_Lib5E_NPCQS_Skip4| --?\"[*[%1%]:npc_senses]\" -eq \"\"|_Lib5E_NPCQS_Skip5 --+Cond. Immune|[*[%1%]:npc_senses]\n--:_Lib5E_NPCQS_Skip6| --<|\n\n--/|____STATE LIBRARY FUNCTIONS______\n\n--:GET_STATE_VAL|RefName\n--/|Assumes data stored in ordered pairs (Ref1;Val1; Ref2;Val2; Ref3;Val3 ... )\n--/|Sets/Returns for passed RefName[%1%]\n--/|  gSTATE_VAL: Associated value\n--/|  gSTATE_VAL_NDX: value of Value Index position\n--/|  gSTATE_REF_NDX: value of RefName Index position\n--/|  gSTATE_ARY: Array read from State\n--/|If Not Found\n--/|  gSTATE_VAL, gSTATE_VAL_NDX, gSTATE_VAL_NDX set to \"NotFound\"\n\n\t--/|1. Read State Array into memory\n\t--~gSTATE_ARY|stateitem;read;array\n\n\t--/|2. Attempt to find RefName in array\n\t--~Ndx|array;indexof;gSTATE_ARY;[%1%]\n\t--/+FindNdx|[&Ndx]\n\t--?\"[&Ndx]\" -eq \"ArrayError\"|GSV_NOTFOUND\n\n\t--/|3. If Found, step to next item and get value, erroring out if not found (something really wrong happened)\n\t--~|array;setindex;gSTATE_ARY;[&Ndx]\n\t--~Item|array;getcurrent;gSTATE_ARY\n\t--?\"[&Item]\" -eq \"ArrayError\"|GSV_NOTFOUND\n\t--/+ItemRef|[&Item]\n  --~Item|array;getnext;gSTATE_ARY\n\t--?\"[&Item]\" -eq \"ArrayError\"|GSV_NOTFOUND\n\t--/+ItemVal|[&Item]\n\n\t--/|4. Set global state variables to item and indexes found\n\t--&gSTATE_VAL|[&Item]\n\t--&gSTATE_REF_NDX|[&Ndx]\n\t--~Ndx|array;getindex;gSTATE_ARY\n\t--&gSTATE_VAL_NDX|[&Ndx]\n\t--^GSV_EXIT|\n\n\t--/|5. If not Found, set global state variables to \"NotFound\"\n\t--:GSV_NOTFOUND|\n\t--&gSTATE_VAL|NotFound\n\t--&gSTATE_REF_NDX|NotFound\n\t--&gSTATE_VAL_NDX|NotFound\n\n\t--:GSV_EXIT|\n--<|\n\n--:PUT_STATE_VAL|RefName, Value\n--/|Assumes data stored in ordered pairs (Ref1;Val1; Ref2;Val2; Ref3;Val3 ... )\n--/|Adds/Updates Value associated with RefName[%1&] to Value[%2%]\n--/|First thing this function does is calls GET_STATE_VAL which loads the following in memory\n--/|  gSTATE_VAL: Associated value\n--/|  gSTATE_VAL_NDX: value of Value Index position\n--/|  gSTATE_REF_NDX: value of RefName Index position\n--/|  gSTATE_ARY: State Array\n--/|Returns Nothing\n\n\t--/|1. Attempt to find the location of the Referenced Item\n\t-->GET_STATE_VAL|[%1%]\n\t--?\"[&gSTATE_VAL]\" -eq \"NotFound\"|PSV_EXIT\n\n\t--/|2. If Found: Remove Current pair, then proceed to add new pair \n\t--~|array;removeat;gSTATE_ARY;[&gSTATE_VAL_NDX]\n\t--~|array;removeat;gSTATE_ARY;[&gSTATE_REF_NDX]\n\t\n\t--/|3. If Not Found: Just ddd a new pair of values to the state\n  --:PSV_EXIT|\n\t--~|array;add;gSTATE_ARY;[%1%];[%2%]\n\t--~gSTATE_ARY|stateitem;write;array\n--<|\n\n--:DEL_STATE_VAL|RefName\n--/|Assumes data stored in ordered pairs (Ref1;Val1; Ref2;Val2; Ref3;Val3 ... )\n--/|Delete Pair (ref/value) for passed RefName[%1%]\n\n\t-->GET_STATE_VAL|[%1%]\n\n\t--?\"[&gSTATE_VAL]\" -eq \"NotFound\"|DSV_NOTFOUND\n\t--/|2. If Found: Remove Current pair, \n\t--~|array;removeat;gSTATE_ARY;[&gSTATE_VAL_NDX]\n\t--~|array;removeat;gSTATE_ARY;[&gSTATE_REF_NDX]\n\t--~gSTATE_ARY|stateitem;write;array\n\n\t--^DSV_EXIT|\n\t--:DSV_NOTFOUND|\n\t--+DELTE_STATE_VAL|Item Not Found ([%1%])\n\t--^DSV_EXIT|\n\t--DSV_EXIT:\n\n--<|\n\n--:DUMP_STATE_VALUES| Detail Flag (if 1, also dumps ordered pair of StateArray variables)\n--/|Assumes data stored in ordered pairs (Ref1;Val1; Ref2;Val2; Ref3;Val3 ... )\n--/|Loads gSTATE_ARY into Memory and dumps its value as a string\n\n\t--~gzSTATE|stateitem;read;stringvariable\n\t--~grSTATE|stateitem;read;rollvariable\n\t--~gSTATE_ARY|stateitem;read;array\n\t--~z|array;stringify;gSTATE_ARY\n\t--+|[c][b]State Values[/b][/c]\n\t--+String|[&gzSTATE]\n\t--+Roll|[$grSTATE]\n\t--+Array|[&z]\n\n\t--?\"[%1%]\"\" -eq \"1\"|DSV_EXIT\n\n\t--~ItemRef|array;getfirst;gSTATE_ARY\n\t--:LOOPSTART|\n\t\t--/+Debug|1. Ref: [&ItemRef]\n\t\t--?\"[&ItemRef]\" -eq \"ArrayError\"|DSV_EXIT\n\t\t\t--~ItemVal|array;getnext;gSTATE_ARY\n\t\t\t--/+Debug|2. Val: [&ItemVal]\n\t\t\t--?\"[&ItemVal]\" -eq \"ArrayError\"|DSV_ODD_COUNT\n\t\t\t\t--+[&ItemRef]|[&ItemVal]\n\t\t\t\t--~ItemRef|array;getnext;gSTATE_ARY\n\t\t\t--^LOOPSTART|\n\t--:DSV_ODD_COUNT|\n\t\t--+[&ItemRef]|No Value Found for Last Ref Item\n\t--:DSV_EXIT|\n\t--X|\n--<\n\n--:ERASE_STATE_VALUES| \n--/|Erases all state values\n\n\t--&gzSTATE|\" \"\n\t--=grSTATE|\n\t--~|array;define;gSTATE_ARY\n\n\t--~gzSTATE|stateitem;write;stringvariable\n\t--~grSTATE|stateitem;write;rollvariable\n\t--~gSTATE_ARY|stateitem;write;array\n--<|\n\n--:ADD_STATE_STRINGVAL|\n\t--&zVal|[%1%]\n\t--~zVal|stateitem;write;stringvariable\n--<|\n--:ADD_STATE_ROLLVAL|[$rVal]\n\t--=rVal|[%1%]\n\t--~rVal|stateitem;write;rollvariable\n--<|\n}}\n",
            "order": -1
        },
        {
            "name": "NPC-Layers",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{ \n  --:___NPC Layer Tool_2.0__|\n  --:TOP|\n  --#reentrant|NPCLayerTool  \n  --#title|NPC Layer Tool\n  --#titleCardBackground|#095c1f\n  --#oddRowBackground|#BADFBB\n  --#evenRowBackground|#BADFBB\n  --#buttonbackground|#BADFBB\n  --#buttontextcolor|#0905f2\n  --#buttonbordercolor|#BADFBB\n  --#hidecard|0    \n  --#bodyFontSize|11px\n  --#whisper|gm\n  --#debug|1\n\n  --~tokencnt|array;pagetokens;alltokens;@{selected|token_id}\n  --/|Loop through all of the tokens in \"alltokens\" \n  --~TokenId|array;getfirst;alltokens\n\t--?[&TokenId] -eq ArrayError|ENDLOOP\n\n  --?\"[*[&TokenId]:playercharacter]\" -eq 1|CONTINUE\n\n  --:LOOPCHECK|\n    --/+Debug|[*[&TokenId]:t-name], [*[&TokenId]:t-layer], [*[&TokenId]:npc], [*[&TokenId]:t-represents]\n\n    --/|Skip targets that are not NPCs\n    --/?[*[&TokenId]:t-layer] -ne objects|CONTINUE\n    --?\"[*[&TokenId]:npc]\" -ne 1|CONTINUE\n    --?\"[*[&TokenId]:t-represents]\" -inc \"-\"|START\n    --^CONTINUE|\n\n   --:START|\n\n   \t--&ObjMark|o\n   \t--&GMMark|g\n   \t--&MapMark|m\n   \t--&WallMark|l\n\n\t\t--C[*[&TokenId]:t-layer]|objects:OBJECTS|gmlayer:GM|map:MAP|walls:WALLS\n\n\t\t--:OBJECTS| --&ObjMark|[b][u]O[/u][/b] --^BUILDROW|\n\t\t--:GM| --&GMMark|[b][u]G[/u][/b] --^BUILDROW|\n\t\t--:MAP| --&MapMark|[b][u]M[/u][/b] --^BUILDROW|\n\t\t--:WALLS| --&WallMark|[b][u]L[/u][/b] --^BUILDROW|\n\n\t\t--:BUILDROW|\n\n    --&tbl|+ [tr][td style=\"width:68%;text-align:left;background-color:#BADFBB;font-size:80%\"] \n    \t\t\t\t\t\t[b][rbutton][*[&TokenId]:t-name]::FIND_TOKEN;[&TokenId][/rbutton][/b][/td]\n        \t\t\t\t[td style=\"width:8%;text-align:center;background-color:#BADFBB;font-size:80%\"][rbutton][&ObjMark]::SET_LAYER;[&TokenId]\\objects[/rbutton][/td]\n        \t\t\t\t[td style=\"width:8%;text-align:center;background-color:#BADFBB;font-size:80%\"][rbutton][&GMMark]::SET_LAYER;[&TokenId]\\gmlayer[/rbutton][/td]\n        \t\t\t\t[td style=\"width:8%;text-align:center;background-color:#BADFBB;font-size:80%\"][rbutton][&MapMark]::SET_LAYER;[&TokenId]\\map[/rbutton][/td]\n        \t\t\t\t[td style=\"width:8%;text-align:center;background-color:#BADFBB;font-size:80%\"][rbutton][&WallMark]::SET_LAYER;[&TokenId]\\walls[/rbutton][/td]\n        \t   [/tr]\n        \n    --:CONTINUE|\n    --~TokenId|array;getnext;alltokens\n    --?[&TokenId] -ne ArrayError|LOOPCHECK\n  --:ENDLOOP|\n\n  --&tStyle|\"width:100%;text-align:left;padding:1px;border-spacing:1px;border-collapse:collapse;text-shadow: 0px 0px 0px black;border: 0px dashed black;\"\n  --&tbl|[t style=[&tStyle]] [&tbl] [/t]\n  --+|[&tbl]\n  -->FOOTER_BUTTONS|\n--X|\n\n--:FIND_TOKEN|TokenName\n  --#hidecard|1  \n  --@find-token|_[&reentryval]\n  --@ping-token|_[&reentryval]\n  --X|\n--<|\n\n--:SET_LAYER|TokenName, layer\n  --#hidecard|1\n  --~Arg|string;split;\\;[&reentryval]\n  --+Debug|[&reentryval]\n  --+Debug|[&Arg1] [&Arg2]\n  --&TokenId|[&Arg1]\n  --&Layer|[&Arg2]\n  --@token-mod|_set layer|[&Layer] _ids [&TokenId] _ignore-selected\n  --X|\n--<|\n\n--:FOOTER_BUTTONS|\n    --+|[r][button]NPC::~Mule|NPC-Tools[/button][button]DM::~Mule|DM-Tools[/button][button]&#x1F504;::~Mule|NPC-Layers[/button][/r]  \n--<|\n}}\n",
            "order": -1
        },
        {
            "name": "Size-Enlarge",
            "description": "",
            "istokenaction": false,
            "action": "!token-mod --set scale|*2",
            "order": -1
        },
        {
            "name": "Size-Reduce",
            "description": "",
            "istokenaction": false,
            "action": "!token-mod --set scale|*.5",
            "order": -1
        },
        {
            "name": "Set-Status-Marker",
            "description": "",
            "istokenaction": false,
            "action": "!script {{  \n  --/|___Mark_Token_2.0_____\n   --#reentrant|MarkToken\n   --#title|Set Condition/Status\n  --#titleCardBackground|#932729\n  --#whisper|self\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#buttonbackground|#FFFFFF\n  --#buttontextcolor|#0905f2\n  --#buttonbordercolor|#FFFFFF\n  --#debug|1\n\n  --&TokenId|@{selected|token_id}\n\n  --&tStyle|style=\"width:100%;padding:1px;border-spacing:0px;border-collapse:collapse;text-shadow: 0px 0px 0px black;border:0px dashed black;\"\n  --&trStyle1|style=\"border:0px dashed black;\"\n  --&tdStyle1|style=\"width:50%;text-align:left;background-color:#FFFFFF;font-size:100%\"\n  --&tdStyle2|style=\"width:50%;text-align:left;background-color:#FFFFFF;font-size:100%\"\n\n  -->SECTION_HEADER|Mark Conditions\n  --+|[t [&tStyle]]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Blinded::SET_STATUSMARK;[&TokenId]\\Blinded[/rbutton][/td][td [&tdStyle1]][rbutton]Grappled::SET_STATUSMARK;[&TokenId]\\Grappled[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Charmed::SET_STATUSMARK;[&TokenId]\\Charmed[/rbutton][/td][td [&tdStyle1]][rbutton]Incapacitated::SET_STATUSMARK;[&TokenId]\\Incapacitated[/rbutton][/td][/tr] \n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Deafened::SET_STATUSMARK;[&TokenId]\\Deafened[/rbutton][/td][td [&tdStyle1]][rbutton]Invisible::SET_STATUSMARK;[&TokenId]\\Invisible[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Exhaustion 1::SET_STATUSMARK;[&TokenId]\\exh1[/rbutton][/td][td [&tdStyle1]][rbutton]Paralyzed::SET_STATUSMARK;[&TokenId]\\Paralyzed[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Exhaustion 2::SET_STATUSMARK;[&TokenId]\\exh2[/rbutton][/td][td [&tdStyle1]][rbutton]Petrified::SET_STATUSMARK;[&TokenId]\\Petrified[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Exhaustion 3::SET_STATUSMARK;[&TokenId]\\exh3[/rbutton][/td][td [&tdStyle1]][rbutton]Poisoned::SET_STATUSMARK;[&TokenId]\\Poisoned[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Exhaustion 4::SET_STATUSMARK;[&TokenId]\\exh4[/rbutton][/td][td [&tdStyle1]][rbutton]Prone::SET_STATUSMARK;[&TokenId]\\Prone[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Exhaustion 5::SET_STATUSMARK;[&TokenId]\\exh5[/rbutton][/td][td [&tdStyle1]][rbutton]Restrained::SET_STATUSMARK;[&TokenId]\\Restrained[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Exhaustion 6::SET_STATUSMARK;[&TokenId]\\exh6[/rbutton][/td][td [&tdStyle1]][rbutton]Unconscious::SET_STATUSMARK;[&TokenId]\\Unconscious[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Frightened::SET_STATUSMARK;[&TokenId]\\Frightened[/rbutton][/td][td][/td][/tr]\n        \n      [/t]\n  -->SECTION_HEADER|Mark Status\n  --+|[t [&tStyle]]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Aid::SET_STATUSMARK;[&TokenId]\\Aid[/rbutton][/td][td [&tdStyle1]][rbutton]Heroism::SET_STATUSMARK;[&TokenId]\\Heroism[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Bane::SET_STATUSMARK;[&TokenId]\\Bane[/rbutton][/td][td [&tdStyle1]][rbutton]Hexed::SET_STATUSMARK;[&TokenId]\\Hexed[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Bardic Inspiration::SET_STATUSMARK;[&TokenId]\\inspired[/rbutton][/td][td [&tdStyle1]][rbutton]Hidden::SET_STATUSMARK;[&TokenId]\\Hidden[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Blessed::SET_STATUSMARK;[&TokenId]\\Blessed[/rbutton][/td][td [&tdStyle1]][rbutton]Hunters Mark::SET_STATUSMARK;[&TokenId]\\targeted[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Charmed::SET_STATUSMARK;[&TokenId]\\Charmed[/rbutton][/td][td [&tdStyle1]][rbutton]Mirror Image::SET_STATUSMARK;[&TokenId]\\mirrored[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Concentrating::SET_STATUSMARK;[&TokenId]\\Concentrating[/rbutton][/td][td [&tdStyle1]][rbutton]Rage::SET_STATUSMARK;[&TokenId]\\Rage[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Cursed::SET_STATUSMARK;[&TokenId]\\Cursed[/rbutton][/td][td [&tdStyle1]][rbutton]Shield::SET_STATUSMARK;[&TokenId]\\Shield[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Death::SET_STATUSMARK;[&TokenId]\\Death[/rbutton][/td][td [&tdStyle1]][rbutton]Shrunk::SET_STATUSMARK;[&TokenId]\\Shrunk[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Disarmed::SET_STATUSMARK;[&TokenId]\\Disarmed[/rbutton][/td][td [&tdStyle1]][rbutton]Sleeping::SET_STATUSMARK;[&TokenId]\\Sleeping[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Drunk::SET_STATUSMARK;[&TokenId]\\Drunk[/rbutton][/td][td [&tdStyle1]][rbutton]Slowed::SET_STATUSMARK;[&TokenId]\\Slowed[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Enlarged::SET_STATUSMARK;[&TokenId]\\Enlarged[/rbutton][/td][td [&tdStyle1]][rbutton]Strong::SET_STATUSMARK;[&TokenId]\\Strong[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Flying::SET_STATUSMARK;[&TokenId]\\Flying[/rbutton][/td][td [&tdStyle1]][rbutton]Wet::SET_STATUSMARK;[&TokenId]\\Wet[/rbutton][/td][/tr]\n          [tr [&trStyle1]][td [&tdStyle1]][rbutton]Hasted::SET_STATUSMARK;[&TokenId]\\Hasted[/rbutton][/td][td [&tdStyle1]][rbutton]Wild Shape::SET_STATUSMARK;[&TokenId]\\beast[/rbutton][/td][/tr]\n          \n      [/t]\n--X|\n\n--:SET_STATUSMARK|\n  --~Arg|string;split;\\;[&reentryval]\n  --/+Debug|[&reentryval]\n  --/+Debug|[&Arg1] [&Arg2]\n  --@mark|[&Arg1] [&Arg2]\n  --X|\n--<|\n\n--:SECTION_HEADER|Title\n  --&hdrstyle_T|style=\"width:100%;padding:1px;border-spacing:0px;border-collapse:collapse;text-shadow: 0px 0px 0px black;border:1px solid black;\"\n  --&hdrstyle_TR|style=\"border:0px solid black;\"\n  --&hdrstyle_TD|style=\"width:100%;background-color:#edf7f0;font-size:110%;font-weight:bold;text-align:center\"\n  --+|[t [&hdrstyle_T]][tr [&hdrstyle_TR]][td [&hdrstyle_TD]][c][%1%][/c][/td][/tr][/t]\n--<|\n}}",
            "order": -1
        },
        {
            "name": "Page-Assets",
            "description": "",
            "istokenaction": false,
            "action": "!script{{\n  --:|___Page Assets_1.0________\n  --:TOP|\n  --#reentrant|PageAssets\n  --#title|Page Assets Report\n  --#titleCardBackground|#03038a\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#buttonbackground|#FFFFFF\n  --#buttontextcolor|#0905f2\n  --#buttonbordercolor|#FFFFFF\n  --#bodyFontSize|10px\n  --#sourceToken|@{selected|token_id}\n  --#hidecard|0    \n  --#whisper|gm\n  --#debug|1\n  --#activepage|[*C:playerpageid]\n  --#leftsub|[*P:name]\n  --#rightsub|[*P:width] x [*P:height]\n  --#hidecard|0\n\n  --&tbl|\n\n  --&tblCharacters|\n  --&tblNPCs|\n  --&tblMapItems|\n  --&tblGMTokens|\n  --&tblOther|\n\n  --&tStyle|style = \"width:100%;padding:1px;border-spacing:0px;border-collapse:collapse;text-shadow: 0px 0px 0px black;border:0px dashed black;\"\n  --&trStyle1|style=\"border-top:1px dashed black;\"\n  --&trStyle2|style=\"border:0px dashed black;\"\n  --&tdStyle1|style=\"width:20%;text-align:left;background-color:#FFFFFF;font-size:80%\"\n  --&tdStyle2|style=\"width:40%;text-align:center;background-color:#FFFFFF;font-size:80%\"\n  --&tdStyle3|style=\"width:40%;text-align:right;background-color:#FFFFFF;font-size:80%\"\n\n  --~TokenCnt|array;pagetokens;alltokens;@{selected|token_id}\n\n  --/|Loop through all of the tokens in \"alltokens\" \n  --~TokenId|array;getfirst;alltokens\n\n    --?[&TokenId] -eq ArrayError|ENDLOOP\n    --:LOOPCHECK|\n\n      --&CharId|[*[&TokenId]:t-represents]\n\n      --&tname|[*[&TokenId]:t-name]\n      --~len|string;length;[&tname]\n      --/+debug|[img width=25 height=25][*[&TokenId]:t-imgsrc][/img] [&tname] ([$len]) [*[&TokenId]:t-layer] [*[&TokenId]:t-represents]\n\n      --?[$len.Total] -gt 0|SKIP1 --&tname|Blank --:SKIP1|\n\n      --&IsDrawingType|Drawing\n      --?[*[&TokenId]:t-isdrawing] -eq true|SKIP2 --&IsDrawingType|Token --:SKIP2|\n\n      --/|Round Width and Height to reduce number of potential numbers after decimal point\n      --=Width|[*[&TokenId]:t-width] \\ 1 \n      --=Height|[*[&TokenId]:t-height] \\ 1 \n\n      --&Row|[tr [&trStyle1]] \n            [td [&tdStyle1]] [img width=25 height=25][*[&TokenId]:t-imgsrc][/img] [/td]\n            [td [&tdStyle2]] [rbutton][&tname]::FIND_TOKEN;[&TokenId][/rbutton] [/td] \n            [td [&tdStyle3]] [*[&TokenId]:t-layer] [/td] [/tr]\n          [tr [&trStyle2]] \n            [td [&tdStyle1]] [$Width.Total] &nbsp; x &nbsp; [$Height.Total] [/td]\n            [td [&tdStyle2]] [&IsDrawingType] [/td] \n            [td [&tdStyle3]] [&TokenId] [/td] [/tr]\n\n      --/| Test to see what kind of token we are looking at\n      --/?\"[*[&CharId]:PlayerCharacter]\" -eq \"1\"|ISCHARACTER\n      --?\"[*[&TokenId]:t-represents]\" -inc \"-\" -and \"[*[&TokenId]:NPC]\" -ne \"1\"|ISCHARACTER\n      --?\"[*[&TokenId]:NPC]\" -eq \"1\"|ISNPC\n      --?\"[*[&TokenId]:t-layer]\" -eq \"gmlayer\"|ISGMTOKEN      \n      --?\"[*[&TokenId]:t-layer]\" -eq \"map\"|ISMAPTOKEN     \n      -->ISOTHER|\n\n      --/: Types of Tokens to Group and report on (Character, NPC, Map Item, ...)\n      --/: Track for all tokens (Name, TokenId, Layer, _subtype, imgsrc, represents, isdrawing, )\n      --:ISCHARACTER|\n        --&tblCharacters|+ [&Row]\n\n      -->CONTINUE|\n      --:ISNPC|\n        --&tblNPCs|+ [&Row]\n\n      -->CONTINUE|\n      --:ISGMTOKEN|\n        --&tblGMTokens|+ [&Row]\n \n      -->CONTINUE|\n      --:ISMAPTOKEN|\n        --&tblMapItems|+ [&Row]\n\n      -->CONTINUE|\n      --:ISOTHER|\n        --&tblOther|+ [&Row]\n\n      -->CONTINUE|\n\n    --:CONTINUE|\n\n    --~TokenId|array;getnext;alltokens\n    --?[&TokenId] -ne ArrayError|LOOPCHECK\n    --:ENDLOOP|\n\n    -->SECTION_HEADER|Legend\n    --&tblLegend|[tr [&trStyle1]]\n            [td [&tdStyle1]][b] Image [/b][/td]\n            [td [&tdStyle2]][b] Name(Click to find) [/b][/td] \n            [td [&tdStyle3]][b] Layer [/td] [/b][/tr]\n          [tr [&trStyle2]] \n            [td [&tdStyle1]][b] Size [/b][/td]\n            [td [&tdStyle2]][b] Token/Drawing [/b][/td] \n            [td [&tdStyle3]][b] Token-Id [/td] [/b][/tr]      \n      --+| [t [&tStyle]] [&tblLegend] [/t]\n\n    -->SECTION_HEADER|Characters\n      --+tStyle\n      --+| [t [&tStyle]] [&tblCharacters] [/t]\n    \n    -->SECTION_HEADER|NPCs\n      --+|[t [&tStyle]] [&tblNPCs][/t]    \n\n    -->SECTION_HEADER|GM Tokens\n      --+|[t [&tStyle]] [&tblGMTokens][/t]    \n\n    -->SECTION_HEADER|Map Items\n      --+|[t [&tStyle]] [&tblMapItems][/t]    \n\n    -->SECTION_HEADER|Other\n\n      --+|[t [&tStyle]] [&tblOther][/t]\n\n  --X|\n--<|\n\n--:FIND_TOKEN|TokenId\n  --#hidecard|1  \n  --@ping-token|_[&reentryval] _[&SendingPlayerID]\n  --X|\n--<|\n\n--:SECTION_HEADER|Title\n  --&hdrT|style=\"width:100%;padding:1px;border-spacing:0px;border-collapse:collapse;text-shadow: 0px 0px 1px black;border: 0px solid black;\"\n  --&hdrTR|style=\"border:0px solid black;\"\n  --&hdrTD|style=\"width:100%;background-color:#d8d8e6;font-size:110%;font-weight:bold;text-align:center\"\n  --+|[t [&hdrT]] [tr [&hdrTR]] [td [&hdrTD]] [c] [%1%] [/c] [/td] [/tr] [/t]\n--<|\n\n}}",
            "order": -1
        },
        {
            "name": "DM-Links",
            "description": "",
            "istokenaction": false,
            "action": "!scriptcard {{ \n  --:|___D&D Beyond Links________\n  --:TOP|\n  --#title|Dungeon Master Links\n  --#titleCardBackground|#03038a\n  --/#oddRowBackground|#d8d8e6\n  --#oddRowBackground|#FFFFFF\n  --#evenRowBackground|#FFFFFF\n  --#buttonbackground|#FFFFFF\n  --#buttontextcolor|#0905f2\n  --#buttonbordercolor|#FFFFFF\n  --#bodyFontSize|11px\n  --#bodyFontSize|11px\n  --#whisper|self\n  --#debug|1\n\n  --&tStyle|style=\"width:100%;text-align:left;padding:1px;border-spacing:0px;border-collapse:collapse;text-shadow: 0px 0px 0px black;border: 0px dashed black;\"\n  --&trStyle1|style=\"border:1px dashed black;\"\n  --&trStyle2|style=\"border:0px dashed black;\"\n  --&tdStyle1|style=\"width:25%;text-align:left;background-color:#FFFFFF;font-size:100%\"\n  --&tdStyle2|style=\"width:33%;text-align:left;background-color:#FFFFFF;font-size:100%\"\n  --&tdStyle3|style=\"width:50%;text-align:center;background-color:#FFFFFF;font-size:100%\"\n  --&tdStyle4|style=\"width:100%;text-align:center;background-color:#FFFFFF;font-size:100%\"\n\n  -->DDB_LINK|Sources;sources \n  -->SECTION_HEADER|[&LINK]\n  \t--&tbl|[t [&tStyle]] \n  \t\t\t\t\t[tr [&trStyle1]]\n\t\t\t\t\t  \t-->DDB_LINK|PHB;sources/phb --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|DMG;sources/dmg --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|MM;sources/mm --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|VG2M;sources/vgtm --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n  \t--&tbl|+ [/tr] [tr [&trStyle1]]\n\t\t\t\t\t  \t-->DDB_LINK|XG2E;sources/xgte --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|TCOE;sources/tcoe --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|SCAG;sources/scag --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|OOTA;sources/oota --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n  \t--&tbl|+ [/tr] [tr [&trStyle1]]\n\t\t\t\t\t  \t-->DDB_LINK|VRGTR;sources/vrgtr --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|SAC;sources/sac --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n\t\t\t\t\t  \t--&LINK| --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n\t\t\t\t\t  \t--&LINK| --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n  \t--&tbl|+ [/tr] [/t]\n  \t--+|[&tbl]\n\n  -->DDB_LINK|Character Setup;essentials/creating-a-character \n  -->SECTION_HEADER|[&LINK]\n  \t--&tbl|[t [&tStyle]] \n  \t\t\t\t\t[tr [&trStyle1]]\n\t\t\t\t\t  \t-->DDB_LINK|Races;races --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Classes;classes --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Spells;spells --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Feats;feats --&tbl|+ [td [&tdStyle1]] [&LINK] [/td]\n\t\t\t\t\t  \t--&tbl|+ [/tr] [tr [&trStyle1]]\n  \t--&tbl|+ [t [&tStyle]] \n  \t\t\t\t\t\t[tr [&trStyle1]]\n\t\t\t\t\t\t  \t-->DDB_LINK|Backgrounds;backgrounds --&tbl|+ [td [&tdStyle3]] [&LINK] [/td]\n\t\t\t\t\t  \t\t-->DDB_LINK|Equipment;equipment --&tbl|+ [td [&tdStyle3]] [&LINK] [/td]\n  \t--&tbl|+ [/tr] [tr [&trStyle1]]  \t\n\t\t\t\t\t\t  \t-->DDB_LINK|Magic Items;magic-items --&tbl|+ [td [&tdStyle3]] [&LINK] [/td]\n\t\t\t\t\t\t  \t-->DDB_LINK|Monsters;monsters --&tbl|+ [td [&tdStyle3]] [&LINK] [/td]\n  \t--&tbl|+ [/tr] [/t]\n  \t--+|[&tbl]\n\n\n  -->DDB_LINK|Combat;sources/phb/combat\n  -->SECTION_HEADER|[&LINK]\n  \t--&tbl|[t [&tStyle]] \n\t \t\t\t\t\t[tr [&trStyle1]]\n\t\t\t\t\t  \t-->DDB_LINK|Actions;sources/phb/combat#ActionsinCombat --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Readying;https:sources/phb/combat#Ready --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Conditions;sources/phb/appendix-a-conditions#AppendixAConditions --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t--&tbl|+ [/tr] [tr [&trStyle1]]\n  \t--&tbl|+ [t [&tStyle]] \n  \t\t\t\t\t\t[tr [&trStyle1]]\n\t\t\t\t\t  \t-->DDB_LINK|Cover;sources/phb/combat#Cover --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Grapple;sources/phb/combat#Grappling --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Jumping;sources/basic-rules/adventuring#Jumping --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n  \t--&tbl|+ [/tr] [tr [&trStyle1]]  \t\n\t\t\t\t\t  \t-->DDB_LINK|Stealth;sources/basic-rules/combat#UnseenAttackersandTargets --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Suprise;sources/basic-rules/combat#Surprise --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Death;sources/phb/combat#Droppingto0HitPoints --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n  \t--&tbl|+ [/tr] [tr [&trStyle1]]  \t\n\t\t\t\t\t  \t-->DDB_LINK|Conentrating;https:sources/phb/spellcasting#Concentration --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Suffocating;sources/phb/adventuring#Suffocating --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Lingering Injuries;sources/dmg/dungeon-masters-workshop#Injuries --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n  \t--&tbl|+ [/tr] [/t]\n  \t--+|[&tbl]\n\n  -->DDB_LINK|Adventuring;sources/phb/Adventuring\n  -->SECTION_HEADER|[&LINK]\n  \t--&tbl|[t [&tStyle]] \n  \t\t\t\t\t[tr [&trStyle1]]\n\t\t\t\t\t  \t-->DDB_LINK|Money;sources/phb/equipment#StandardExchangeRates --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Armor;sources/phb/equipment#ArmorandShields --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Weapons;sources/phb/equipment#Weapons --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t--&tbl|+ [/tr] [tr [&trStyle1]]\n  \t--&tbl|+ [t [&tStyle]] \n  \t\t\t\t\t\t[tr [&trStyle1]]\n\t\t\t\t\t  \t-->DDB_LINK|Gear;sources/phb/equipment#AdventuringGear --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Tools;sources/phb/equipment#Tools --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Travel;sources/phb/adventuring#Movement --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n  \t--&tbl|+ [/tr] [tr [&trStyle1]]  \t\n\t\t\t\t\t  \t-->DDB_LINK|Vision/Light;sources/phb/adventuring#VisionandLight --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Checks;sources/phb/using-ability-scores#UsingEachAbility --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Saves;sources/phb/using-ability-scores#SavingThrows --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n  \t--&tbl|+ [/tr] [tr [&trStyle1]]  \t\n\t\t\t\t\t  \t-->DDB_LINK|Spellcasting;sources/phb/spellcasting --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Spell Schools;sources/phb/spellcasting#AttackRolls --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Wild Magic;sources/phb/classes#WildMagic --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n  \t--&tbl|+ [/tr] [tr [&trStyle1]]  \t\n\t\t\t\t\t  \t-->DDB_LINK|Madness;sources/dmg/running-the-game#Madness --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Disease;sources/dmg/running-the-game#Diseases --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Poison;sources/dmg/running-the-game#Poisons --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n  \t--&tbl|+ [/tr] [tr [&trStyle1]]  \t\n\t\t\t\t\t  \t-->DDB_LINK|Hazards;sources/dmg/adventure-environments#DungeonHazards --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Chases;sources/dmg/running-the-game#Chases --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->DDB_LINK|Downtime;sources/phb/adventuring#BetweenAdventures --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n  \t--&tbl|+ [/tr] [/t]\n  \t--+|[&tbl]\n\n  -->WEB_LINK|Miscellaneous Tools;https://donjon.bin.sh/5e/\n  -->SECTION_HEADER|[&LINK]\n  \t--&tbl|[t [&tStyle]] \n  \t\t\t\t\t[tr [&trStyle1]]\n\t\t\t\t\t  \t-->WEB_LINK|NPC Creation;https://rpgtinker.com/ --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->WEB_LINK|Names;https://www.fantasynamegenerators.com/dungeons-and-dragons.php --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->WEB_LINK|DonJon;https://donjon.bin.sh/5e/random/ --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t--&tbl|+ [/tr] [tr [&trStyle1]]\n  \t--&tbl|+ [t [&tStyle]] \n  \t\t\t\t\t\t[tr [&trStyle1]]\n\t\t\t\t\t  \t-->WEB_LINK|Kassoon;https://www.kassoon.com/dnd/ --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->WEB_LINK|Open;sources\\phb --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n\t\t\t\t\t  \t-->WEB_LINK|open;sources\\dmg --&tbl|+ [td [&tdStyle2]] [&LINK] [/td]\n  \t--&tbl|+ [/tr] [/t]\n  \t--+|[&tbl]\n\n--X|\n\n--/|I use D&D Beyond for my rules refrences.  These functions create hyperlinks based on context of card\n--:DDB_LINK|Name; Ref (ref assumes that https://www.dndeyond.com/ will be prefixed)\n  --/|Format is https://www.dndbeyond.com/Ref\n  --/| returns [&LINK] as a global link\n  --&LINK|[button][%1%]::https://www.dndbeyond.com/[%2%][/button]\n--<|\n\n--:WEB_LINK|Name; Ref \n  --&LINK|[button][%1%]::[%2%][/button]\n--<|\n\n--:DNDBEYOND_MONSTER_LINK|MonsterName \n  --/|Format is https://www.dndbeyond.com/monsters/vampire-spellcaster\n  --~MN|string;replace; ;-;[%1%]\n  --&zDnDBeyondMonsterLink|https://www.dndbeyond.com/monsters/[&MN]\n--<|\n\n--:DNDBEYOND_SPELL_LINK|SpellName \n  --/|Format is https://www.dndbeyond.com/spells/dominate-person\n  --~SN|string;replace; ;-;[%1%]\n  --&zDnDBeyondSpellLink|https://www.dndbeyond.com/spells/[&SN]\n--<|\n\n--:SECTION_HEADER|Title\n  --&hdrstyle_T|style=\"width:100%;padding:1px;border-spacing:0px;border-collapse:collapse;text-shadow: 0px 0px 1px black;border: 0px solid black;\"\n  --&hdrstyle_TR|style=\"border:0px solid black;\"\n  --&hdrstyle_TD|style=\"width:100%;background-color:#FFFFFF;font-size:110%;font-weight:bold;text-align:center\"\n  --+|[t [&hdrstyle_T]][tr [&hdrstyle_TR]][td [&hdrstyle_TD]][c][%1%][/c][/td][/tr][/t]\n--<|\n}}",
            "order": -1
        }
    ]
}